<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="当你开始认真的时候，全世界都会给你让路！">
<meta property="og:type" content="website">
<meta property="og:title" content="Perserverance">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Perserverance">
<meta property="og:description" content="当你开始认真的时候，全世界都会给你让路！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="EddieZhang">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Perserverance</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Perserverance</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description"> </p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/16/The-second-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="EddieZhang">
      <meta itemprop="description" content="当你开始认真的时候，全世界都会给你让路！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Perserverance">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/16/The-second-blog/" class="post-title-link" itemprop="url">The-second-blog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-10-16 14:13:48 / 修改时间：14:31:15" itemprop="dateCreated datePublished" datetime="2022-10-16T14:13:48+08:00">2022-10-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>![](&#x2F;The-second-blog&#x2F;1 wbNftKjM0CGqzH-7AnHrYQ.jpeg)</p>
<h2 id="JDBC★"><a href="#JDBC★" class="headerlink" title="JDBC★"></a>JDBC★</h2><p><strong>（Java DataBase Connectivity）</strong></p>
<p>JDBC是一种可用于执行SQL语句的Java API</p>
<p>是连接<strong>数据库</strong>和Java应用程序的纽带</p>
<p>为什么要学习<strong>数据库</strong><br> <strong>持久化</strong>：将数据保存到可掉电式储存设备中以供后续使用。数据持久化意味着将内存中的数据保存到硬盘上加以“固化”。</p>
<p><strong>持久化的作用</strong>：将内存中的数据储存在关系型数据库中。</p>
<h3 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h3><p><strong>（Java Database Connectivity）&amp; 数据库连接池</strong></p>
<h4 id="JDBC概述"><a href="#JDBC概述" class="headerlink" title="JDBC概述"></a>JDBC概述</h4><p>JDBC是一种可用于执行SQL语句的Java API（Application Programming Interface，应用程序设计接口），是连接数据库和Java应用程序的纽带</p>
<p>JDBC为访问不同的数据库提供了统一的接口，为使用者屏蔽了细节问题；</p>
<p>使用JDBC可以连接任何提供了JDBC驱动程序的数据库系统，从而可以完成对数据库的操作；</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220907203413194.png" alt="image-20220907203413194"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220907204147063.png" alt="image-20220907204147063"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220907204209443.png" alt="image-20220907204209443"></p>
<h4 id="JDBC简单入门"><a href="#JDBC简单入门" class="headerlink" title="JDBC简单入门"></a>JDBC简单入门</h4><p><strong>JDBC</strong>的全称是Java DataBase Connectivity，是一套面向对象的应用程序接口，指定了统一的访问各种关系型数据库的标准接口。JDBC是一种底层的API，因此访问数据库时需要在业务逻辑层中嵌入SQL语句。SQL语句是面向关系的，依赖于关系模型，所以通过JDBC技术访问数据库也是面向关系的。JDBC技术主要完成以下几个任务：</p>
<p><img src="http://localhost:8000/52da9674-5bf6-443b-b562-44a304f2f6fb/OEBPS/Images/image_ffa22309916341b98ab234a5bf966bb9.jpg" alt="img">　与数据库建立一个连接。</p>
<p><img src="http://localhost:8000/52da9674-5bf6-443b-b562-44a304f2f6fb/OEBPS/Images/image_1a7a1b578cda483d8f0bf78b20fc2d5a.jpg" alt="img">　向数据库发送SQL语句。</p>
<p><img src="http://localhost:8000/52da9674-5bf6-443b-b562-44a304f2f6fb/OEBPS/Images/image_dc2d26f461ae4a16987de3183fcd6492.jpg" alt="img">　处理从数据库返回的结果。</p>
<p>需要注意的是，<strong>JDBC并不能直接访问数据库</strong>，必须<strong>依赖于数据库厂商提供的JDBC驱动程序</strong>。</p>
<h5 id="JDBC程序编写的步骤"><a href="#JDBC程序编写的步骤" class="headerlink" title="JDBC程序编写的步骤"></a>JDBC程序编写的步骤</h5><p>1.注册驱动————加载driver类</p>
<p>2.获取连接————得到Connection</p>
<p>3.执行增删改查——发送SQL 给mysql执行</p>
<p>4.释放资源————关闭相关的连接</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBC--连接到mysql中的db01库中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="comment">//前置工作--》将jar包复制粘贴到IDEA所用的项目下，放置jar包的目录可以是自己新建的，也可以和项目同在一个目录下。然后再：右键选择添加到add as Library下:</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavaConnectMysqlTest4</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//通过Properties对象Load配置信息（配置信息可以根据实际情况自行编辑）</span></span><br><span class="line">            <span class="comment">//user=root</span></span><br><span class="line">			<span class="comment">//password=root</span></span><br><span class="line">			<span class="comment">//url=jdbc:mysql://localhost:3306/db01?	rewriteBatchedStatements=TRUE</span></span><br><span class="line">			<span class="comment">//driver=com.mysql.cj.jdbc.Driver</span></span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>)));</span><br><span class="line">            <span class="comment">//获取配置文件信息内容</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="comment">//1.注册驱动--可以省略 建议写上</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//2.取得连接</span></span><br><span class="line">            connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//3.sql语句</span></span><br><span class="line">            <span class="comment">//3.1取得执行sql语句的对象</span></span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            <span class="comment">//3.2编写sql语句--执行sql语句</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> statement.executeUpdate(<span class="string">&quot;create table order2 (id int primary key auto_increment,`name` varchar(10) not null default &#x27;&#x27;,`gender` enum (&#x27;男&#x27;,&#x27;女&#x27;))&quot;</span>);<span class="comment">//此处返回的是&gt; Affected rows:</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> statement.executeUpdate(<span class="string">&quot;insert into order2 values (null,&#x27;EddieZhang&#x27;,&#x27;男&#x27;),(null,&#x27;Irving&#x27;,&#x27;男&#x27;),(null,&#x27;James&#x27;,&#x27;男&#x27;)&quot;</span>);<span class="comment">//此处返回的是&gt; Affected rows:</span></span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;创建库指令完成~~&quot;</span>);<span class="comment">//创建表指令的//此处返回的是&gt; Affected rows:为0 所有不会输出</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(i1 &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;插入数据指令完成~~&quot;</span>);<span class="comment">//插入数据的指令//此处返回的是&gt; Affected rows:大于0 会输出</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    statement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 结果集 ResultSet</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSetTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="comment">//连接到Mysql中的db01库中</span></span><br><span class="line">        <span class="comment">//根据获取配置文件信息的方法连接</span></span><br><span class="line">        <span class="comment">//通过Properties对象load配置文件信息（配置文件可以根据实际需求编写）</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();<span class="comment">//new一个Properties对象</span></span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>)));</span><br><span class="line">        <span class="comment">//对象调用getProperty（）方法获取相关值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="comment">//1.注册驱动</span></span><br><span class="line">        Class.forName(driver);</span><br><span class="line">        <span class="comment">//2.取得连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="comment">//3.sql语句</span></span><br><span class="line">        <span class="comment">//获取执行sql语句的对象</span></span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> statement.executeQuery(<span class="string">&quot;select id,name,address from test1&quot;</span>);<span class="comment">//查询select语句调用executeQuery()方法会返回一个结果集ResultSet</span></span><br><span class="line">        <span class="comment">//想要获取ResultSet需要用到while循环</span></span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;<span class="comment">//ResultSet对象中有next方法（读取每一行的列 如果遇到null行则返回false）一行接着下一行的读取</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> resultSet.getInt(<span class="number">1</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> resultSet.getString(<span class="number">2</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> resultSet.getString(<span class="number">3</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">            System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + address);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4.释放资源</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        statement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="JDBC-API★"><a href="#JDBC-API★" class="headerlink" title="JDBC API★"></a>JDBC API★</h4><h5 id="DriverManager"><a href="#DriverManager" class="headerlink" title="DriverManager"></a>DriverManager</h5><p>建立一个指定到数据库的连接并返回一个Connection对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">(String url,String user,String password)</span></span><br><span class="line"><span class="comment">//2.取得连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);<span class="comment">//建立一个指定到数据库的连接并返回一个Connection对象</span></span><br></pre></td></tr></table></figure>

<h5 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h5><p>需要–.close（）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法</span></span><br><span class="line">Statement <span class="title function_">createStatement</span><span class="params">()</span></span><br><span class="line"><span class="comment">//创建Statement对象 可以用来执行sql语句</span></span><br><span class="line"><span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> connection.createStatement();</span><br></pre></td></tr></table></figure>

<h5 id="PrepareStatement"><a href="#PrepareStatement" class="headerlink" title="PrepareStatement"></a>PrepareStatement</h5><p>需要–.close（）</p>
<p>解决Statement<strong>存在sql注入风险</strong>的方法：使用PrepareStatement（从Statement扩展而来）取代Statement</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Statement</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需要--.close（）</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//**存在sql注入风险**</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//sql注入：利用某些系统没有对用户数据输入的数据进行充分的检测，而在输入数据中注入非法的sql语句段或命令，恶意攻击数据库</span></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line">ResultSet <span class="title function_">executeQuery</span><span class="params">(String sqlQuery)</span></span><br><span class="line">    <span class="comment">//执行给定字符串中的sql语句，并返回一个用于查询结果的ResultSet对象</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sqlStatement)</span></span><br><span class="line">    <span class="comment">///执行dml语句</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">executeLargeUpdate</span><span class="params">(String sqlStatement)</span></span><br><span class="line">    <span class="comment">//执行字符串中指定的insert into，update，delete等sql语句还可以执行ddl语言如create table等 返回的是受影响的行数&gt; Affected rows:</span></span><br><span class="line">    <span class="comment">//如果是没有更新计数的语句（受影响的行数为0）则返回0;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">execute</span><span class="params">(sql)</span></span><br><span class="line">    <span class="comment">//执行任意的语句 </span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//PrepareStatement</span></span><br><span class="line"><span class="comment">//需要--.close（）</span></span><br><span class="line"><span class="comment">//方法</span></span><br><span class="line">ResultSet <span class="title function_">executeQuery</span><span class="params">(String sqlQuery)</span></span><br><span class="line">    <span class="comment">//执行给定字符串中的sql语句，并返回一个用于查询结果的ResultSet对象</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">executeUpdate</span><span class="params">(String sqlStatement)</span></span><br><span class="line">    <span class="comment">///执行dml语句</span></span><br><span class="line"><span class="type">long</span> <span class="title function_">executeLargeUpdate</span><span class="params">(String sqlStatement)</span></span><br><span class="line">    <span class="comment">//执行字符串中指定的insert into，update，delete等sql语句还可以执行ddl语言如create table等 返回的是受影响的行数&gt; Affected rows:</span></span><br><span class="line">    <span class="comment">//如果是没有更新计数的语句（受影响的行数为0）则返回0;</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">execute</span><span class="params">(sql)</span></span><br><span class="line">    <span class="comment">//执行任意的语句 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * PrepareStatement</span></span><br><span class="line"><span class="comment"> * 解决Statement**存在sql注入风险**的方法：使用PrepareStatement（从Statement扩展而来）取代Statement</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PrepareStatementTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException, ClassNotFoundException, SQLException &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入要查询的姓名:&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">readName</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        System.out.print(<span class="string">&quot;请输入要查询的姓别:&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">readGender</span> <span class="operator">=</span> scanner.nextLine();</span><br><span class="line">        <span class="comment">//通过Properties对象load相关的配置文件信息（根据需求可以编辑配置文件）</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>)));</span><br><span class="line">        <span class="comment">//使用getProperty()方法得到配置文件中的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="comment">//1.注册驱动</span></span><br><span class="line">        Class.forName(driver);</span><br><span class="line">        <span class="comment">//2.取得连接</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">        <span class="comment">//3.sql语句</span></span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(<span class="string">&quot;select * from order2 where name = ? and gender = ?&quot;</span>);<span class="comment">//其中？是占位符</span></span><br><span class="line">        <span class="comment">//调用set xxx(第几个占位符)方法 给占位符设置值</span></span><br><span class="line">        preparedStatement.setString(<span class="number">1</span>,readName);</span><br><span class="line">        preparedStatement.setString(<span class="number">2</span>,readGender);</span><br><span class="line"></span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> preparedStatement.executeQuery();</span><br><span class="line">        <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> resultSet.getInt(<span class="number">1</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> resultSet.getString(<span class="number">2</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> resultSet.getString(<span class="number">3</span>);</span><br><span class="line">            System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + gender);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//4.释放资源</span></span><br><span class="line">        resultSet.close();</span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">        scanner.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ResultSet"><a href="#ResultSet" class="headerlink" title="ResultSet"></a>ResultSet</h5><p>需要–.close（）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方法</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">next</span><span class="params">()</span></span><br><span class="line">    <span class="comment">//将结果集中的当前行向next移动一行。如果到达最后一行的后面，则返回false。初始情况下必须调此方法才能转到第一行</span></span><br><span class="line"><span class="type">boolean</span> <span class="title function_">previous</span><span class="params">()</span></span><br><span class="line">    <span class="comment">//将结果集中的当前行向prev移动一行。如果到达首行的前面，则返回false。</span></span><br><span class="line">xxx <span class="title function_">getXxx</span><span class="params">(<span class="type">int</span> columnNumber)</span></span><br><span class="line">    <span class="comment">//xxx表示数据类型 columnNumber表示第几列 返回的是此行中相对应的列信息</span></span><br><span class="line">xxx <span class="title function_">getXxx</span><span class="params">(String columnLaber)</span></span><br><span class="line">    <span class="comment">//xxx表示数据类型 columnLabel – 使用 SQL AS 子句指定的列的标签。如果未指定 SQL AS 子句，则标签为列名 返回的是此行中相对应的列信息</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 结果集 ResultSet</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ResultSetTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Statement</span> <span class="variable">statement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//查询select语句调用executeQuery()方法会返回一个结果集ResultSet</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//连接到Mysql中的db01库中</span></span><br><span class="line">            <span class="comment">//根据获取配置文件信息的方法连接</span></span><br><span class="line">            <span class="comment">//通过Properties对象load配置文件信息（配置文件可以根据实际需求编写）</span></span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();<span class="comment">//new一个Properties对象</span></span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>)));</span><br><span class="line">            <span class="comment">//对象调用getProperty（）方法获取相关值</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            <span class="comment">//1.注册驱动</span></span><br><span class="line">            Class.forName(driver);</span><br><span class="line">            <span class="comment">//2.取得连接</span></span><br><span class="line">            connection = DriverManager.getConnection(url, user, password);</span><br><span class="line">            <span class="comment">//3.sql语句</span></span><br><span class="line">            <span class="comment">//获取执行sql语句的对象</span></span><br><span class="line">            statement = connection.createStatement();</span><br><span class="line">            resultSet = statement.executeQuery(<span class="string">&quot;select id,name,address from test1&quot;</span>);</span><br><span class="line">            <span class="comment">//想要获取ResultSet需要用到while循环</span></span><br><span class="line">            <span class="keyword">while</span>(resultSet.next())&#123;<span class="comment">//ResultSet对象中有next方法（读取每一行的列 如果遇到null行则返回false）一行接着下一行的读取</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> resultSet.getInt(<span class="number">1</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> resultSet.getString(<span class="number">2</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">address</span> <span class="operator">=</span> resultSet.getString(<span class="number">3</span>);<span class="comment">//获取第某一列的值 要确定返回值类型</span></span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + address);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//4.释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (resultSet != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    resultSet.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (statement != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    statement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="JDBC-Utils"><a href="#JDBC-Utils" class="headerlink" title="JDBC Utils"></a>JDBC Utils</h4><p>封装JDBC Utils</p>
<p>在JDBC操作中，获取连接 和 释放资源 是频繁使用到的。可以将其封装至JDBC连接的工具类JDBC Utils中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * JDBCUtils</span></span><br><span class="line"><span class="comment"> * 在JDBC操作中，获取连接 和 释放资源 是频繁使用到的。可以将其封装至JDBC连接的工具类JDBC Utils中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtils</span> &#123;</span><br><span class="line">    <span class="comment">//定义static的属性</span></span><br><span class="line">    <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">static</span> String driver;</span><br><span class="line">    <span class="keyword">static</span> String url;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在静态代码块中初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>)));</span><br><span class="line">            <span class="comment">//获取配置文件的值并赋值给属性</span></span><br><span class="line">            user = properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            password = properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">            url = properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            driver = properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//返回一个Connection连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> DriverManager.getConnection(url,user,password);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//资源释放的方法</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     需要考虑到释放的资源 Connection connection, Statement statement, ResultSet resultSet</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">closerResource</span><span class="params">(Connection connection, Statement statement, ResultSet resultSet)</span>&#123;</span><br><span class="line">        <span class="comment">//判断是否为空 不为空时close()</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(connection != <span class="literal">null</span>)&#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(statement != <span class="literal">null</span>)&#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(resultSet != <span class="literal">null</span>)&#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用JDBCUtils测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 测试创建的JDBCUtils工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtilsTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用工具类JDBCUtils直接取得连接</span></span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">//sql语句</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(<span class="string">&quot;delete from order2 where id = ?&quot;</span>);</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,<span class="string">&quot;1&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">executeUpdate</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span>(executeUpdate &gt; <span class="number">0</span>)&#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;sql语句执行成功~~&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//使用工具类JDBCUtils释放资源</span></span><br><span class="line">        JDBCUtils.closerResource(connection,preparedStatement,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        测试select语句指令</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">resultSet</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//使用工具类JDBCUtils直接取得连接</span></span><br><span class="line">            connection = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">//sql语句</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(<span class="string">&quot;select * from order2 where id between ? and ?&quot;</span>);</span><br><span class="line">            preparedStatement.setInt(<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">            preparedStatement.setInt(<span class="number">2</span>,<span class="number">4</span>);</span><br><span class="line">            resultSet = preparedStatement.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(resultSet.next())&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">id</span> <span class="operator">=</span> resultSet.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">gender</span> <span class="operator">=</span> resultSet.getString(<span class="string">&quot;gender&quot;</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;\t&quot;</span> + name + <span class="string">&quot;\t&quot;</span> + gender);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">////使用工具类JDBCUtils释放资源</span></span><br><span class="line">        JDBCUtils.closerResource(connection,preparedStatement,resultSet);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="事务★"><a href="#事务★" class="headerlink" title="事务★"></a>事务★</h4><p><strong>ACID</strong></p>
<p><strong>事务是必须满足4个条件（ACID）：</strong></p>
<p><strong>原子性（Atomicity，或称不可分割性）</strong>、<strong>一致性（Consistency）</strong>、<strong>隔离性（Isolation，又称独立性）</strong>、<strong>持久性（Durability）</strong>。</p>
<p><strong>原子性：</strong>一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</p>
<p><strong>一致性：</strong>在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</p>
<p><strong>隔离性：</strong>数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。</p>
<p><strong>隔离级别：事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</strong></p>
<p><strong>持久性：</strong>事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220909160456888.png" alt="image-20220909160456888"></p>
<p><strong>关闭默认值</strong></p>
<p>JDBC对事物进行编程：默认情况下，数据库连接处于自动提交模式（auto commit mode）即每个sql语句一旦被执行便被提交到数据库。一旦命令被提交，就无法进行回滚（rollback）操作。使用事物时，需要：<strong>connection.setAutoCommit(false)</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220909160810847.png" alt="image-20220909160810847"></p>
<p><strong>保存点</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220909160905942.png" alt="image-20220909160905942"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Transaction事物</span></span><br><span class="line"><span class="comment"> * JDBC对事物进行编程：</span></span><br><span class="line"><span class="comment"> * 默认情况下，数据库连接处于自动提交模式（auto commit mode）即每个sql语句一旦被执行便被提交到数据库。</span></span><br><span class="line"><span class="comment"> * 一旦命令被提交，就无法进行回滚（rollback）操作。使用事物时，需要：**connection.setAutoCommit(false)**</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransactionTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement1</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtils.getConnection();<span class="comment">//通过JDBCUtils取得连接</span></span><br><span class="line">            connection.setAutoCommit(<span class="literal">false</span>);<span class="comment">//setAutoCommit(false)</span></span><br><span class="line">            <span class="comment">//sql语句</span></span><br><span class="line">            preparedStatement = connection.prepareStatement(<span class="string">&quot;update account set balance = balance - 100 where name = &#x27;张锦豪&#x27;&quot;</span>);</span><br><span class="line">            preparedStatement = connection.prepareStatement(<span class="string">&quot;update account set balance = balance + 100 where name = &#x27;欧文&#x27;&quot;</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">executeUpdate</span> <span class="operator">=</span> preparedStatement.executeUpdate();</span><br><span class="line">            <span class="keyword">if</span> (executeUpdate &gt; <span class="number">0</span>) &#123;<span class="comment">//</span></span><br><span class="line">                System.out.println(<span class="string">&quot;sql语句执行成功~~&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">                connection.commit();<span class="comment">//提交事物（事物一旦提交 就不能在进行回滚操作）</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;<span class="comment">//如果在执行过程中发生了异常 就进行回滚</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.rollback();<span class="comment">//回滚操作</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(ex);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;<span class="comment">//释放资源</span></span><br><span class="line">            <span class="keyword">if</span> (preparedStatement != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (preparedStatement1 != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    preparedStatement1.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (connection != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    connection.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="批处理"><a href="#批处理" class="headerlink" title="批处理"></a>批处理</h4><p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220909164619398.png" alt="image-20220909164619398"></p>
<p><strong>JDBC连接Mysql时，使用批处理功能需要在url中添加参数:rewriteBatchedStatements&#x3D;ture</strong></p>
<p><strong>常用方法</strong>：</p>
<p><strong>addBatch()	:添加需要批量处理的sql语句或参数</strong></p>
<p><strong>executeBatch()	:执行批量处理语句</strong></p>
<p><strong>clearBatch()	:清空批处理包的语句</strong></p>
<p>Tip：<strong>通常搭配prepareStatement使用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * batch</span></span><br><span class="line"><span class="comment"> * 批量处理</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BatchTest</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @Description 未使用batch批处理进行测试</span></span><br><span class="line"><span class="comment">     * @Author EddieZhang</span></span><br><span class="line"><span class="comment">     * @Date 2022/9/9 17:05</span></span><br><span class="line"><span class="comment">     * @Since version-1.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">noBatchTest</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;insert into admin values (null,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(str);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span>  <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">10000</span>;i++)&#123;</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,<span class="string">&quot;Eddie&quot;</span> + i);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>,<span class="string">&quot;password&quot;</span> + i);</span><br><span class="line">            i1 = preparedStatement.executeUpdate();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(i1 &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;sql执行成功~~&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;本次执行用时 &quot;</span> + (end - start) + <span class="string">&quot;秒~~&quot;</span>);</span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * @Description 使用batch批处理进行测试</span></span><br><span class="line"><span class="comment">     * @Author EddieZhang</span></span><br><span class="line"><span class="comment">     * @Date 2022/9/9 17:06</span></span><br><span class="line"><span class="comment">     * @Since version-1.0</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">BatchTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtils.getConnection();</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;insert into admin values (null,?,?)&quot;</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">preparedStatement</span> <span class="operator">=</span> connection.prepareStatement(str);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span>  <span class="operator">=</span> <span class="number">0</span>;i &lt; <span class="number">100000</span>;i++)&#123;</span><br><span class="line">            preparedStatement.setString(<span class="number">1</span>,<span class="string">&quot;Eddie&quot;</span> + i);</span><br><span class="line">            preparedStatement.setString(<span class="number">2</span>,<span class="string">&quot;password&quot;</span> + i);</span><br><span class="line">            preparedStatement.addBatch();<span class="comment">//将执行语句添加至Batch</span></span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                将sql语句放入批处理包中 源码分析--批量处理会减少我们发送 sql 语句的网络开销，而且减少编译次数，因此效率提高</span></span><br><span class="line"><span class="comment">                      ①创建一个Arraylist elementData=&gt;Object[]</span></span><br><span class="line"><span class="comment">                      ②elementData=&gt;Object[]（初始容量为10）存放preparedStatement预处理的sql语句</span></span><br><span class="line"><span class="comment">                      ③elementData=&gt;Object[]（初始容量为10）满后就进行1.5倍扩容</span></span><br><span class="line"><span class="comment">                      ④当添加到指定的值后就进行executeBatch</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="keyword">if</span>((i + <span class="number">1</span>) % <span class="number">1000</span> == <span class="number">0</span>)&#123;<span class="comment">//当执行的sql语句达到1000条时就批量执行一次</span></span><br><span class="line">                preparedStatement.executeBatch();</span><br><span class="line">                preparedStatement.clearBatch();<span class="comment">//执行完之后要清空</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;本次执行用时 &quot;</span> + (end - start) + <span class="string">&quot;秒~~&quot;</span>);</span><br><span class="line">        preparedStatement.close();</span><br><span class="line">        connection.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="连接池★"><a href="#连接池★" class="headerlink" title="连接池★"></a>连接池★</h4><p><strong>优点总结：</strong></p>
<p><strong>提高程序相应速度	减少了创建连接的相应时间</strong></p>
<p><strong>可重复使用	降低资源消耗</strong></p>
<p><strong>便于连接管理 可以配置相关参数</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220910200657635.png" alt="image-20220910200657635"></p>
<p><strong>解决传统开发中的数据连接问题，采用数据库连接池（connection pool）技术</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220910194217104.png" alt="image-20220910194217104"></p>
<p><strong>JDBC的数据库连接池</strong>使用 java.sql.DataSource 来表示，DataSource只是一个接口，该接口通常由第三方提供实现【提供.jar】</p>
<p><strong>数据库连接池：</strong>	<strong>C3P0</strong>	DBCP	Proxool	BoneCP	<strong>Druid</strong>（荐）</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220910194417198.png" alt="image-20220910194417198"></p>
<p>C3P0</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * C3P0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(value = &quot;all&quot;)</span><span class="comment">//抑制警告</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionPoolC3P0Test</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        方式一：</span></span><br><span class="line"><span class="comment">        在程序中指定相关参数</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">C3P0Test</span><span class="params">()</span> <span class="keyword">throws</span> IOException, PropertyVetoException, SQLException &#123;</span><br><span class="line">        <span class="comment">//创建一个数据源对象ComboPooledDataSource</span></span><br><span class="line">        <span class="type">ComboPooledDataSource</span> <span class="variable">comboPooledDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//通过配置文件获取相关连接信息</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;src\\mysql.properties&quot;</span>));</span><br><span class="line">        <span class="comment">//获取相关的值</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">user</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//给数据源配置相关参数</span></span><br><span class="line">        comboPooledDataSource.setDriverClass(driver);</span><br><span class="line">        comboPooledDataSource.setJdbcUrl(url);</span><br><span class="line">        comboPooledDataSource.setUser(user);</span><br><span class="line">        comboPooledDataSource.setPassword(password);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置初始化连接数以及最大连接数</span></span><br><span class="line">        comboPooledDataSource.setInitialPoolSize(<span class="number">10</span>);<span class="comment">//设置初始化连接数</span></span><br><span class="line">        comboPooledDataSource.setMaxPoolSize(<span class="number">50</span>);<span class="comment">//最大连接数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//测试与数据库进行5000次连接</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5000</span>; i++) &#123;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> comboPooledDataSource.getConnection();<span class="comment">//getConnection()方法实现了DataSource接口</span></span><br><span class="line">            connection.close();<span class="comment">//关闭连接</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;本次运行用时:&quot;</span> + (end - start) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        方式二 通过配置文件</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">C3P0Test1</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">ComboPooledDataSource</span> <span class="variable">comboPooledDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ComboPooledDataSource</span>(<span class="string">&quot;DataSource&quot;</span>);</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">500000</span>; i++) &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> comboPooledDataSource.getConnection();</span><br><span class="line">        connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;本次运行共计用时:&quot;</span> + (end - start) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line">        <span class="comment">//本次运行共计用时:772毫秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Druid</strong>（荐）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Druid</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConnectionPoolDruidTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">DruidTest</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//使用Properties对象load相关配置文件信息</span></span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\druid.properties&quot;</span>)));</span><br><span class="line">        <span class="comment">//使用DruidDataSourceFactory去createDataSource得到DataSource获取Druid的连接池</span></span><br><span class="line">        <span class="type">DataSource</span> <span class="variable">dataSource</span> <span class="operator">=</span> DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        <span class="comment">//使用DataSource得到连接</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">500000</span>; i++) &#123;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection();</span><br><span class="line">            connection.close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        System.out.println(<span class="string">&quot;本次运行用时共&quot;</span> + (end - start) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用JDBCUtilsByDruid</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ConnectionPoolDruidTest</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">start</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">500000</span>; i++) &#123;</span><br><span class="line">            <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtilsByDruid.getConnection();<span class="comment">//运行类型class com.alibaba.druid.pool.DruidPooledConnection</span></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;本次运行共计用时:&quot;</span> + (end - start) + <span class="string">&quot;毫秒&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//JDBCUtilsByDruid</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> <span class="doctag">@author</span> EddieZhang</span></span><br><span class="line"><span class="comment"> <span class="doctag">@create</span> 2022-09-10 21:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(value = &quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtilsByDruid</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在静态代码块中完成ds的初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\druid.properties&quot;</span>)));</span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getConnection的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭连接--仅仅是把连接放回到连接池中   而不是真正的 断掉连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet resultSet, Statement statement,Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(resultSet != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(statement != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Apache—DB-Utils"><a href="#Apache—DB-Utils" class="headerlink" title="Apache—DB Utils"></a>Apache—DB Utils</h4><p><strong>commons-dbutils 是Apache 组织提供的一个开源的JDBC工具类，它是对JDBC的封装，使用dbutils能极大的简化JDBC编码的工作量</strong></p>
<p>**QueryRunner类:**该类封装了SQL的执行，是线程安全的。可以实现 增删改查插 批处理 </p>
<p><strong>使用QueryRunner类实现查询</strong></p>
<p><strong>ResultSetHandler</strong>接口:该接口用于处理 java.sql.ResultSet,将数据按要求转换成为另一种形式</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220910230004003.png" alt="image-20220910230004003"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220910224405377.png" alt="image-20220910224405377"></p>
<p><strong>将数据库中的每一条记录封装成对应的对象时 是通过反射机制 调用对象类的空参构造器 通过setXxx方法将数据库中的相应列赋值给类的属性</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920184418130.png" alt="image-20220920184418130"></p>
<p><strong>tip：字段名需要和数据库表中的列名一致 如果出现重名的属性 可以通过sql语句中给数据库的列 as 别名 的方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Apache的DBUtils工具类 + druid（连接池） 完成对表的crud</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(value = &quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApacheDBUtilsTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//得到连接（druid）</span></span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="comment">//使用DBUtils 类和接口</span></span><br><span class="line">            <span class="comment">//创建QueryRunner类--该类封装了SQL的执行，是线程安全的。可以实现 增删改查插 批处理</span></span><br><span class="line">            <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;select id,name,sex,borndate from actor where id &gt;= ?&quot;</span>;</span><br><span class="line">            <span class="comment">/*</span></span><br><span class="line"><span class="comment">                query方法就是执行sql语句，得到resultset --- 封装到 --&gt; ArrayList 集合中 并返回集合</span></span><br><span class="line"><span class="comment">                形参列表解读</span></span><br><span class="line"><span class="comment">                query(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                Connection conn:连接</span></span><br><span class="line"><span class="comment">                String sql:sql语句</span></span><br><span class="line"><span class="comment">                ResultSetHandler&lt;T&gt; rsh:new BeanListHandler&lt;&gt;(Actor.class)将resultset -&gt; Actor对象 -&gt; 封装到ArrayList中</span></span><br><span class="line"><span class="comment">                    //底层用到反射机制 获取Actor的属性 然后进行封装</span></span><br><span class="line"><span class="comment">                Object... params:？的赋值 是可变形参 可以根据第几个(占位符)?进行赋值</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">                底层会自动关闭resultset资源以及prepareStaement资源</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            List&lt;Actor&gt; list = queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">BeanListHandler</span>&lt;&gt;(Actor.class), <span class="number">1</span>);</span><br><span class="line">            <span class="keyword">for</span> (Actor actor :</span><br><span class="line">                    list) &#123;</span><br><span class="line">                System.out.println(actor);</span><br><span class="line">                <span class="comment">//Actor&#123;id=1, name=&#x27;张锦豪&#x27;, sex=&#x27;男&#x27;, borndate=2000-12-07, phone=&#x27;null&#x27;&#125;//可以指定查询列 没有查询的列就默认返回null</span></span><br><span class="line">                <span class="comment">//Actor&#123;id=2, name=&#x27;欧文&#x27;, sex=&#x27;男&#x27;, borndate=1989-02-05, phone=&#x27;null&#x27;&#125;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//关闭资源（只用关闭connection）</span></span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 分析 queryRunner.query 方法:</span></span><br><span class="line"><span class="comment">* public &lt;T&gt; T query(Connection conn, String sql, ResultSetHandler&lt;T&gt; rsh, Object... params) throws</span></span><br><span class="line"><span class="comment">SQLException &#123;</span></span><br><span class="line"><span class="comment">* PreparedStatement stmt = null;//定义 PreparedStatement</span></span><br><span class="line"><span class="comment">* ResultSet rs = null;//接收返回的 ResultSet</span></span><br><span class="line"><span class="comment">* Object result = null;//返回 ArrayList</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* try &#123;</span></span><br><span class="line"><span class="comment">* stmt = this.prepareStatement(conn, sql);//创建 PreparedStatement</span></span><br><span class="line"><span class="comment">* this.fillStatement(stmt, params);//对 sql 进行 ? 赋值</span></span><br><span class="line"><span class="comment">* rs = this.wrap(stmt.executeQuery());//执行 sql,返回 resultset</span></span><br><span class="line"><span class="comment">* result = rsh.handle(rs);//返回的 resultset --&gt; arrayList[result] [使用到反射，对传入 class 对象</span></span><br><span class="line"><span class="comment">                处理]</span></span><br><span class="line"><span class="comment">* &#125; catch (SQLException var33) &#123;</span></span><br><span class="line"><span class="comment">* this.rethrow(var33, sql, params);</span></span><br><span class="line"><span class="comment">* &#125; finally &#123;</span></span><br><span class="line"><span class="comment">* try &#123;</span></span><br><span class="line"><span class="comment">* this.close(rs);//关闭 resultset</span></span><br><span class="line"><span class="comment">                            * &#125; finally &#123;</span></span><br><span class="line"><span class="comment">* this.close((Statement)stmt);//关闭 preparedstatement 对象</span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment">*</span></span><br><span class="line"><span class="comment">* return result;</span></span><br><span class="line"><span class="comment">* &#125;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用Apache-DBUtils + Druid 完成 返回的结果是单行记录 （单个对象）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//得到连接</span></span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="comment">//使用DBUtils 接口和类</span></span><br><span class="line">            <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;select * from actor where id = ?&quot;</span>);</span><br><span class="line">            <span class="type">Actor</span> <span class="variable">query</span> <span class="operator">=</span> queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">BeanHandler</span>&lt;&gt;(Actor.class), <span class="number">1</span>);<span class="comment">//返回的结果是单行记录 （单个对象）使用形参列表中使用的Handler 为new BeanHandler&lt;&gt;(Actor.class)</span></span><br><span class="line">            System.out.println(query);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);<span class="comment">//释放资源</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用Apache-DBUtils + Druid 完成 返回的结果是单行单列的 返回的就是Object对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;<span class="comment">//取得连接</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;select name from actor where id = ?&quot;</span>);</span><br><span class="line">            <span class="type">Object</span> <span class="variable">query</span> <span class="operator">=</span> queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">ScalarHandler</span>&lt;&gt;(), <span class="number">2</span>);<span class="comment">//回的结果是单行单列的 返回的就是Object对象 使用形参列表中使用的Handler 为new ScalarHandler&lt;&gt;()</span></span><br><span class="line">            System.out.println(query);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用Apache-DBUtils + Druid 完成DML操作 update delete insert into</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test4</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//取得连接</span></span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="comment">//使用DBUtils的接口和类 执行sql语句</span></span><br><span class="line">            <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line"><span class="comment">//            String sql = new String(&quot;update actor set name = ? where id = ?&quot;);</span></span><br><span class="line"><span class="comment">//            String sql1 = new String(&quot;insert into actor values (null,?,?,?,?)&quot;);</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">sql2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;delete from actor where name = ?&quot;</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//执行dml的queryRunner.update()</span></span><br><span class="line">            <span class="comment">//返回的结果是受影响的行数</span></span><br><span class="line"><span class="comment">//            int affectedRows = queryRunner.update(connection, sql, &quot;Eddie&quot;, 1);</span></span><br><span class="line"><span class="comment">//            int affectedRows1 = queryRunner.update(connection, sql, &quot;Irving&quot;, 2);</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> queryRunner.update(connection,sql2,<span class="string">&quot;James&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h4 id="DAO-增删改查–BasicDao★"><a href="#DAO-增删改查–BasicDao★" class="headerlink" title="DAO 增删改查–BasicDao★"></a>DAO 增删改查–BasicDao★</h4><p><strong>DAO(data access object) 数据访问对象</strong></p>
<p>这样的通用类称为BasicDao，是专门和数据库交互的，即完成对数据库表（表）的crud操作；</p>
<p>在BasicDao的基础上，实现一张表对应一个Dao，更好的完成功能</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220911211022034.png" alt="image-20220911211022034"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220919215714822.png" alt="image-20220919215714822"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 开发BasicDAO 是其他DAO的父类</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BasicDAO</span>&lt;T&gt; &#123;<span class="comment">//泛型指定具体的类型</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">QueryRunner</span> <span class="variable">queryRunner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">QueryRunner</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">create</span><span class="params">(String sql)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtilsByDruid.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> queryRunner.update(connection,sql);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//开发通用的呃dml方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(String sql,Object... parameters)</span>&#123;<span class="comment">//形参列表传入sql语句 以及相关的参数</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> queryRunner.update(connection,sql, parameters);</span><br><span class="line">            <span class="keyword">return</span> i;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//select返回多个对象（多行）针对 任意表</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">queryMultiply</span><span class="params">(String sql, Class&lt;T&gt; tClass,Object... parameters)</span>&#123;<span class="comment">//形参列表传入sql语句 一个类 的Class对象 以及相关的参数</span></span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            List&lt;T&gt; tList = queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">BeanListHandler</span>&lt;T&gt;(tClass), parameters);</span><br><span class="line">            <span class="keyword">return</span> tList;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//select返回单个（单行）针对 任意表</span></span><br><span class="line">    <span class="keyword">public</span> T <span class="title function_">querySingleRow</span><span class="params">(String sql,Class&lt;T&gt; tClass,Object... parameters)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            connection = JDBCUtilsByDruid.getConnection();</span><br><span class="line">            <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">BeanHandler</span>&lt;T&gt;(tClass), parameters);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//select返回单个（单行单列）Object 针对 任意表</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">queryObject</span><span class="params">(String sql,Object... parameters)</span>&#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> JDBCUtilsByDruid.getConnection();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">T</span> <span class="variable">t</span> <span class="operator">=</span> queryRunner.query(connection, sql, <span class="keyword">new</span> <span class="title class_">ScalarHandler</span>&lt;T&gt;(), parameters);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtilsByDruid.close(<span class="literal">null</span>,<span class="literal">null</span>,connection);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//----------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> <span class="doctag">@author</span> EddieZhang</span></span><br><span class="line"><span class="comment"> <span class="doctag">@create</span> 2022-09-11 21:41</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ActorDAO</span> <span class="keyword">extends</span> <span class="title class_">BasicDAO</span>&lt;Actor&gt;&#123;</span><br><span class="line">    <span class="comment">//继承了BasicDAO 用有其所有方法</span></span><br><span class="line">    <span class="comment">//可以根据业务的相关需求定义其他方法</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GoodsDAO</span> <span class="keyword">extends</span> <span class="title class_">BasicDAO</span>&lt;Goods&gt;&#123;</span><br><span class="line">    <span class="comment">//继承了BasicDAO中所有的方法</span></span><br><span class="line">    <span class="comment">//也可以根据需要定义自己的方法</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//----------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 对ActorDAO的相关测试</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DAOTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">ActorDAO</span> <span class="variable">actorDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ActorDAO</span>();</span><br><span class="line">        <span class="comment">//查询多行</span></span><br><span class="line">        List&lt;Actor&gt; actorDAOS = actorDAO.queryMultiply(<span class="string">&quot;select * from actor where id &gt;= ?&quot;</span>, Actor.class, <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (Actor actor :</span><br><span class="line">                actorDAOS) &#123;</span><br><span class="line">            System.out.println(actor);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//查询单行</span></span><br><span class="line">        <span class="type">Actor</span> <span class="variable">actor</span> <span class="operator">=</span> actorDAO.querySingleRow(<span class="string">&quot;select * from actor where id = ?&quot;</span>, Actor.class, <span class="number">2</span>);</span><br><span class="line">        System.out.println(actor);</span><br><span class="line">        <span class="comment">//查询单行单列</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> actorDAO.queryObject(<span class="string">&quot;select name from actor where id = ?&quot;</span>, <span class="number">2</span>);</span><br><span class="line">        System.out.println(o);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//执行dml操作</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> actorDAO.update(<span class="string">&quot;insert into actor values (null,?,?,?,?)&quot;</span>, <span class="string">&quot;James&quot;</span>, <span class="string">&quot;男&quot;</span>, <span class="string">&quot;1986-08-09&quot;</span>, <span class="string">&quot;12233335555&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;sql语句执行成功&quot;</span>);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">GoodsDAO</span> <span class="variable">goodsDAO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">GoodsDAO</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> goodsDAO.create(<span class="string">&quot;create table goods (id int,name varchar(100),price double)character set utf8 collate utf8_bin engine innodb&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> goodsDAO.update(<span class="string">&quot;insert into goods values (?,&#x27;华为手机&#x27;,2000),(?,&#x27;苹果手机&#x27;,3000),(?,&#x27;小米手机&#x27;,2000),(?,&#x27;vivo手机&#x27;,null),(?,&#x27;三星手机&#x27;,2300),(?,&#x27;海尔手机&#x27;,1800),(?,&#x27;IBM&#x27;,5000),(?,&#x27;格力手机&#x27;,null),(?,&#x27;格力手机&#x27;,null)&quot;</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>,<span class="number">60</span>,<span class="number">70</span>,<span class="number">80</span>,<span class="number">80</span>);</span><br><span class="line">        <span class="keyword">if</span>(i &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;sql语句执行成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Goods&gt; goodsList = goodsDAO.queryMultiply(<span class="string">&quot;select * from goods where id &gt;= ?&quot;</span>, Goods.class, <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">for</span> (Goods goods :</span><br><span class="line">                goodsList) &#123;</span><br><span class="line">            System.out.println(goods);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//----------------------------------------------------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">//数据库连接池 Druid--JDBCUtilsByDruid</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> <span class="doctag">@author</span> EddieZhang</span></span><br><span class="line"><span class="comment"> <span class="doctag">@create</span> 2022-09-10 21:18</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SuppressWarnings(value = &quot;all&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCUtilsByDruid</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在静态代码块中完成ds的初始化</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            properties.load(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;src\\druid.properties&quot;</span>)));</span><br><span class="line">            ds = DruidDataSourceFactory.createDataSource(properties);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getConnection的方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭连接--仅仅是把连接放回到连接池中   而不是真正的 断掉连接</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(ResultSet resultSet, Statement statement,Connection connection)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(resultSet != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                resultSet.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(statement != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                statement.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (connection != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                connection.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="MySQL★"><a href="#MySQL★" class="headerlink" title="MySQL★"></a>MySQL★</h3><p><strong>连接到MySQL数据库的操作</strong></p>
<p>1.服务启动–net start mysql(服务名) 服务关闭–net stop mysql(服务名)</p>
<p>2.登录（连接）–mysql -h 主机名 -P 端口 -u 用户名 -p密码 退出（断连）–exit</p>
<p>-p后不能出现空格</p>
<p>-p后没写密码的，回车会要求输入密码</p>
<p>如果没有写-h 主机，默认就是本机</p>
<p>如果没写-P 端口，默认就是3306</p>
<p>在实际工作中 端口一般会修改</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220825205341677.png" alt="image-20220825205341677"></p>
<p><strong>SQL 分类 SQL语言在功能上主要分为如下3大类：</strong> </p>
<p><strong>DDL（Data Definition Languages、数据定义语言）</strong>，这些语句定义了不同的数据库、表、视图、索 引等数据库对象，还可以用来创建、删除、修改数据库和数据表的结构。 </p>
<p>主要的语句关键字包括 <strong>CREATE</strong> 、 <strong>DROP</strong> 、 <strong>ALTER</strong> 等。 </p>
<p><strong>DML（Data Manipulation Language、数据操作语言）</strong>，用于添加、删除、更新和查询数据库记 录，并检查数据完整性。 </p>
<p>主要的语句关键字包括 <strong>INSERT</strong> 、 <strong>DELETE</strong> 、 <strong>UPDATE</strong> 、 <strong>SELECT</strong> 等。 <strong>SELECT</strong>是SQL语言的基础，最为重要。 </p>
<p><strong>DCL（Data Control Language、数据控制语言）</strong>，用于定义数据库、表、字段、用户的访问权限和 安全级别。 </p>
<p>主要的语句关键字包括 <strong>GRANT</strong> 、 <strong>REVOKE</strong> 、 <strong>COMMIT</strong> 、 <strong>ROLLBACK</strong> 、 <strong>SAVEPOINT</strong> 等</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220901093814041.png" alt="image-20220901093814041"></p>
<p><strong>SQL语言的规则与规范</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220901093857419.png" alt="image-20220901093857419"></p>
<p><strong>数据导入指令</strong></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220901093930942.png" alt="image-20220901093930942"></p>
<h4 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#数据库操作</span><br><span class="line">#<span class="keyword">create</span> database db03 [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line"><span class="comment">-- 创建一个数据空并使用 CHARACTER SER 指定字符集 同时使用 COLLATE 指定校验 </span></span><br><span class="line"><span class="comment">-- 其中[IF NOT EXISTS](开发中推荐使用)表示如果库已经存在就不创建 不存在就创建</span></span><br><span class="line">#创建一个名为Eddie_db02的数据库</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Eddie_db02;</span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE Eddie_db02;</span><br><span class="line">#创建一个使用utf8字符集的Eddie_db03数据库</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Eddie_db03 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8;</span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE Eddie_db03;</span><br><span class="line">#创建一个使用utf_8字符集，并带校对规则的Eddie_db04数据库</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Eddie_db04 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_bin;</span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE Eddie_db04</span><br><span class="line">#以下是表示查询<span class="keyword">sql</span>语句；<span class="keyword">SELECT</span>查询 <span class="operator">*</span>代表所有字段 <span class="keyword">FROM</span>从哪个表中查询 WHRER表示从哪个字段查 NAME <span class="operator">=</span> <span class="string">&#x27;Ivring&#x27;</span> 表示查询名字为Ivring的</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user1 <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;Ivring&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#查看当前正在使用的库（当前在哪个库下）</span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();</span><br><span class="line">#查看有哪些数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES</span><br><span class="line">#显示数据库的创建语句</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE eddie_db03;</span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE eddie_db02;</span><br><span class="line">#在创建数据库或者表的时候；为了规避关键字可以使用反引`<span class="keyword">CREATE</span>`</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE Eddie_db05 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_bin</span><br><span class="line"><span class="keyword">DROP</span> DATABASE eddie_db05</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user1</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> user1 <span class="keyword">WHERE</span> NAME <span class="operator">=</span> <span class="string">&#x27;Ivring&#x27;</span>;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE eddie_db05 <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_bin</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> </span><br></pre></td></tr></table></figure>



<h5 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">create</span> database db03 [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line"><span class="comment">-- 创建一个数据空并使用 CHARACTER SET 指定字符集 同时使用 COLLATE 指定校验 </span></span><br><span class="line"><span class="comment">-- （如果不指定默认字符集为utf-8 默认校对规则为 utf-8)_general_ci为不区分大小写）</span></span><br><span class="line"><span class="comment">-- 其中[IF NOT EXISTS](开发中推荐使用)表示如果库已经存在就不创建 不存在就创建</span></span><br><span class="line">#在创建数据库或者表的时候；为了规避关键字可以使用反引`<span class="keyword">CREATE</span>`</span><br></pre></td></tr></table></figure>

<h5 id="查看，删除数据库"><a href="#查看，删除数据库" class="headerlink" title="查看，删除数据库"></a>查看，删除数据库</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#查看有哪些数据库</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES</span><br><span class="line">#显示数据库的创建语句</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE eddie_db03;</span><br><span class="line"></span><br><span class="line">#删除数据库</span><br><span class="line"><span class="keyword">DROP</span> DATABASE eddie_db02;</span><br><span class="line"><span class="comment">-- For instance:</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> database db02;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="备份，恢复数据库"><a href="#备份，恢复数据库" class="headerlink" title="备份，恢复数据库"></a>备份，恢复数据库</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#备份数据库:（注意要在DOS执行）命令行<span class="operator">-</span><span class="operator">*</span><span class="operator">-</span>这里备份数据库即把创建数据库的所有操作命令进行备份<span class="comment">--&gt;恢复数据库时即直接将所有操作命令运行一次即可</span></span><br><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p <span class="operator">-</span>B db02(数据库的名) <span class="operator">&gt;</span>e:\\bal.sql(指定要备份到的磁盘路径 以及文件名.<span class="keyword">sql</span>)</span><br><span class="line"><span class="comment">-- C:\WINDOWS\system32&gt;mysqldump -u root -p -B db02 &gt;e:\\bak2.sql</span></span><br><span class="line"><span class="comment">-- Enter password: ****</span></span><br><span class="line">#恢复数据库:（注意要在Mysql命令执行）<span class="operator">-</span><span class="operator">*</span><span class="operator">-</span>这里备份数据库即把创建数据库的所有操作命令进行备份<span class="comment">--&gt;恢复数据库时即直接将所有操作命令运行一次即可</span></span><br><span class="line">mysql<span class="operator">&gt;</span> source e:\\bak2.sql</span><br></pre></td></tr></table></figure>



<h4 id="表"><a href="#表" class="headerlink" title="表"></a>表</h4><h5 id="备份，恢复表"><a href="#备份，恢复表" class="headerlink" title="备份，恢复表"></a>备份，恢复表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 备份表:（注意要在DOS执行）命令行-*-这里备份数据库的表即把创建数据库的表的所有操作命令进行备份--&gt;恢复数据库时即直接将所有操作命令运行一次即可</span></span><br><span class="line">mysqldump <span class="operator">-</span>u root <span class="operator">-</span>p db02(数据库的名) (表名)<span class="operator">&gt;</span>e:<span class="operator">/</span><span class="operator">/</span>backaccount.sql(指定要备份到的磁盘路径 以及文件名.<span class="keyword">sql</span>)</span><br><span class="line"><span class="comment">-- C:\WINDOWS\system32&gt;mysqldump -u root -p db01 account &gt;e://backaccount.sql</span></span><br><span class="line"><span class="comment">-- Enter password: ****</span></span><br><span class="line">#恢复表:（注意要在Mysql命令执行）<span class="operator">-</span><span class="operator">*</span><span class="operator">-</span>这里备份数据库的表即把创建数据库的表的所有操作命令进行备份<span class="comment">--&gt;恢复数据库时即直接将所有操作命令运行一次即可</span></span><br><span class="line">mysql<span class="operator">&gt;</span> source e:<span class="operator">/</span><span class="operator">/</span>backaccount.sql;</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 表名(</span><br><span class="line">    字段<span class="number">1</span>, 数据类型 [约束条件] [默认值], 字段<span class="number">2</span>, 数据类型 [约束条件] [默认值], 字段<span class="number">3</span>, 数据类型 [约束条件] [默认值], </span><br><span class="line">    …… </span><br><span class="line">    [表约束条件] );</span><br><span class="line">    </span><br><span class="line">    mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables <span class="keyword">from</span> db02;<span class="comment">-- 查看指定库中所有的表</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_db02 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> emp1           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee1      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee2      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee3      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;<span class="comment">-- 查看指定表中的完整数据</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> emp1;<span class="comment">-- 查看指定表的创建结构</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> emp1  <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `emp1` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `a` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `b` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c` <span class="type">int</span> GENERATED ALWAYS <span class="keyword">AS</span> ((`a` <span class="operator">+</span> `b`)) VIRTUAL</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> emp1;<span class="comment">-- describe 查看表的详情描述</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> a     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> b     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span> VIRTUAL GENERATED <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h5 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">#创建表指明表的字段</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student4(</span><br><span class="line">    id <span class="type">int</span>,`name` <span class="type">VARCHAR</span>(<span class="number">255</span>),`password` <span class="type">VARCHAR</span>(<span class="number">25</span>),birthday <span class="type">DATE</span>)</span><br><span class="line">    <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> UTF8_bin ENGINE INNODB;</span><br><span class="line"><span class="comment">-- 使用CHARACTER SET 指明字符集 否则默认使用和表一样 使用COLLATE 指明校对规则 否则使用和表一样 使用ENGINE指明存储引擎</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] 表名(</span><br><span class="line">    字段<span class="number">1</span>, 数据类型 [约束条件] [默认值], 字段<span class="number">2</span>, 数据类型 [约束条件] [默认值], 字段<span class="number">3</span>, 数据类型 [约束条件] [默认值], </span><br><span class="line">    …… </span><br><span class="line">    [表约束条件] );</span><br><span class="line">#创建表可以将另一个表的数据引用过来成为创建的新表的数据</span><br><span class="line"><span class="comment">-- 使用 AS subquery 选项，将创建表和插入数据结合起来</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp1 <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees;<span class="comment">-- 可以完全将一个表的数据作为新表的数据类似于复制了一份表--&gt;也可以在命令中追加条件引用指定的数据</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> emp2 <span class="keyword">AS</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> employees <span class="keyword">WHERE</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>; <span class="comment">-- 创建的emp2是空表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept80</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> employee_id, last_name, salary<span class="operator">*</span><span class="number">12</span> ANNSAL, hire_date</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> <span class="number">80</span>;</span><br><span class="line"><span class="comment">-- 将另一个表的指定数据引用过来成为创建的新表的数据</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> emp2 <span class="keyword">as</span> <span class="keyword">select</span> id,a,b <span class="keyword">from</span> emp1;</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 将另一个表的指定数据并可以指定限定条件筛选后引用过来成为创建的新表的数据</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> emp3 <span class="keyword">select</span> id,a,b <span class="keyword">from</span> emp2 <span class="keyword">where</span> b<span class="operator">=</span><span class="number">2000</span>;<span class="comment">-- where后可指定限制条件</span></span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line">Records: <span class="number">1</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp3;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="修改-Alter"><a href="#修改-Alter" class="headerlink" title="修改 Alter"></a>修改 Alter</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#MySQL <span class="keyword">ALTER</span>命令</span><br><span class="line">当我们需要修改数据表名或者修改数据表字段时，就需要使用到MySQL <span class="keyword">ALTER</span>命令</span><br><span class="line">#删除，添加或修改表字段</span><br><span class="line">如下命令使用了 <span class="keyword">ALTER</span> 命令及 <span class="keyword">DROP</span> 子句来删除以上创建表的 i 字段：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl  <span class="keyword">DROP</span> i;</span><br><span class="line">如果数据表中只剩余一个字段则无法使用<span class="keyword">DROP</span>来删除字段。</span><br><span class="line"></span><br><span class="line">MySQL 中使用 <span class="keyword">ADD</span> 子句来向数据表中添加列，如下实例在表 testalter_tbl 中添加 i 字段，并定义数据类型:</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> i <span class="type">INT</span>;</span><br><span class="line"></span><br><span class="line">#修改字段类型及名称</span><br><span class="line">如果需要修改字段类型及名称, 你可以在<span class="keyword">ALTER</span>命令中使用 MODIFY 或 CHANGE 子句 。</span><br><span class="line"></span><br><span class="line">例如，把字段 c 的类型从 <span class="type">CHAR</span>(<span class="number">1</span>) 改为 <span class="type">CHAR</span>(<span class="number">10</span>)，可以执行以下命令:</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl MODIFY c <span class="type">CHAR</span>(<span class="number">10</span>);</span><br><span class="line">使用 CHANGE 子句, 语法有很大的不同。 在 CHANGE 关键字之后，紧跟着的是你要修改的字段名，然后指定新字段名及类型。尝试如下实例：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl CHANGE i j <span class="type">BIGINT</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl CHANGE j j <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 对 <span class="keyword">Null</span> 值和默认值的影响</span><br><span class="line">当你修改字段时，你可以指定是否包含值或者是否设置默认值</span><br><span class="line">以下实例，指定字段 j 为 <span class="keyword">NOT</span> <span class="keyword">NULL</span> 且默认值为<span class="number">100</span> 。</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl </span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> MODIFY j <span class="type">BIGINT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">#修改字段默认值</span><br><span class="line">你可以使用 <span class="keyword">ALTER</span> 来修改字段的默认值</span><br><span class="line">你可以使用 <span class="keyword">ALTER</span> 来修改字段的默认值，尝试以下实例：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">SET</span> <span class="keyword">DEFAULT</span> <span class="number">1000</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> testalter_tbl;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> i     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="number">1000</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">你也可以使用 <span class="keyword">ALTER</span> 命令及 <span class="keyword">DROP</span>子句来删除字段的默认值，如下实例：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ALTER</span> i <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SHOW</span> COLUMNS <span class="keyword">FROM</span> testalter_tbl;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type    <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span> <span class="type">char</span>(<span class="number">1</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> i     <span class="operator">|</span> <span class="type">int</span>(<span class="number">11</span>) <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">Changing a <span class="keyword">Table</span> Type:</span><br><span class="line"></span><br><span class="line">#修改表名</span><br><span class="line">如果需要修改数据表的名称，可以在 <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 语句中使用 RENAME 子句来实现</span><br><span class="line">尝试以下实例将数据表 testalter_tbl 重命名为 alter_tbl：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl RENAME <span class="keyword">TO</span> alter_tbl;</span><br><span class="line"></span><br><span class="line">#<span class="keyword">alter</span>其他用途：</span><br><span class="line"></span><br><span class="line">#修改存储引擎：修改为myisam</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tableName engine<span class="operator">=</span>myisam;</span><br><span class="line">#删除外键约束：keyName是外键别名</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tableName <span class="keyword">drop</span> <span class="keyword">foreign</span> key keyName;</span><br><span class="line">#修改字段的相对位置：这里name1为想要修改的字段，type1为该字段原来类型，<span class="keyword">first</span>和after二选一，这应该显而易见，<span class="keyword">first</span>放在第一位，after放在name2字段后面</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> tableName modify name1 type1 <span class="keyword">first</span><span class="operator">|</span>after name2;</span><br></pre></td></tr></table></figure>



<h5 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#在MySQL中，当一张数据表 没有与其他任何数据表形成关联关系 时，可以将当前数据表直接删除。</span><br><span class="line">#数据和结构都被删除</span><br><span class="line">#所有正在运行的相关事务被提交</span><br><span class="line">#所有相关索引被删除</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">table</span> [IF <span class="keyword">EXISTS</span>] emp3;</span><br><span class="line"><span class="comment">-- DROP TABLE 语句不能回滚</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span>语句：</span><br><span class="line">#删除表中所有的数据</span><br><span class="line">#释放表的存储空间</span><br><span class="line">#举例：</span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> detail_dept;</span><br><span class="line"><span class="comment">-- TRUNCATE语句不能回滚，而使用 DELETE 语句删除数据，可以回滚</span></span><br><span class="line">#<span class="keyword">delete</span> <span class="keyword">from</span> 表名</span><br><span class="line">#删除表中所有的数据</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> emp2;</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> tables <span class="keyword">from</span> db02;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> Tables_in_db02 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> emp1           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> emp2           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee1      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee2      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> employee3      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> fm emp2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="MySQL数据类型★"><a href="#MySQL数据类型★" class="headerlink" title="MySQL数据类型★"></a>MySQL数据类型★</h4><p>列类型&#x2F;字段类型</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220827203146462.png" alt="image-20220827203146462"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220827203053920.png" alt="image-20220827203053920"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220827203808253.png" alt="image-20220827203808253"></p>
<h5 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h5><h6 id="整形"><a href="#整形" class="headerlink" title="整形"></a>整形</h6><p>tInyint[一个字节]</p>
<p>smallint[两个字节]</p>
<p>mediumint[三个字节]</p>
<p><strong>int[四个字节]</strong></p>
<p>bigint[八个字节]</p>
<h6 id="小数类型"><a href="#小数类型" class="headerlink" title="小数类型"></a>小数类型</h6><p>float（单精度）[四个字节]</p>
<p><strong>double（双精度）[八个字节]</strong></p>
<p><strong>decimal（M,D）[不确定大小]</strong></p>
<h5 id="文本类型（字符串类型）"><a href="#文本类型（字符串类型）" class="headerlink" title="文本类型（字符串类型）"></a>文本类型（字符串类型）</h5><p><strong>char(表数范围0-255)</strong></p>
<p><strong>varchar（表数范围0-65535【2^16-1】）</strong></p>
<p><strong>text(表数范围0-65535【2^16-1】)</strong></p>
<p>longtext(表数范围0-【2^32-1】)</p>
<h5 id="二进制数据类型"><a href="#二进制数据类型" class="headerlink" title="二进制数据类型"></a>二进制数据类型</h5><p>blob(表数范围0-65535【2^16-1】)</p>
<p>longblob(表数范围0-【2^32-1】)</p>
<h5 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h5><p>date(日期 年月日)</p>
<p>time（时间 时分秒）</p>
<p><strong>datetime（日期时间 年月日 时分秒 YYYY-MM-DD hh:mm:ss）</strong></p>
<p><strong>timestamp(时间戳)</strong></p>
<p>year（年）</p>
<h4 id="CRUD★"><a href="#CRUD★" class="headerlink" title="CRUD★"></a>CRUD★</h4><p><strong>Tip</strong>: sql中的<strong>null</strong>值 查找使用 is</p>
<p>SELECT * FROM SOME_TABLE<br><strong>WHERE SOME_COLUMN <code>IS</code> NULL</strong></p>
<h5 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> 语句</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> 语句用于向表中插入新记录</span><br><span class="line"></span><br><span class="line">#<span class="keyword">INSERT</span> <span class="keyword">INTO</span> 语句可以有两种编写形式。</span><br><span class="line"><span class="comment">-- 第一种形式无需指定要插入数据的列名，只需提供被插入的值即可：没有指定要插入数据的列名的形式需要列出插入行的每一列数据:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br><span class="line"><span class="comment">-- 第二种形式需要指定列名及被插入的值：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name (column1,column2,column3,...)</span><br><span class="line"><span class="keyword">VALUES</span> (value1,value2,value3,...);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 扩展</span></span><br><span class="line"><span class="comment">-- 通过 SQL，您可以从一个表复制信息到另一个表。INSERT INTO SELECT 语句从一个表复制数据，然后把数据插入到一个已存在的表中</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">SELECT</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance:</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;<span class="comment">-- 第一种形式无需指定要插入数据的列名，只需提供被插入的值即可：</span></span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> inert <span class="keyword">into</span> emp2 <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">55</span>);</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;inert into emp2 values (1,22,33,55)&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> emp2 <span class="keyword">values</span> (<span class="number">1</span>,<span class="number">22</span>,<span class="number">33</span>,<span class="number">55</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>   <span class="number">33</span> <span class="operator">|</span>   <span class="number">55</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> emp1 (id,a,b,d) <span class="keyword">values</span> (<span class="number">6</span>,<span class="number">5223</span>,<span class="number">544</span>,<span class="number">1001</span>);<span class="comment">-- 第二种形式需要指定列名及被插入的值：</span></span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">SQL</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">SELECT</span> 语句</span><br><span class="line"><span class="comment">-- 通过 SQL，您可以从一个表复制信息到另一个表。INSERT INTO SELECT 语句从一个表复制数据，然后把数据插入到一个已存在的表中</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> emp2 (id,a,b,sum) <span class="keyword">select</span> id,a,b,c <span class="keyword">from</span> emp1 <span class="keyword">where</span> id <span class="keyword">between</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">6</span>;</span><br><span class="line">Query OK, <span class="number">5</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">Records: <span class="number">5</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>   <span class="number">33</span> <span class="operator">|</span>   <span class="number">55</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp1 <span class="keyword">set</span> d<span class="operator">=</span>(id <span class="operator">*</span> <span class="number">10</span>);</span><br><span class="line">Query OK, <span class="number">6</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">6</span>  Changed: <span class="number">6</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">UPDATE</span> 语句</span><br><span class="line"><span class="keyword">UPDATE</span> 语句用于更新表中已存在的记录。</span><br><span class="line"><span class="comment">-- SQL UPDATE 语法</span></span><br><span class="line"><span class="keyword">UPDATE</span> table_name</span><br><span class="line"><span class="keyword">SET</span> column1<span class="operator">=</span>value1,column2<span class="operator">=</span>value2,...</span><br><span class="line"><span class="keyword">WHERE</span> some_column<span class="operator">=</span>some_value;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp1 <span class="keyword">set</span> d<span class="operator">=</span><span class="number">100</span> <span class="keyword">where</span> c<span class="operator">&lt;=</span><span class="number">640</span>;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">4</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp1 <span class="keyword">set</span> d<span class="operator">=</span><span class="number">1002</span> <span class="keyword">where</span> d;</span><br><span class="line">Query OK, <span class="number">5</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">5</span>  Changed: <span class="number">5</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp1 <span class="keyword">set</span> d<span class="operator">=</span><span class="number">1002</span> <span class="keyword">where</span> d <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">1</span>  Changed: <span class="number">1</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>



<h5 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">DELETE</span> 语句</span><br><span class="line"><span class="keyword">DELETE</span> 语句用于删除表中的行</span><br><span class="line"><span class="comment">-- SQL DELETE 语法</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> some_column<span class="operator">=</span>some_value;<span class="comment">-- WHERE 子句规定哪条记录或者哪些记录需要删除。如果您省略了 WHERE 子句，所有的记录都将被删除！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">50</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> emp1 <span class="keyword">where</span> d <span class="keyword">between</span> <span class="number">40</span> <span class="keyword">and</span> <span class="number">50</span>;</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">删除所有数据</span><br><span class="line">可以在不删除表的情况下，删除表中所有的行。这意味着表结构、属性、索引将保持不变：</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name;</span><br><span class="line">注释：在删除记录时要格外小心！因为您不能重来！</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>   <span class="number">22</span> <span class="operator">|</span>   <span class="number">33</span> <span class="operator">|</span>   <span class="number">55</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">delete</span> <span class="keyword">from</span> emp2;</span><br><span class="line">Query OK, <span class="number">6</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h5 id="Select★"><a href="#Select★" class="headerlink" title="Select★"></a>Select★</h5><h6 id="单表"><a href="#单表" class="headerlink" title="单表"></a>单表</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><span class="line">基本的<span class="keyword">SELECT</span>语句</span><br><span class="line">#SELECT...</span><br><span class="line">#<span class="keyword">SELECT</span> <span class="number">1</span>; #没有任何子句</span><br><span class="line">#<span class="keyword">SELECT</span> <span class="number">9</span><span class="operator">/</span><span class="number">2</span>; #没有任何子句</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="number">2000</span>;<span class="comment">-- 没有任何子句</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> database();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> database() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> db02       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">SELECT</span> ... <span class="keyword">FROM</span><span class="comment">--在select后面可以使用表达式对查询的列进行运算 同时可使用AS给列定义一个别名</span></span><br><span class="line"><span class="keyword">SELECT</span> 标识选择哪些列</span><br><span class="line"><span class="keyword">FROM</span> 标识从哪个表中选择</span><br><span class="line">#<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表名 返回指定表的所有列</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">SELECT</span> department_id, location_id,(列名),(列明) <span class="keyword">FROM</span> departments（表名）<span class="keyword">where</span> （条件）;<span class="comment">-- 返回指定表中满足where后条件的的指定列</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,a,b <span class="keyword">from</span> emp1 <span class="keyword">where</span> c<span class="operator">=</span><span class="number">3000</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">select</span> id,(a <span class="operator">+</span> b)<span class="comment">--可以进行运算 from emp2;-- 返回指定表中指定列且指定列之间运算的列-- 在select后面可以使用表达式对查询的列进行运算</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(a <span class="operator">+</span> b) <span class="keyword">from</span> emp2;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(a <span class="operator">+</span> b) <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> (a <span class="operator">+</span> b) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>     <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>    <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">select</span> id,(a <span class="operator">+</span> b)可以进行运算 <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span> 通过<span class="keyword">AS</span>给运算后的列定义一个<span class="string">&#x27;别名&#x27;</span> <span class="keyword">from</span> emp1;<span class="comment">-- 返回指定表中指定列且指定列之间运算的定义别名后的列</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(a <span class="operator">+</span> b) <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用WHERE 子句，将不满足条件的行过滤掉</span></span><br><span class="line"><span class="comment">-- WHERE子句紧随 FROM子句</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段<span class="number">1</span>,字段<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名</span><br><span class="line"><span class="keyword">WHERE</span> 过滤条件</span><br><span class="line"><span class="comment">-- For instance:</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">where</span> c<span class="operator">&gt;=</span><span class="number">640</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#列的别名</span><br><span class="line"><span class="comment">-- 重命名一个列</span></span><br><span class="line"><span class="comment">-- 便于计算</span></span><br><span class="line"><span class="comment">-- 紧跟列名，也可以在列名和别名之间加入关键字AS，别名使用双引号，以便在别名中包含空格或特</span></span><br><span class="line"><span class="comment">-- 殊的字符并区分大小写。</span></span><br><span class="line"><span class="comment">-- AS 可以省略</span></span><br><span class="line"><span class="comment">-- 建议别名简短，见名知意</span></span><br><span class="line"><span class="comment">-- 举例</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name <span class="keyword">AS</span> name, commission_pct comm</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(a <span class="operator">+</span> b) <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> last_name &quot;Name&quot;, salary<span class="operator">*</span><span class="number">12</span> &quot;Annual Salary&quot;</span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(a <span class="operator">+</span> b) <span class="keyword">as</span> &quot;SumNumber&quot; <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> SumNumber <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>       <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>      <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- 默认情况下，查询会返回全部行，包括重复行。</span></span><br><span class="line"></span><br><span class="line">#去除重复行</span><br><span class="line">#在<span class="keyword">SELECT</span>语句中使用关键字<span class="keyword">DISTINCT</span>去除重复行</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> department_id<span class="comment">-- 此处的列表示要以哪些列以及几个列为条件判断是否为重复</span></span><br><span class="line"><span class="keyword">FROM</span> employees;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">distinct</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">distinct</span> a <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> a    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">distinct</span> id,a,b,c form emp1;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;emp1&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">distinct</span> id,a,b,c <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">distinct</span> c <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span> c    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#空值参与运算</span><br><span class="line"><span class="comment">-- 注意，在 MySQL 里面， 空值不等于空字符串。一个空字符串的长度是 0，而一个空值的长度是空。而且，在 MySQL 里面，空值是占用空间的</span></span><br><span class="line">#所有运算符或列值遇到<span class="keyword">null</span>值，运算的结果都为<span class="keyword">null</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> emp1 <span class="keyword">add</span> (d <span class="type">int</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,(c <span class="operator">+</span> d) <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span> <span class="keyword">from</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> sum  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#着重号 ``</span><br><span class="line"><span class="comment">-- 我们需要保证表中的字段、表名等没有和保留字、数据库系统或常用方法冲突。如果真的相同，请在SQL语句中使用一对``（着重号）引起来</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student5(</span><br><span class="line">    id TINYINT,`name` <span class="type">VARCHAR</span>(<span class="number">255</span>),`password` <span class="type">VARCHAR</span>(<span class="number">25</span>),birthday DATA)</span><br><span class="line">    <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_bin ENGINE INNODB</span><br><span class="line"></span><br><span class="line"># 显示表结构</span><br><span class="line"><span class="comment">-- 使用DESCRIBE 或 DESC 命令，表示表结构</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> a     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> b     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> c     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span> VIRTUAL GENERATED <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> d     <span class="operator">|</span> <span class="type">int</span>  <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>                   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+------+------+-----+---------+-------------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line">#其中，各个字段的含义分别解释如下：</span><br><span class="line"><span class="comment">-- Field：表示字段名称。</span></span><br><span class="line"><span class="comment">-- Type：表示字段类型，这里 barcode、goodsname 是文本型的，price 是整数类型的。</span></span><br><span class="line"><span class="comment">-- Null：表示该列是否可以存储NULL值。</span></span><br><span class="line"><span class="comment">-- Key：表示该列是否已编制索引。PRI表示该列是表主键的一部分；UNI表示该列是UNIQUE索引的一部分；MUL表示在列中某个给定值允许出现多次。</span></span><br><span class="line"><span class="comment">-- Default：表示该列是否有默认值，如果有，那么值是多少。</span></span><br><span class="line"><span class="comment">-- Extra：表示可以获取的与给定列有关的附加信息，例如AUTO_INCREMENT等。</span></span><br><span class="line"></span><br><span class="line"># 显示表的创建信息</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">from</span> emp1;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;from emp1&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> db01;</span><br><span class="line">ERROR <span class="number">1064</span> (<span class="number">42000</span>): You have an error <span class="keyword">in</span> your <span class="keyword">SQL</span> syntax; <span class="keyword">check</span> the manual that corresponds <span class="keyword">to</span> your MySQL server version <span class="keyword">for</span> the <span class="keyword">right</span> syntax <span class="keyword">to</span> use near <span class="string">&#x27;db01&#x27;</span> <span class="keyword">at</span> line <span class="number">1</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span> <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> emp1  <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `emp1` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `a` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `b` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">  `c` <span class="type">int</span> GENERATED ALWAYS <span class="keyword">AS</span> ((`a` <span class="operator">+</span> `b`)) VIRTUAL,</span><br><span class="line">  `d` <span class="type">int</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h6 id="Select语句的where子句"><a href="#Select语句的where子句" class="headerlink" title="Select语句的where子句"></a><strong>Select语句的where子句</strong></h6><p><strong>where</strong>可以指明约束条件– WHERE 子句用于过滤记录。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">WHERE</span> 语法</span><br><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name operator <span class="keyword">value</span>;<span class="comment">-- 指明约束条件-- WHERE 子句用于过滤记录。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>where</strong>子句中的运算符</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220901125539476.png" alt="image-20220901125539476"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220901130357689.png" alt="image-20220901130357689"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Where</span> <span class="operator">+</span>条件（筛选行）</span><br><span class="line">条件：列，比较运算符，值</span><br><span class="line"></span><br><span class="line">比较运算符包涵：<span class="operator">=</span> <span class="operator">&gt;</span> <span class="operator">&lt;</span> <span class="operator">&gt;=</span> ,<span class="operator">&lt;=</span>, <span class="operator">!=</span>,<span class="operator">&lt;&gt;</span> 表示（不等于）</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename<span class="operator">=</span><span class="string">&#x27;SMITH&#x27;</span>;</span><br><span class="line">例子中的 SMITH 用单引号引起来，表示是字符串，字符串要区分大小写。</span><br><span class="line"></span><br><span class="line">逻辑运算</span><br><span class="line"><span class="keyword">And</span>:与 同时满足两个条件的值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">2000</span> <span class="keyword">and</span> sal <span class="operator">&lt;</span> <span class="number">3000</span>;</span><br><span class="line">查询 EMP 表中 SAL 列中大于 <span class="number">2000</span> 小于 <span class="number">3000</span> 的值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">Or</span>:或 满足其中一个条件的值</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">2000</span> <span class="keyword">or</span> comm <span class="operator">&gt;</span> <span class="number">500</span>;</span><br><span class="line">查询 emp 表中 SAL 大于 <span class="number">2000</span> 或 COMM 大于<span class="number">500</span>的值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">Not</span>:非 满足不包含该条件的值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">not</span> sal <span class="operator">&gt;</span> <span class="number">1500</span>;</span><br><span class="line">查询EMP表中 sal 小于等于 <span class="number">1500</span> 的值。</span><br><span class="line"></span><br><span class="line">逻辑运算的优先级：</span><br><span class="line"></span><br><span class="line">()  <span class="operator">&gt;</span>  <span class="keyword">not</span>    <span class="operator">&gt;</span>    <span class="keyword">and</span>    <span class="operator">&gt;</span>     <span class="keyword">or</span></span><br><span class="line">特殊条件</span><br><span class="line"><span class="number">1.</span>空值判断：判断是否为空 <span class="keyword">is</span> <span class="keyword">null</span> ☆<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>☆</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line">查询 emp 表中 comm 列中的空值。</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span><span class="keyword">between</span> <span class="keyword">and</span> (在 之间的值)<span class="comment">-- 是闭区间</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">between</span> <span class="number">1500</span> <span class="keyword">and</span> <span class="number">3000</span>;</span><br><span class="line">查询 emp 表中 SAL 列中大于 <span class="number">1500</span> 的小于 <span class="number">3000</span> 的值。</span><br><span class="line"></span><br><span class="line">注意：大于等于 <span class="number">1500</span> 且小于等于 <span class="number">3000</span>， <span class="number">1500</span> 为下限，<span class="number">3000</span> 为上限，下限在前，上限在后，查询的范围包涵有上下限的值。</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span><span class="keyword">In</span><span class="comment">-- 在（条件,条件，条件）里面的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="keyword">in</span> (<span class="number">5000</span>,<span class="number">3000</span>,<span class="number">1500</span>);</span><br><span class="line">查询 EMP 表 SAL 列中等于 <span class="number">5000</span>，<span class="number">3000</span>，<span class="number">1500</span> 的值。</span><br><span class="line"></span><br><span class="line"><span class="number">4.</span><span class="keyword">like</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">Like</span>模糊查询</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;M%&#x27;</span>;</span><br><span class="line">查询 EMP 表中 Ename 列中有 M 的值，M 为要查询内容中的模糊信息。</span><br><span class="line"></span><br><span class="line"> <span class="operator">%</span> 表示多个字值，_ 下划线表示一个字符；</span><br><span class="line"> M<span class="operator">%</span> : 为能配符，正则表达式，表示的意思为模糊查询信息为 M 开头的。</span><br><span class="line"> <span class="operator">%</span>M<span class="operator">%</span> : 表示查询包含M的所有内容。</span><br><span class="line"> <span class="operator">%</span>M_ : 表示查询以M在倒数第二位的所有内容。</span><br><span class="line"> </span><br><span class="line">#不带比较运算符的 <span class="keyword">WHERE</span> 子句：</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> 子句并不一定带比较运算符，当不带运算符时，会执行一个隐式转换。当 <span class="number">0</span> 时转化为 <span class="literal">false</span>，<span class="number">1</span> 转化为 <span class="literal">true</span>。例如：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> studentNO <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="number">0</span></span><br><span class="line">则会返回一个空集，因为每一行记录 <span class="keyword">WHERE</span> 都返回 <span class="literal">false</span>。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span>  studentNO  <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> <span class="number">1</span></span><br><span class="line">返回 student 表所有行中 studentNO 列的值。因为每一行记录 <span class="keyword">WHERE</span> 都返回 <span class="literal">true</span>。</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">where</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">Empty</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">where</span> <span class="number">1</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<h6 id="Select语句的order-by子句"><a href="#Select语句的order-by子句" class="headerlink" title="Select语句的order by子句"></a><strong>Select</strong>语句的<strong>order by</strong>子句</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> 关键字</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 关键字用于对结果集按照一个列或者多个列进行排序。可以使用列的别名进行排序</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 关键字默认按照升序(ascend)对记录进行排序。如果需要按照降序对记录进行排序，您可以使用 <span class="keyword">DESC</span> （descend）降序关键字</span><br><span class="line"></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 多列的时候，先按照第一个<span class="keyword">column</span> name排序，在按照第二个<span class="keyword">column</span> name排序；如上述教程最后一个例子：</span><br><span class="line"></span><br><span class="line"> <span class="number">1</span>）、先将country值这一列排序，同为CN的排前面，同属USA的排后面；</span><br><span class="line"> <span class="number">2</span>）、然后在同属CN的这些多行数据中，再根据alexa值的大小排列。</span><br><span class="line"> <span class="number">3</span>）、<span class="keyword">ORDER</span> <span class="keyword">BY</span> 排列时，不写明<span class="keyword">ASC</span> <span class="keyword">DESC</span>的时候，默认是<span class="keyword">ASC</span></span><br><span class="line"> </span><br><span class="line"> <span class="keyword">ORDER</span> <span class="keyword">BY</span> 多列的时候，eg:</span><br><span class="line"></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> A,B        这个时候都是默认按升序排列</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> A <span class="keyword">desc</span>,B   这个时候 A 降序，B 升序排列</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> A ,B <span class="keyword">desc</span>  这个时候 A 升序，B 降序排列</span><br><span class="line">即 <span class="keyword">desc</span> 或者 <span class="keyword">asc</span> 只对它紧跟着的第一个列名有效，其他不受影响，仍然是默认的升序</span><br><span class="line"> </span><br><span class="line"><span class="comment">-- SQL ORDER BY 语法</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name,column_name</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> column_name,column_name <span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>;<span class="comment">-- 默认使用ASC升序进行排序 可以指定排序方式</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance-- 单列</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> d;<span class="comment">-- 默认使用ASC升序进行排序</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> c <span class="keyword">desc</span>;<span class="comment">-- 默认使用ASC升序进行排序 可以指定排序方式</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> c <span class="keyword">DESC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance-- 多列</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> c,d <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> c <span class="keyword">desc</span>,d <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#可以使用别名进行排序</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,a,b,(a <span class="operator">+</span> b) <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span>,c,d <span class="keyword">from</span> emp1 <span class="keyword">order</span> <span class="keyword">by</span> sum <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> sum  <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">40</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>  <span class="number">100</span> <span class="operator">|</span>  <span class="number">200</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>  <span class="number">300</span> <span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#综合<span class="keyword">where</span> <span class="operator">&amp;</span> <span class="keyword">AS</span> <span class="operator">&amp;</span> 双列 <span class="operator">&amp;</span> 列运算 条件使用<span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> id,a,b,(a <span class="operator">+</span> b) <span class="keyword">as</span> <span class="string">&#x27;sum&#x27;</span>,c,d <span class="keyword">from</span> emp1 <span class="keyword">where</span> id <span class="keyword">between</span> <span class="number">2</span> <span class="keyword">and</span> <span class="number">6</span> <span class="keyword">order</span> <span class="keyword">by</span> sum <span class="keyword">desc</span>,d <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> a    <span class="operator">|</span> b    <span class="operator">|</span> sum  <span class="operator">|</span> c    <span class="operator">|</span> d    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span> <span class="number">5223</span> <span class="operator">|</span>  <span class="number">544</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span> <span class="number">5767</span> <span class="operator">|</span>   <span class="number">60</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> <span class="number">1000</span> <span class="operator">|</span> <span class="number">2000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span> <span class="number">3000</span> <span class="operator">|</span>   <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>  <span class="number">120</span> <span class="operator">|</span>  <span class="number">520</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>  <span class="number">640</span> <span class="operator">|</span>   <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------+------+------+------+------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h6 id="单表查询加强"><a href="#单表查询加强" class="headerlink" title="单表查询加强"></a>单表查询加强</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- select语句顺序 group by - having - order by - limit</span></span><br><span class="line"><span class="keyword">select</span> <span class="string">&#x27;列名&#x27;</span>,<span class="string">&#x27;列名&#x27;</span>... <span class="keyword">from</span> <span class="string">&#x27;表名&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> `列`</span><br><span class="line"><span class="keyword">having</span> `<span class="keyword">condition</span>`</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> `列`</span><br><span class="line">limit `<span class="keyword">start</span>`,`<span class="keyword">rows</span>`;</span><br><span class="line"><span class="comment">-- For instance 统计各个部门的平均工资仅保留2位小数，并且&gt;1000,平均工资按照降序排序，并取出前两行;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> format(<span class="built_in">avg</span>(sal),<span class="number">2</span>),deptno <span class="keyword">from</span> emp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">group</span> <span class="keyword">by</span> deptno</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">having</span> <span class="built_in">avg</span>(sal)<span class="operator">&gt;</span><span class="number">1000</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(sal) <span class="keyword">desc</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> limit <span class="number">0</span>,<span class="number">2</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> format(<span class="built_in">avg</span>(sal),<span class="number">2</span>) <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>,<span class="number">916.67</span>           <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>,<span class="number">443.75</span>           <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#结合<span class="keyword">where</span>子句对<span class="type">date</span>进行条件筛选</span><br><span class="line"><span class="comment">-- 查询1991-01-01后入职的员工</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate<span class="operator">&gt;</span><span class="string">&#x27;1992-01-01&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> hiredate   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">Like</span>模糊查询</span><br><span class="line"></span><br><span class="line"><span class="keyword">Select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;M%&#x27;</span>;</span><br><span class="line">查询 EMP 表中 Ename 列中有 M 的值，M 为要查询内容中的模糊信息。</span><br><span class="line"></span><br><span class="line"> <span class="operator">%</span> 表示多个字值，_ 下划线表示一个字符；</span><br><span class="line"> M<span class="operator">%</span> : 为能配符，正则表达式，表示的意思为模糊查询信息为 M 开头的。</span><br><span class="line"> <span class="operator">%</span>M<span class="operator">%</span> : 表示查询包含M的所有内容。</span><br><span class="line"> <span class="operator">%</span>M_ : 表示查询以M在倒数第二位的所有内容。</span><br><span class="line"> </span><br><span class="line"> <span class="comment">-- For instance 显示姓名首字母为S的员工及其工资</span></span><br><span class="line"> mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;S%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="operator">|</span> SMITH <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- For instance 显示姓名第三个字母为O的员工及其工资</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename, sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;__O%&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="operator">|</span> SCOTT <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">is</span> <span class="keyword">null</span> 判断是否为<span class="keyword">null</span>值</span><br><span class="line"><span class="comment">-- For instance 显示没有上级的员工信息（上级编号mgr为null的）</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING  <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">order</span> <span class="keyword">by</span> 排序<span class="comment">-- 默认升序（不指明desc即为asc）</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">asc</span>;<span class="comment">-- 默认升序（不指明desc即为asc）</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;<span class="comment">-- 默认升序（不指明desc即为asc）</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 先按照部门编号升序然后按照工资降序排序显示员工信息</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> deptno <span class="keyword">asc</span> , sal <span class="keyword">desc</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#分页查询</span><br><span class="line"><span class="comment">-- 基本语法select...limit start，rows 从start + 1行开始 取出rows行 start从0开始计算</span></span><br><span class="line"><span class="comment">-- limit 每页显要显示的行数 *（第几页 - 1），每页显要显示的行数</span></span><br><span class="line"><span class="comment">-- 第1页</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">0</span>,<span class="number">5</span>;<span class="comment">-- limit 每页显要显示的行数 *（第几页 - 1），每页显要显示的行数</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING  <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+-----------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 第二页</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">5</span>,<span class="number">5</span>;<span class="comment">-- limit 每页显要显示的行数 *（第几页 - 1），每页显要显示的行数</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job      <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm   <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager  <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span> <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk    <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>   <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+--------+--------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 第三页</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span> limit <span class="number">10</span>,<span class="number">5</span>;<span class="comment">-- limit 每页显要显示的行数 *（第几页 - 1），每页显要显示的行数</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job      <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk    <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk    <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#分组函数<span class="operator">&amp;</span>分组子句<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line"><span class="comment">-- For instance 显示每种岗位的雇员总数和平均工资</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">avg</span>(sal)    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">1016.666667</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span> <span class="number">1400.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span> <span class="number">2758.333333</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2</span> <span class="operator">|</span> <span class="number">3000.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span> <span class="number">5000.000000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- For instance 获取雇员总数以及获得了补助（comm不为null的）的雇员数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">count</span>(comm) <span class="keyword">from</span> emp;<span class="comment">-- count（*）与count（列）的区别是count（列）会过滤列中的null值 而count（*）返回总列数</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">count</span>(comm) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">13</span> <span class="operator">|</span>           <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- For instance 获取雇员总数以及没有补助（comm为null的）的雇员数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">count</span>(if(comm <span class="keyword">is</span> <span class="keyword">null</span>,<span class="number">1</span>,<span class="keyword">null</span>)) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">count</span>(if(comm <span class="keyword">is</span> <span class="keyword">null</span>,<span class="number">1</span>,<span class="keyword">null</span>)) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">13</span> <span class="operator">|</span>                             <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------------------------------+</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> if(comm <span class="keyword">is</span> <span class="keyword">null</span>,<span class="number">1</span>,<span class="keyword">null</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 其中 if(comm is null,1,null)</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> if(comm <span class="keyword">is</span> <span class="keyword">null</span>,<span class="number">1</span>,<span class="keyword">null</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                    <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- else method</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">-</span> <span class="built_in">count</span>(comm) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">-</span> <span class="built_in">count</span>(comm) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">13</span> <span class="operator">|</span>                     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance 显示员工中manager的总数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(job) <span class="keyword">as</span> <span class="string">&#x27;manager_count&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;manager&#x27;</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> manager_count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span>             <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance 显示员工的工资最大差额</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="operator">-</span> <span class="built_in">min</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;最大工资差额&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> 最大工资差额       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">4200.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h6 id="多表"><a href="#多表" class="headerlink" title="多表"></a>多表</h6><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#多表查询即基于两个或两个以上的表查询</span><br><span class="line">#笛卡尔集</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> dept,emp,salgrade;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">260</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line">count（<span class="operator">*</span>）的结果为每个表的行数相X（乘）count（<span class="operator">*</span>）<span class="operator">=</span>dept.rows x emp.rows x salgrade 笛卡尔集</span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="comment">-- 避免出现笛卡尔集 Tip：多表查询的条件不能少于 表的个数 - 1；</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,sal,emp.deptno <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.deptno<span class="operator">=</span>dept.deptno;<span class="comment">-- 可以给两个表限制条件进行查询（思考过滤条件）</span></span><br><span class="line"><span class="comment">-- 如果多表中出现同名列 则需要使用 表名.列名 的形式指明列 否则系统无法识别会报错</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING   <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance 查询显示员工的姓名 工资 以及 工资等级</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,sal,grade <span class="keyword">from</span> emp,salgrade <span class="keyword">where</span> emp.sal <span class="keyword">between</span> salgrade.losal <span class="keyword">and</span> salgrade.hisal</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> sal     <span class="operator">|</span> grade <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>     <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING   <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>     <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>     <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+-------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#子查询<span class="comment">-- 嵌套查询</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 查询和smith同一个部门的所有员工  先查出smith所在部门 然后查此部门的所有员工</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> (<span class="keyword">select</span> deptno <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename <span class="operator">|</span> job     <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH <span class="operator">|</span> clerk   <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES <span class="operator">|</span> manager <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT <span class="operator">|</span> analyst <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD  <span class="operator">|</span> analyst <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------+---------+------+------------+---------+------+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="多行子查询"><a href="#多行子查询" class="headerlink" title="多行子查询"></a>多行子查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#多行子查询 嵌套查询 子查询返回的是多行的情况<span class="comment">-- Tip:where后的条件返回的是多行时 要使用关键字 IN </span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 查询和20号部门的工作相同的雇员的 姓名 岗位 工资 部门号 但是不包含20号部门中的雇员</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,job,sal,deptno <span class="keyword">from</span> emp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> job <span class="keyword">IN</span> (<span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">20</span>) <span class="keyword">AND</span> deptno <span class="operator">&lt;&gt;</span> <span class="number">20</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> job     <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> manager <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> manager <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span> clerk   <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> clerk   <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+---------+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="临时表"><a href="#临时表" class="headerlink" title="临时表"></a>临时表</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">#子查询当作临时表来使用</span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 查询ecshop中各个类别中 价格最高的goods-- 可以将子查询作为一张临时表来使用</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> goods_id,cat_id,goods_name,shop_price <span class="keyword">from</span> ecs_goods;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span> goods_id <span class="operator">|</span> cat_id <span class="operator">|</span> goods_name                             <span class="operator">|</span> shop_price <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">1</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> KD876                                  <span class="operator">|</span>    <span class="number">1388.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">4</span> <span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> 诺基亚N85原装充电器                    <span class="operator">|</span>      <span class="number">58.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">3</span> <span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> 诺基亚原装<span class="number">5800</span>耳机                     <span class="operator">|</span>      <span class="number">68.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> 索爱原装M2卡读卡器                     <span class="operator">|</span>      <span class="number">20.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">6</span> <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> 胜创KINGMAX内存卡                      <span class="operator">|</span>      <span class="number">42.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">7</span> <span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> 诺基亚N85原装立体声耳机HS<span class="number">-82</span>           <span class="operator">|</span>     <span class="number">100.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">8</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 飞利浦<span class="number">9</span><span class="variable">@9v</span>                             <span class="operator">|</span>     <span class="number">399.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">9</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 诺基亚E66                              <span class="operator">|</span>    <span class="number">2298.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">10</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 索爱C702c                              <span class="operator">|</span>    <span class="number">1328.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">11</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 索爱C702c                              <span class="operator">|</span>    <span class="number">1300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">12</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 摩托罗拉A810                           <span class="operator">|</span>     <span class="number">983.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">13</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 诺基亚<span class="number">5320</span> XpressMusic                 <span class="operator">|</span>    <span class="number">1311.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">14</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> 诺基亚<span class="number">5800</span>XM                           <span class="operator">|</span>    <span class="number">2625.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">15</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 摩托罗拉A810                           <span class="operator">|</span>     <span class="number">788.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">16</span> <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> 恒基伟业G101                           <span class="operator">|</span>     <span class="number">823.33</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">17</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 夏新N7                                 <span class="operator">|</span>    <span class="number">2300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">18</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> 夏新T5                                 <span class="operator">|</span>    <span class="number">2878.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">19</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 三星SGH<span class="operator">-</span>F258                           <span class="operator">|</span>     <span class="number">858.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">20</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 三星BC01                               <span class="operator">|</span>     <span class="number">280.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">21</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 金立 A30                               <span class="operator">|</span>    <span class="number">2000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">22</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 多普达Touch HD                         <span class="operator">|</span>    <span class="number">5999.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">23</span> <span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> 诺基亚N96                              <span class="operator">|</span>    <span class="number">3700.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">24</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> P806                                   <span class="operator">|</span>    <span class="number">2000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">25</span> <span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> 小灵通<span class="operator">/</span>固话<span class="number">50</span>元充值卡                  <span class="operator">|</span>      <span class="number">48.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">26</span> <span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> 小灵通<span class="operator">/</span>固话<span class="number">20</span>元充值卡                  <span class="operator">|</span>      <span class="number">19.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">27</span> <span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> 联通<span class="number">100</span>元充值卡                        <span class="operator">|</span>      <span class="number">95.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">28</span> <span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> 联通<span class="number">50</span>元充值卡                         <span class="operator">|</span>      <span class="number">45.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">29</span> <span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> 移动<span class="number">100</span>元充值卡                        <span class="operator">|</span>      <span class="number">90.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">30</span> <span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> 移动<span class="number">20</span>元充值卡                         <span class="operator">|</span>      <span class="number">18.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">31</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 摩托罗拉E8                             <span class="operator">|</span>    <span class="number">1337.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">32</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 诺基亚N85                              <span class="operator">|</span>    <span class="number">3010.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="number">31</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> goods_id,ecs_goods.cat_id,goods_name,shop_price</span><br><span class="line"><span class="comment">-- 此处from后的表可以使用select出的子查询作为临时表 并给临时表另名</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> (<span class="keyword">select</span> cat_id,<span class="built_in">MAX</span>(shop_price) <span class="keyword">as</span> <span class="string">&#x27;max_shop_price&#x27;</span> <span class="keyword">from</span> ecs_goods <span class="keyword">GROUP</span> <span class="keyword">BY</span> cat_id) temp,ecs_goods</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> temp.cat_id<span class="operator">=</span>ecs_goods.cat_id <span class="keyword">and</span> max_shop_price <span class="operator">=</span> shop_price</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span> goods_id <span class="operator">|</span> cat_id <span class="operator">|</span> goods_name                             <span class="operator">|</span> shop_price <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">16</span> <span class="operator">|</span>      <span class="number">2</span> <span class="operator">|</span> 恒基伟业G101                           <span class="operator">|</span>     <span class="number">823.33</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">22</span> <span class="operator">|</span>      <span class="number">3</span> <span class="operator">|</span> 多普达Touch HD                         <span class="operator">|</span>    <span class="number">5999.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">18</span> <span class="operator">|</span>      <span class="number">4</span> <span class="operator">|</span> 夏新T5                                 <span class="operator">|</span>    <span class="number">2878.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">23</span> <span class="operator">|</span>      <span class="number">5</span> <span class="operator">|</span> 诺基亚N96                              <span class="operator">|</span>    <span class="number">3700.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">7</span> <span class="operator">|</span>      <span class="number">8</span> <span class="operator">|</span> 诺基亚N85原装立体声耳机HS<span class="number">-82</span>           <span class="operator">|</span>     <span class="number">100.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">6</span> <span class="operator">|</span>     <span class="number">11</span> <span class="operator">|</span> 胜创KINGMAX内存卡                      <span class="operator">|</span>      <span class="number">42.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">25</span> <span class="operator">|</span>     <span class="number">13</span> <span class="operator">|</span> 小灵通<span class="operator">/</span>固话<span class="number">50</span>元充值卡                  <span class="operator">|</span>      <span class="number">48.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">29</span> <span class="operator">|</span>     <span class="number">14</span> <span class="operator">|</span> 移动<span class="number">100</span>元充值卡                        <span class="operator">|</span>      <span class="number">90.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">27</span> <span class="operator">|</span>     <span class="number">15</span> <span class="operator">|</span> 联通<span class="number">100</span>元充值卡                        <span class="operator">|</span>      <span class="number">95.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+--------+----------------------------------------+------------+</span></span><br><span class="line"><span class="number">9</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="all-amp-any的使用"><a href="#all-amp-any的使用" class="headerlink" title="all&amp;any的使用"></a>all&amp;any的使用</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">all</span><span class="operator">&amp;</span><span class="keyword">any</span>的使用</span><br><span class="line"><span class="comment">-- all 表示所有</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 显示工资比部门30的所有员工都要高的员工的姓名，工资和部门号-- 相当于比最高还要高</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="keyword">ALL</span>(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno<span class="operator">=</span><span class="number">30</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> JONES <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING  <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- any 表示任何一个</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 显示工资比部分30中的其中任意一个员工工资高的员工的姓名，工资和部门号-- 相当于只要比最低的到</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,sal,deptno <span class="keyword">from</span> emp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="keyword">any</span>(<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING   <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------+--------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>

<h5 id="多列子查询"><a href="#多列子查询" class="headerlink" title="多列子查询"></a>多列子查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">#多列子查询</span><br><span class="line"><span class="comment">-- 子查询结果为多列的 --（列名，列名）= （子查询）</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 查询和ALLEN的部门和岗位完全相同的所有雇员（并不包含ALLEN本人）</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> (deptno,job) <span class="operator">=</span> (<span class="keyword">select</span> deptno,job <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;ALLEN&#x27;</span>) <span class="keyword">AND</span> ename <span class="operator">&lt;&gt;</span> <span class="string">&#x27;ALLEN&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job      <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 查询和宋江 数学，英语，语文成绩完全相同的同学</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> (chinese,english,math) <span class="operator">=</span> (<span class="keyword">select</span> chinese,english,math <span class="keyword">from</span> student <span class="keyword">where</span> name <span class="operator">=</span> <span class="string">&#x27;宋江&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+---------+------+</span></span><br><span class="line"><span class="operator">|</span> id <span class="operator">|</span> name   <span class="operator">|</span> chinese <span class="operator">|</span> english <span class="operator">|</span> math <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+---------+------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">3</span> <span class="operator">|</span> 宋江   <span class="operator">|</span>      <span class="number">87</span> <span class="operator">|</span>      <span class="number">78</span> <span class="operator">|</span>   <span class="number">77</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----+--------+---------+---------+------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- -- 查询每个部门工资高于本部门平均工资水平的人的数据</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 首先列出每个部门的平均工资</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;平均工资&#x27;</span>,deptno <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line"><span class="comment">-- 将每个部门的平均工资和部门的多列结果作为子查询并命为临时表</span></span><br><span class="line"><span class="keyword">select</span> ename,emp.sal,emp.deptno,temp.`平均工资`</span><br><span class="line"><span class="keyword">from</span> emp,(<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;平均工资&#x27;</span>,deptno <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno) temp </span><br><span class="line"><span class="keyword">where</span> emp.deptno <span class="operator">=</span> temp.deptno <span class="keyword">and</span> emp.sal <span class="operator">&gt;</span> temp.`平均工资`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> emp.deptno <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,emp.sal,emp.deptno,temp.`平均工资`</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> emp,(<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;平均工资&#x27;</span>,deptno <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno) temp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> emp.deptno <span class="operator">=</span> temp.deptno <span class="keyword">and</span> emp.sal <span class="operator">&gt;</span> temp.`平均工资`</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> emp.deptno <span class="keyword">DESC</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> ename <span class="operator">|</span> sal     <span class="operator">|</span> deptno <span class="operator">|</span> 平均工资     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+--------------+</span></span><br><span class="line"><span class="operator">|</span> BLAKE <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span>  <span class="number">1566.666667</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span>  <span class="number">1566.666667</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD  <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span>  <span class="number">2443.750000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span>  <span class="number">2443.750000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span>  <span class="number">2443.750000</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING  <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span>  <span class="number">2916.666667</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+--------+--------------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 显示每个部门的信息包括（部门名，编号，地址） 和人员的数量</span></span><br><span class="line"><span class="comment">-- 首先先显示部门的信息（部门名，编号，地址）</span></span><br><span class="line"><span class="keyword">select</span> dept.deptno,dept.dname,dept.loc <span class="keyword">from</span> dept;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> dept.deptno,dept.dname,dept.loc <span class="keyword">from</span> dept;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="operator">|</span> deptno <span class="operator">|</span> dname      <span class="operator">|</span> loc      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> ACCOUNTING <span class="operator">|</span> <span class="keyword">NEW</span> YORK <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span> RESEARCH   <span class="operator">|</span> DALLAS   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span> SALES      <span class="operator">|</span> CHICAGO  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">40</span> <span class="operator">|</span> OPERATIONS <span class="operator">|</span> BOSTON   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> dept.<span class="operator">*</span> <span class="keyword">from</span> dept;<span class="comment">-- select 列名.* from dept;表名将此表中的所有列的显示出来</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="operator">|</span> deptno <span class="operator">|</span> dname      <span class="operator">|</span> loc      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> ACCOUNTING <span class="operator">|</span> <span class="keyword">NEW</span> YORK <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span> RESEARCH   <span class="operator">|</span> DALLAS   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span> SALES      <span class="operator">|</span> CHICAGO  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">40</span> <span class="operator">|</span> OPERATIONS <span class="operator">|</span> BOSTON   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">select</span> dept.deptno,dept.dname,dept.loc,temp.`部门的人员数量`</span><br><span class="line"><span class="keyword">from</span> dept,(<span class="keyword">select</span> emp.deptno,<span class="built_in">count</span>(emp.deptno) <span class="keyword">as</span> <span class="string">&#x27;部门的人员数量&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> emp.deptno) temp</span><br><span class="line"><span class="keyword">where</span> temp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> dept.deptno,dept.dname,dept.loc,temp.`部门的人员数量`</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> dept,(<span class="keyword">select</span> emp.deptno,<span class="built_in">count</span>(emp.deptno) <span class="keyword">as</span> <span class="string">&#x27;部门的人员数量&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> emp.deptno) temp</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">where</span> temp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span> deptno <span class="operator">|</span> dname      <span class="operator">|</span> loc      <span class="operator">|</span> 部门的人员数量        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+-----------------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span> ACCOUNTING <span class="operator">|</span> <span class="keyword">NEW</span> YORK <span class="operator">|</span>                     <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span> RESEARCH   <span class="operator">|</span> DALLAS   <span class="operator">|</span>                     <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span> SALES      <span class="operator">|</span> CHICAGO  <span class="operator">|</span>                     <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+------------+----------+-----------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="表复制"><a href="#表复制" class="headerlink" title="表复制"></a>表复制</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">#表复制<span class="comment">-- 自我复制（蠕虫复制）</span></span><br><span class="line"><span class="comment">-- 创建一个和student表相同结构的my_student表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> my_student1 <span class="keyword">like</span> my_student;<span class="comment">-- 可以使用create table 新表 like 需要引用结构的表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> my_student (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">  `name` <span class="type">varchar</span>(<span class="number">20</span>) <span class="keyword">COLLATE</span> utf8mb3_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">  `chinese` <span class="type">float</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `english` <span class="type">float</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `math` <span class="type">float</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span></span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb3_bin</span><br><span class="line"><span class="comment">-- 将student表insert into进my_student表</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> my_student <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student;</span><br><span class="line"><span class="comment">-- my_student表进行多次的自我复制（蠕虫复制）</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> my_student <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> my_student;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> my_student;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> my_student;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">224</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="表去重"><a href="#表去重" class="headerlink" title="表去重"></a>表去重</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">#表去重</span><br><span class="line"><span class="comment">-- 思路 </span></span><br><span class="line"><span class="comment">-- ①创建一个临时表的结构与想要去重的表的结构一致 </span></span><br><span class="line"><span class="comment">-- ②对临时表进行distinct去重 </span></span><br><span class="line"><span class="comment">-- ③将想要去重的表的数据全部删除 </span></span><br><span class="line"><span class="comment">-- ④将临时表的数据insert into进原表 </span></span><br><span class="line"><span class="comment">-- ⑤drop零时表</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 实现流程</span></span><br><span class="line"><span class="comment">-- 创建一个临时表的结构与想要去重的表的结构一致 </span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> temp_table <span class="keyword">like</span> my_student;</span><br><span class="line"><span class="comment">-- 对临时表进行distinct去重 </span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> temp_table <span class="keyword">select</span> <span class="keyword">distinct</span> <span class="operator">*</span> <span class="keyword">from</span> my_student;</span><br><span class="line"><span class="comment">-- 将想要去重的表的数据全部删除</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> my_student;</span><br><span class="line"><span class="comment">-- 将临时表的数据insert into进原表</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> my_student <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> temp_table;</span><br><span class="line"><span class="comment">-- drop零时表</span></span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> temp_table;</span><br></pre></td></tr></table></figure>

<h5 id="UNION操作符-合并查询"><a href="#UNION操作符-合并查询" class="headerlink" title="UNION操作符 合并查询"></a>UNION操作符 合并查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">UNION</span></span><br><span class="line">#MySQL <span class="keyword">UNION</span> 操作符用于连接两个以上的 <span class="keyword">SELECT</span> 语句的结果组合到一个结果集合中。多个 <span class="keyword">SELECT</span> 语句会删除重复的数据。</span><br><span class="line">#MySQL <span class="keyword">UNION</span> 操作符语法格式：</span><br><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> tables</span><br><span class="line">[<span class="keyword">WHERE</span> conditions]</span><br><span class="line"><span class="keyword">UNION</span> [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span>]</span><br><span class="line"><span class="keyword">SELECT</span> expression1, expression2, ... expression_n</span><br><span class="line"><span class="keyword">FROM</span> tables</span><br><span class="line">[<span class="keyword">WHERE</span> conditions];</span><br><span class="line">#参数</span><br><span class="line">expression1, expression2, ... expression_n: 要检索的列。</span><br><span class="line"></span><br><span class="line">tables: 要检索的数据表。</span><br><span class="line"></span><br><span class="line"><span class="keyword">WHERE</span> conditions: 可选， 检索条件。</span><br><span class="line"></span><br><span class="line"><span class="keyword">DISTINCT</span>: 可选，删除结果集中重复的数据。默认情况下 <span class="keyword">UNION</span> 操作符已经删除了重复数据，所以 <span class="keyword">DISTINCT</span> 修饰符对结果没啥影响。</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALL</span>: 可选，返回所有结果集，包含重复数据</span><br><span class="line"><span class="comment">-- tip:</span></span><br><span class="line"><span class="keyword">UNION</span> 语句：用于将不同表中相同列中查询的数据展示出来；（不包括重复数据）</span><br><span class="line"></span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">ALL</span> 语句：用于将不同表中相同列中查询的数据展示出来；（包括重复数据）</span><br><span class="line"></span><br><span class="line">使用形式如下：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">UNION</span> <span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 列名称；</span><br><span class="line"><span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">UNION</span> <span class="keyword">ALL</span> <span class="keyword">SELECT</span> 列名称 <span class="keyword">FROM</span> 表名称 <span class="keyword">ORDER</span> <span class="keyword">BY</span> 列名称；</span><br></pre></td></tr></table></figure>



<h4 id="函数★"><a href="#函数★" class="headerlink" title="函数★"></a>函数★</h4><h5 id="统计函数"><a href="#统计函数" class="headerlink" title="统计函数"></a>统计函数</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">SQL</span> 函数</span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> 拥有很多可用于计数和计算的内建函数。</span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line">## <span class="keyword">SQL</span> Aggregate 函数</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> Aggregate 函数计算从列中取得的值，返回一个单一的值。</span><br><span class="line"></span><br><span class="line">有用的 Aggregate 函数：</span><br><span class="line"></span><br><span class="line"><span class="operator">-</span> <span class="built_in">AVG</span>() <span class="operator">-</span> 返回平均值</span><br><span class="line"><span class="operator">-</span> <span class="built_in">COUNT</span>() <span class="operator">-</span> 返回行数</span><br><span class="line"><span class="operator">-</span> <span class="keyword">FIRST</span>() <span class="operator">-</span> 返回第一个记录的值</span><br><span class="line"><span class="operator">-</span> <span class="keyword">LAST</span>() <span class="operator">-</span> 返回最后一个记录的值</span><br><span class="line"><span class="operator">-</span> <span class="built_in">MAX</span>() <span class="operator">-</span> 返回最大值</span><br><span class="line"><span class="operator">-</span> <span class="built_in">MIN</span>() <span class="operator">-</span> 返回最小值</span><br><span class="line"><span class="operator">-</span> <span class="built_in">SUM</span>() <span class="operator">-</span> 返回总和</span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"># <span class="keyword">SQL</span> <span class="built_in">COUNT</span>() 函数</span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">COUNT</span>() 函数返回匹配指定条件的行数。</span><br><span class="line"></span><br><span class="line"><span class="comment">------</span></span><br><span class="line"></span><br><span class="line">### <span class="keyword">SQL</span> <span class="built_in">COUNT</span>(column_name) 语法</span><br><span class="line"></span><br><span class="line"><span class="built_in">COUNT</span>(column_name) 函数返回指定列的值的数目（<span class="keyword">NULL</span> 不计入）：<span class="comment">-- 统计满足条件的某列有多少个（会排除null）</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line">### <span class="keyword">SQL</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) 语法</span><br><span class="line"></span><br><span class="line"><span class="built_in">COUNT</span>(<span class="operator">*</span>) 函数返回表中的记录数：<span class="comment">-- 返回满足条件的记录的行数</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line">### <span class="keyword">SQL</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> column_name) 语法</span><br><span class="line"></span><br><span class="line"><span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> column_name) 函数返回指定列的不同值的数目：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line"><span class="operator">*</span><span class="operator">*</span>注释：<span class="operator">*</span><span class="operator">*</span><span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span>) 适用于 ORACLE 和 Microsoft <span class="keyword">SQL</span> Server，但是无法用于 Microsoft Access</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> access1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span> aid  <span class="operator">|</span> site_id <span class="operator">|</span> count <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>    <span class="number">45</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-13</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">230</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">205</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>    <span class="number">13</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">220</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">545</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">201</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">11</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> access1 <span class="keyword">where</span> site_id<span class="operator">=</span><span class="number">3</span>;<span class="comment">-- 返回满足条件的记录的行数</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(count) <span class="keyword">from</span> access1 <span class="keyword">where</span> site_id<span class="operator">=</span><span class="number">3</span>;<span class="comment">-- 统计满足条件的某列有多少个（会排除null）</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(count) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> site_id) <span class="keyword">from</span> access1 <span class="keyword">where</span> site_id<span class="operator">=</span><span class="number">3</span>;<span class="comment">-- 函数返回指定列的不同值（非重复）的数目：</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> site_id) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="operator">|</span>                       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">count</span>(site_id) <span class="keyword">from</span> access1 <span class="keyword">where</span> site_id<span class="operator">=</span><span class="number">3</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">count</span>(site_id) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="operator">|</span>              <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="built_in">AVG</span>() 函数</span><br><span class="line"><span class="built_in">AVG</span>() 函数返回数值列的平均值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="built_in">AVG</span>() 语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(column_name) <span class="keyword">FROM</span> table_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> access1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span> aid  <span class="operator">|</span> site_id <span class="operator">|</span> count <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>    <span class="number">45</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-13</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">230</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">205</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>    <span class="number">13</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">220</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">545</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">201</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">11</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> average(count) <span class="keyword">from</span> access1;</span><br><span class="line">ERROR <span class="number">1305</span> (<span class="number">42000</span>): <span class="keyword">FUNCTION</span> db02.average does <span class="keyword">not</span> exist</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">avg</span>(count) <span class="keyword">as</span> `CountAverage` <span class="keyword">from</span> access1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> CountAverage <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">174.3333</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> site_id <span class="keyword">from</span> access1 <span class="keyword">where</span> count <span class="operator">&gt;=</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(count) <span class="keyword">from</span> access1);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> site_id <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.13</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> site_id,count <span class="keyword">from</span> access1 <span class="keyword">where</span> count <span class="operator">&gt;=</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(count) <span class="keyword">from</span> access1);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------+</span></span><br><span class="line"><span class="operator">|</span> site_id <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">230</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">205</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">220</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">545</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">201</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="built_in">SUM</span>() 函数</span><br><span class="line"><span class="built_in">SUM</span>() 函数返回数值列的总数。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="built_in">SUM</span>() 语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(column_name) <span class="keyword">FROM</span> table_name;<span class="comment">-- 仅对数值起作用</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_score1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------+------------+---------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> name      <span class="operator">|</span> number <span class="operator">|</span> Math_score <span class="operator">|</span> Chinese_score <span class="operator">|</span> English_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------+------------+---------------+---------------+</span></span><br><span class="line"><span class="operator">|</span> 张锦豪    <span class="operator">|</span>   <span class="number">1001</span> <span class="operator">|</span>         <span class="number">99</span> <span class="operator">|</span>            <span class="number">95</span> <span class="operator">|</span>            <span class="number">91</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 欧文      <span class="operator">|</span>   <span class="number">1002</span> <span class="operator">|</span>         <span class="number">92</span> <span class="operator">|</span>            <span class="number">94</span> <span class="operator">|</span>            <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 詹姆斯    <span class="operator">|</span>   <span class="number">1003</span> <span class="operator">|</span>         <span class="number">93</span> <span class="operator">|</span>            <span class="number">95</span> <span class="operator">|</span>            <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 杜兰特    <span class="operator">|</span>   <span class="number">1004</span> <span class="operator">|</span>         <span class="number">92</span> <span class="operator">|</span>            <span class="number">91</span> <span class="operator">|</span>            <span class="number">99</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 库里      <span class="operator">|</span>   <span class="number">1005</span> <span class="operator">|</span>         <span class="number">92</span> <span class="operator">|</span>            <span class="number">92</span> <span class="operator">|</span>            <span class="number">98</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 哈登      <span class="operator">|</span>   <span class="number">1006</span> <span class="operator">|</span>         <span class="number">90</span> <span class="operator">|</span>            <span class="number">91</span> <span class="operator">|</span>            <span class="number">94</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 东七七    <span class="operator">|</span>   <span class="number">1007</span> <span class="operator">|</span>         <span class="number">91</span> <span class="operator">|</span>            <span class="number">93</span> <span class="operator">|</span>            <span class="number">98</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+--------+------------+---------------+---------------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">sum</span>(Math_score <span class="operator">+</span> Chinese_score <span class="operator">+</span> English_score) <span class="keyword">as</span> sum_score <span class="keyword">from</span> student_score1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> sum_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>      <span class="number">1978</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">sum</span>(Math_score <span class="operator">+</span> Chinese_score <span class="operator">+</span> English_score) <span class="operator">/</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> sum_score <span class="keyword">from</span> student_score1;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> sum_score          <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">282.57142857142856</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#<span class="built_in">MAX</span>() 函数</span><br><span class="line"><span class="built_in">MAX</span>() 函数返回指定列的最大值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="built_in">MAX</span>() 语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line">#<span class="built_in">MIN</span>() 函数</span><br><span class="line"><span class="built_in">MIN</span>() 函数返回指定列的最小值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="built_in">MIN</span>() 语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> access1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span> aid  <span class="operator">|</span> site_id <span class="operator">|</span> count <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>    <span class="number">45</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">100</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-13</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span>       <span class="number">1</span> <span class="operator">|</span>   <span class="number">230</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span>       <span class="number">2</span> <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">205</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-14</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">6</span> <span class="operator">|</span>       <span class="number">4</span> <span class="operator">|</span>    <span class="number">13</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">7</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">220</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-15</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">8</span> <span class="operator">|</span>       <span class="number">5</span> <span class="operator">|</span>   <span class="number">545</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-16</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">9</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>   <span class="number">201</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">10</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>   <span class="number">11</span> <span class="operator">|</span>       <span class="number">3</span> <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">2016</span><span class="number">-05</span><span class="number">-26</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------+-------+------------+</span></span><br><span class="line"><span class="number">11</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">max</span>(Math_score <span class="operator">+</span> Chinese_score <span class="operator">+</span> English_score) <span class="keyword">as</span> max_sum_score <span class="keyword">from</span> student_score1;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> max_sum_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">287</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">min</span>(Math_score <span class="operator">+</span> Chinese_score <span class="operator">+</span> English_score) <span class="keyword">as</span> min_sum_score <span class="keyword">from</span> student_score1;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> min_sum_score <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span>           <span class="number">275</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#<span class="keyword">SQL</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> 语句</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 语句</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 语句用于结合聚合函数，根据一个或多个列对结果集进行分组。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">GROUP</span> <span class="keyword">BY</span> 语法</span><br><span class="line"><span class="keyword">SELECT</span> column_name, aggregate_function(column_name)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name operator <span class="keyword">value</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name;</span><br><span class="line">#<span class="keyword">SQL</span> <span class="keyword">HAVING</span> 子句</span><br><span class="line"><span class="keyword">HAVING</span> 子句</span><br><span class="line">在 <span class="keyword">SQL</span> 中增加 <span class="keyword">HAVING</span> 子句原因是，<span class="keyword">WHERE</span> 关键字无法与聚合函数一起使用。</span><br><span class="line"></span><br><span class="line"><span class="keyword">HAVING</span> 子句可以让我们筛选分组后的各组数据。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">HAVING</span> 语法</span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">HAVING</span> 语法</span><br><span class="line"><span class="keyword">SELECT</span> column_name, aggregate_function(column_name)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> column_name operator <span class="keyword">value</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> column_name</span><br><span class="line"><span class="keyword">HAVING</span> aggregate_function(column_name) operator <span class="keyword">value</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> CLERK     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> MANAGER   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> MANAGER   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> MANAGER   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> ANALYST   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> PRESIDENT <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> CLERK     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> ANALYST   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> CLERK     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> salgrade</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> grade MEDIUMINT UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>, <span class="comment">/*工资级别*/</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> losal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, <span class="comment">/* 该级别的最低工资 */</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> hisal <span class="type">DECIMAL</span>(<span class="number">17</span>,<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="comment">/* 该级别的最高工资*/</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> );</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="number">700</span>,<span class="number">1200</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">2</span>,<span class="number">1201</span>,<span class="number">1400</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">3</span>,<span class="number">1401</span>,<span class="number">2000</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">4</span>,<span class="number">2001</span>,<span class="number">3000</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">INSERT</span> <span class="keyword">INTO</span> salgrade <span class="keyword">VALUES</span> (<span class="number">5</span>,<span class="number">3001</span>,<span class="number">9999</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> salgrade;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span> grade <span class="operator">|</span> losal   <span class="operator">|</span> hisal   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">1</span> <span class="operator">|</span>  <span class="number">700.00</span> <span class="operator">|</span> <span class="number">1200.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">2</span> <span class="operator">|</span> <span class="number">1201.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">3</span> <span class="operator">|</span> <span class="number">1401.00</span> <span class="operator">|</span> <span class="number">2000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">4</span> <span class="operator">|</span> <span class="number">2001.00</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>     <span class="number">5</span> <span class="operator">|</span> <span class="number">3001.00</span> <span class="operator">|</span> <span class="number">9999.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+---------+---------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">as</span> `avg`,<span class="built_in">max</span>(sal) <span class="keyword">as</span> `max` <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+</span></span><br><span class="line"><span class="operator">|</span> avg         <span class="operator">|</span> max     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2148.076923</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">avg</span>(sal),<span class="built_in">max</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno;<span class="comment">-- group by 根据列进行分组</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(sal)    <span class="operator">|</span> <span class="built_in">max</span>(sal) <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2443.750000</span> <span class="operator">|</span>  <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1566.666667</span> <span class="operator">|</span>  <span class="number">2850.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2916.666667</span> <span class="operator">|</span>  <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">avg</span>(sal),<span class="built_in">max</span>(sal),deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">having</span> <span class="built_in">avg</span>(sal)<span class="operator">&gt;</span><span class="number">2000.00</span>;<span class="comment">-- group by 根据列进行分组 having 条件筛选</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">avg</span>(sal)    <span class="operator">|</span> <span class="built_in">max</span>(sal) <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2443.750000</span> <span class="operator">|</span>  <span class="number">3000.00</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2916.666667</span> <span class="operator">|</span>  <span class="number">5000.00</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+----------+--------+</span></span><br><span class="line"><span class="number">2</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="时间日期"><a href="#时间日期" class="headerlink" title="时间日期"></a>时间日期</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br></pre></td><td class="code"><pre><span class="line">#CURDATE()	返回当前日期	</span><br><span class="line"><span class="keyword">SELECT</span> CURDATE();</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2018</span><span class="number">-09</span><span class="number">-19</span></span><br><span class="line">#<span class="built_in">CURRENT_DATE</span>()	返回当前日期	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>();</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2018</span><span class="number">-09</span><span class="number">-19</span></span><br><span class="line"></span><br><span class="line">#<span class="built_in">CURRENT_TIME</span>	返回当前时间	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIME</span>();</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">19</span>:<span class="number">59</span>:<span class="number">02</span></span><br><span class="line"></span><br><span class="line">#LAST_DAY   返回某个月的最后一天</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> last_day(now());</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> last_day(now()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-30</span>      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> LAST_DAY(<span class="string">&#x27;2022-08-04&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="operator">|</span> LAST_DAY(<span class="string">&#x27;2022-08-04&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-08</span><span class="number">-31</span>             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#CURTIME()	返回当前时间	</span><br><span class="line"><span class="keyword">SELECT</span> CURTIME();</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">19</span>:<span class="number">59</span>:<span class="number">02</span></span><br><span class="line"></span><br><span class="line">#<span class="built_in">CURRENT_TIMESTAMP</span>()	返回当前日期和时间(时间戳)	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_TIMESTAMP</span>()</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2018</span><span class="number">-09</span><span class="number">-19</span> <span class="number">20</span>:<span class="number">57</span>:<span class="number">43</span></span><br><span class="line"></span><br><span class="line">#<span class="type">DATE</span>()	从日期或日期时间表达式中提取日期值	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="type">DATE</span>(&quot;2017-06-15&quot;);    </span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2017</span><span class="number">-06</span><span class="number">-15</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">current_timestamp</span>();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">current_timestamp</span>() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">38</span>:<span class="number">25</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="type">date</span>(<span class="built_in">current_timestamp</span>());</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="type">date</span>(<span class="built_in">current_timestamp</span>()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span>                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#DATE_ADD(d，<span class="type">INTERVAL</span> expr type)	计算起始日期 d 加上一个时间段后的日期，type 值可以是：</span><br><span class="line">MICROSECOND</span><br><span class="line"><span class="keyword">SECOND</span></span><br><span class="line"><span class="keyword">MINUTE</span></span><br><span class="line"><span class="keyword">HOUR</span></span><br><span class="line"><span class="keyword">DAY</span></span><br><span class="line">WEEK</span><br><span class="line"><span class="keyword">MONTH</span></span><br><span class="line">QUARTER</span><br><span class="line"><span class="keyword">YEAR</span></span><br><span class="line">SECOND_MICROSECOND</span><br><span class="line">MINUTE_MICROSECOND</span><br><span class="line">MINUTE_SECOND</span><br><span class="line">HOUR_MICROSECOND</span><br><span class="line">HOUR_SECOND</span><br><span class="line">HOUR_MINUTE</span><br><span class="line">DAY_MICROSECOND</span><br><span class="line">DAY_SECOND</span><br><span class="line">DAY_MINUTE</span><br><span class="line">DAY_HOUR</span><br><span class="line">YEAR_MONTH</span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(&quot;2017-06-15&quot;, <span class="type">INTERVAL</span> <span class="number">10</span> <span class="keyword">DAY</span>);    </span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2017</span><span class="number">-06</span><span class="number">-25</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(&quot;2017-06-15 09:34:21&quot;, <span class="type">INTERVAL</span> <span class="number">15</span> <span class="keyword">MINUTE</span>);</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2017</span><span class="number">-06</span><span class="number">-15</span> <span class="number">09</span>:<span class="number">49</span>:<span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(&quot;2017-06-15 09:34:21&quot;, <span class="type">INTERVAL</span> <span class="number">-3</span> <span class="keyword">HOUR</span>);</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span><span class="number">2017</span><span class="number">-06</span><span class="number">-15</span> <span class="number">06</span>:<span class="number">34</span>:<span class="number">21</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> DATE_ADD(&quot;2017-06-15 09:34:21&quot;, <span class="type">INTERVAL</span> <span class="number">-3</span> <span class="keyword">MONTH</span>);</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span><span class="number">2017</span><span class="number">-04</span><span class="number">-15</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">current_timestamp</span>();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">current_timestamp</span>() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">43</span>:<span class="number">51</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> date_add(<span class="built_in">current_timestamp</span>(),<span class="type">interval</span> <span class="number">3</span> <span class="keyword">month</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> date_add(<span class="built_in">current_timestamp</span>(),<span class="type">interval</span> <span class="number">3</span> <span class="keyword">month</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-12</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">43</span>:<span class="number">08</span>                            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 开发中常用:判断是否于某个时间段内的</span></span><br><span class="line"><span class="comment">-- 查看员工表中工龄达到31year的员工及其入职日期</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#DATE_SUB(<span class="type">date</span>,<span class="type">INTERVAL</span> expr type)	函数从日期减去指定的时间间隔。	</span><br><span class="line">Orders 表中 OrderDate 字段减去 <span class="number">2</span> 天：</span><br><span class="line"><span class="keyword">SELECT</span> OrderId,DATE_SUB(OrderDate,<span class="type">INTERVAL</span> <span class="number">2</span> <span class="keyword">DAY</span>) <span class="keyword">AS</span> OrderPayDate</span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">current_timestamp</span>();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">current_timestamp</span>() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">43</span>:<span class="number">51</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> date_sub(<span class="built_in">current_timestamp</span>(),<span class="type">interval</span> <span class="number">3</span> <span class="keyword">month</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> date_sub(<span class="built_in">current_timestamp</span>(),<span class="type">interval</span> <span class="number">3</span> <span class="keyword">month</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-06</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">46</span>:<span class="number">16</span>                            <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#TIMEDIFF(time1, time2)	计算时间差值	单位是 时:分:秒</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMEDIFF(&quot;13:10:11&quot;, &quot;13:10:10&quot;);</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">00</span>:<span class="number">00</span>:<span class="number">01</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMEDIFF(<span class="string">&#x27;2000:01:01 00:00:00&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>                 <span class="string">&#x27;2000:01:01 00:00:00.000001&#x27;</span>);</span><br><span class="line">        <span class="operator">-</span><span class="operator">&gt;</span> <span class="string">&#x27;-00:00:00.000001&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">SELECT</span> TIMEDIFF(<span class="string">&#x27;2008-12-31 23:59:59.000001&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>                 <span class="string">&#x27;2008-12-30 01:01:01.000002&#x27;</span>);</span><br><span class="line">        <span class="operator">-</span><span class="operator">&gt;</span> <span class="string">&#x27;46:58:57.999999&#x27;</span></span><br><span class="line"></span><br><span class="line">#DATEDIFF(d1,d2)	计算日期 d1<span class="operator">-</span><span class="operator">&gt;</span>d2 之间相隔的天数	单位是 天</span><br><span class="line"><span class="keyword">SELECT</span> DATEDIFF(<span class="string">&#x27;2001-01-01&#x27;</span>,<span class="string">&#x27;2001-02-02&#x27;</span>)</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">-32</span></span><br><span class="line"><span class="comment">-- 假设活到80岁 看看从现在开始还能活几天</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> datediff(date_add(<span class="string">&#x27;2001-01-01&#x27;</span>,<span class="type">interval</span> <span class="number">80</span> <span class="keyword">year</span>),<span class="built_in">current_date</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> datediff(date_add(<span class="string">&#x27;2001-01-01&#x27;</span>,<span class="type">interval</span> <span class="number">80</span> <span class="keyword">year</span>),<span class="built_in">current_date</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span>                                                          <span class="number">21306</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#TO_DAYS(d)	计算日期 d 距离 <span class="number">0000</span> 年 <span class="number">1</span> 月 <span class="number">1</span> 日的天数	</span><br><span class="line"><span class="keyword">SELECT</span> TO_DAYS(<span class="string">&#x27;0001-01-01 01:01:01&#x27;</span>)</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">366</span></span><br><span class="line"></span><br><span class="line">#NOW()	返回当前日期和时间	</span><br><span class="line"><span class="keyword">SELECT</span> NOW()</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">2018</span><span class="number">-09</span><span class="number">-19</span> <span class="number">20</span>:<span class="number">57</span>:<span class="number">43</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> now();</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> now()               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="number">19</span>:<span class="number">50</span>:<span class="number">49</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">year</span>(now());</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">year</span>(now()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span>        <span class="number">2022</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">month</span>(now());</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">month</span>(now()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">9</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">day</span>(now());</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">day</span>(now()) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># unix_timestamp()返回<span class="number">1970</span>年<span class="number">1</span>月<span class="number">1</span>日至此的毫秒数</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> unix_timestamp();</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span> unix_timestamp() <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">1662128229</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"># from_unixtime(一个时间戳,<span class="string">&#x27;指定格式&#x27;</span>)<span class="comment">-- 可以把时间戳转成指定的格式</span></span><br><span class="line"><span class="comment">-- 在开发中会使用一个int来保存unix时间戳 然后进行转换</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%y-%m-%d&#x27;</span>);<span class="comment">-- 固定格式</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%y-%m-%d&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">22</span><span class="number">-09</span><span class="number">-02</span>                             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%Y-%m-%d&#x27;</span>);<span class="comment">-- 固定格式</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%Y-%m-%d&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span>                           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>);<span class="comment">-- 固定格式</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> from_unixtime(<span class="number">1662128229</span>,<span class="string">&#x27;%Y-%m-%d %H:%i:%s&#x27;</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="number">22</span>:<span class="number">17</span>:<span class="number">09</span>                           <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h5 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br></pre></td><td class="code"><pre><span class="line">## <span class="keyword">SQL</span> Scalar 函数</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> Scalar 函数基于输入值，返回一个单一的值。</span><br><span class="line"></span><br><span class="line">有用的 Scalar 函数：</span><br><span class="line"></span><br><span class="line"><span class="operator">-</span> UCASE() <span class="operator">-</span> 将某个字段转换为大写</span><br><span class="line"><span class="operator">-</span> LCASE() <span class="operator">-</span> 将某个字段转换为小写</span><br><span class="line"><span class="operator">-</span> MID() <span class="operator">-</span> 从某个文本字段提取字符，MySql 中使用</span><br><span class="line"><span class="operator">-</span> <span class="built_in">SubString</span>(字段，<span class="number">1</span>，<span class="keyword">end</span>) <span class="operator">-</span> 从某个文本字段提取字符</span><br><span class="line"><span class="operator">-</span> LEN() <span class="operator">-</span> 返回某个文本字段的长度</span><br><span class="line"><span class="operator">-</span> ROUND() <span class="operator">-</span> 对某个数值字段进行指定小数位数的四舍五入</span><br><span class="line"><span class="operator">-</span> NOW() <span class="operator">-</span> 返回当前的系统日期和时间</span><br><span class="line"><span class="operator">-</span> FORMAT() <span class="operator">-</span> 格式化某个字段的显示方式</span><br><span class="line"></span><br><span class="line">#UCASE() 函数</span><br><span class="line">UCASE() 函数把字段的值转换为大写。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> UCASE() 语法</span><br><span class="line"><span class="keyword">SELECT</span> UCASE(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line">用于 <span class="keyword">SQL</span> Server 的语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp <span class="keyword">set</span> job<span class="operator">=</span>ucase(job) <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">4</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#LCASE() 函数</span><br><span class="line">LCASE() 函数把字段的值转换为小写。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> LCASE() 语法</span><br><span class="line"><span class="keyword">SELECT</span> LCASE(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line">用于 <span class="keyword">SQL</span> Server 的语法</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> SALESMAN  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp <span class="keyword">set</span> job<span class="operator">=</span>lcase(job) <span class="keyword">where</span> job<span class="operator">=</span><span class="string">&#x27;SALESMAN&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">4</span>  Changed: <span class="number">4</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#MID() 函数</span><br><span class="line"><span class="comment">-- MID() 函数用于从文本字段中提取字符。-- 相当于substr</span></span><br><span class="line"><span class="keyword">SQL</span> MID()</span><br><span class="line"><span class="keyword">SELECT</span> MID(column_name,<span class="keyword">start</span>[,length]) <span class="keyword">FROM</span> table_name;</span><br><span class="line"><span class="comment">-- 参数	       描述</span></span><br><span class="line"><span class="comment">-- column_name	必需。要提取字符的字段。</span></span><br><span class="line"><span class="comment">-- start	    必需。规定开始位置（起始值是 1）。</span></span><br><span class="line"><span class="comment">-- length	    可选。要返回的字符数。如果省略，则 MID() 函数返回剩余文本。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> mid(hiredate,<span class="number">1</span>,<span class="number">4</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> mid(hiredate,<span class="number">1</span>,<span class="number">4</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1997</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1992</span>              <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> mid(hiredate,<span class="number">1</span>) <span class="keyword">as</span> <span class="string">&#x27;HireDate&#x27;</span> <span class="keyword">from</span> emp;<span class="comment">-- length	    可选。要返回的字符数。如果省略，则 MID() 函数返回剩余文本。</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> HireDate   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#LEN() 函数</span><br><span class="line">LEN() 函数返回文本字段中值的长度。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> LEN() 语法</span><br><span class="line"><span class="keyword">SELECT</span> LEN(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line">MySQL 中函数为 LENGTH():</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> LENGTH(column_name) <span class="keyword">FROM</span> table_name;</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> length(ename) <span class="keyword">as</span> <span class="string">&#x27;EmployeeNameLength&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> EmployeeNameLength <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">5</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">4</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>                  <span class="number">6</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line"></span><br><span class="line">#CONCAT(s1,s2...sn)	字符串 s1,s2 等多个字符串合并为一个字符串	</span><br><span class="line"><span class="comment">-- 合并多个字符串</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(&quot;SQL &quot;, &quot;Runoob &quot;, &quot;Gooogle &quot;, &quot;Facebook&quot;) <span class="keyword">AS</span> ConcatenatedString;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> concat(ename,&quot;--&quot;,job) <span class="keyword">from</span> emp <span class="keyword">where</span> sal<span class="operator">&gt;=</span><span class="number">3000.00</span>;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="operator">|</span> concat(ename,&quot;--&quot;,job) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="operator">|</span> SCOTT<span class="comment">--analyst         |</span></span><br><span class="line"><span class="operator">|</span> KING<span class="comment">--president        |</span></span><br><span class="line"><span class="operator">|</span> FORD<span class="comment">--analyst          |</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#CONCAT(s1,s2...sn)	字符串 s1,s2 等多个字符串合并为一个字符串 可以是运算或者日期加上字符串合并成一个字符串</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> ename,CONCAT(<span class="string">&#x27;已入职:&#x27;</span>,<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">/</span><span class="number">365</span>),<span class="number">0</span>),<span class="string">&#x27;年&#x27;</span>,<span class="keyword">TRUNCATE</span>((<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">%</span><span class="number">365</span>),<span class="number">0</span>))<span class="operator">/</span><span class="number">30</span>,<span class="number">0</span>),<span class="string">&#x27;月&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">TRUNCATE</span>((<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">%</span><span class="number">365</span>),<span class="number">0</span>))<span class="operator">%</span><span class="number">30</span>,<span class="number">0</span>),<span class="string">&#x27;天&#x27;</span>) <span class="keyword">AS</span> <span class="string">&#x27;入职年限&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> ename  <span class="operator">|</span> 入职年限                  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------------+</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">9</span>月<span class="number">1</span>天         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">6</span>月<span class="number">26</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">6</span>月<span class="number">24</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">5</span>月<span class="number">15</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> 已入职:<span class="number">30</span>年<span class="number">11</span>月<span class="number">21</span>天       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">4</span>月<span class="number">16</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">3</span>月<span class="number">7</span>天         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> 已入职:<span class="number">25</span>年<span class="number">4</span>月<span class="number">26</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> KING   <span class="operator">|</span> 已入职:<span class="number">30</span>年<span class="number">10</span>月<span class="number">1</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> 已入职:<span class="number">31</span>年<span class="number">0</span>月<span class="number">6</span>天         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span> 已入职:<span class="number">30</span>年<span class="number">9</span>月<span class="number">15</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> 已入职:<span class="number">30</span>年<span class="number">9</span>月<span class="number">15</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> 已入职:<span class="number">30</span>年<span class="number">7</span>月<span class="number">24</span>天        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+---------------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp <span class="keyword">set</span> job<span class="operator">=</span>concat(<span class="built_in">upper</span>(<span class="keyword">left</span>(job,<span class="number">1</span>)),mid(job,<span class="number">2</span>));</span><br><span class="line"><span class="comment">-- 修改字段中的字符串将首字符改成小写</span></span><br><span class="line"><span class="comment">-- 1.使用left（列名，1）将字符串中的首字母拿到</span></span><br><span class="line"><span class="comment">-- 1.1使用upper（1）将拿到的字符串首字母转换成大写的</span></span><br><span class="line"><span class="comment">-- 2.使用mid（列名，2）将字符串中除了首字母的剩余字符拿到</span></span><br><span class="line"><span class="comment">-- 3.使用concat（1.1，2）将拿到的两个部分组合起来</span></span><br><span class="line"><span class="comment">-- 4.使用update 表名 set 列名=3；使用update方法进行修改</span></span><br><span class="line">Query OK, <span class="number">13</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">13</span>  Changed: <span class="number">13</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> SMITH  <span class="operator">|</span> Clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> Salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> Salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> JONES  <span class="operator">|</span> Manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> Salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> Manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> CLARK  <span class="operator">|</span> Manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> SCOTT  <span class="operator">|</span> Analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> KING   <span class="operator">|</span> President <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> Salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> Clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> FORD   <span class="operator">|</span> Analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> MILLER <span class="operator">|</span> Clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">update</span> emp <span class="keyword">set</span> ename<span class="operator">=</span>concat(<span class="keyword">left</span>(ename,<span class="number">1</span>),<span class="built_in">lower</span>(mid(ename,<span class="number">2</span>)));</span><br><span class="line">Query OK, <span class="number">13</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="keyword">Rows</span> matched: <span class="number">13</span>  Changed: <span class="number">13</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job       <span class="operator">|</span> mgr  <span class="operator">|</span> hiredate   <span class="operator">|</span> sal     <span class="operator">|</span> comm    <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7369</span> <span class="operator">|</span> Smith  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7902</span> <span class="operator">|</span> <span class="number">1990</span><span class="number">-12</span><span class="number">-17</span> <span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> Allen  <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-20</span> <span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span>  <span class="number">300.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> Ward   <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-02</span><span class="number">-22</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span>  <span class="number">500.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7566</span> <span class="operator">|</span> Jones  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-04</span><span class="number">-02</span> <span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> Martin <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-28</span> <span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span> <span class="number">1400.00</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> Blake  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7782</span> <span class="operator">|</span> Clark  <span class="operator">|</span> manager   <span class="operator">|</span> <span class="number">7839</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-06</span><span class="number">-09</span> <span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7788</span> <span class="operator">|</span> Scott  <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1997</span><span class="number">-04</span><span class="number">-19</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7839</span> <span class="operator">|</span> King   <span class="operator">|</span> president <span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-11</span><span class="number">-17</span> <span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> Turner <span class="operator">|</span> salesman  <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-09</span><span class="number">-08</span> <span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> James  <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7698</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7902</span> <span class="operator">|</span> Ford   <span class="operator">|</span> analyst   <span class="operator">|</span> <span class="number">7566</span> <span class="operator">|</span> <span class="number">1991</span><span class="number">-12</span><span class="number">-03</span> <span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7934</span> <span class="operator">|</span> Miller <span class="operator">|</span> clerk     <span class="operator">|</span> <span class="number">7782</span> <span class="operator">|</span> <span class="number">1992</span><span class="number">-01</span><span class="number">-23</span> <span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span>    <span class="keyword">NULL</span> <span class="operator">|</span>     <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+-----------+------+------------+---------+---------+--------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#REPLACE(s,s1,s2)	将字符串 s2 替代字符串 s 中的字符串 s1	</span><br><span class="line"><span class="comment">-- 将字符串 abc 中的字符 a 替换为字符 x：</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;abc&#x27;</span>,<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;x&#x27;</span>) <span class="comment">--xbc</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 将emp表中的job列的数据首字符的小写字母replace为大写字母</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> replace(</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> job,<span class="keyword">left</span>(job,<span class="number">1</span>),<span class="built_in">upper</span>(<span class="keyword">left</span>(job,<span class="number">1</span>))</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> replace(</span><br><span class="line">job,<span class="keyword">left</span>(job,<span class="number">1</span>),<span class="built_in">upper</span>(<span class="keyword">left</span>(job,<span class="number">1</span>))</span><br><span class="line">) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> Clerk                                         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SaleSman                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SaleSman                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Manager                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SaleSman                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Manager                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Manager                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AnAlyst                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> President                                     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SaleSman                                      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Clerk                                         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> AnAlyst                                       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Clerk                                         <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------------------------------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">#<span class="built_in">ABS</span>(x)	返回 x 的绝对值　　	</span><br><span class="line"><span class="comment">-- 返回 -1 的绝对值：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-1</span>) <span class="comment">-- 返回1</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">abs</span>(<span class="number">-125</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">abs</span>(<span class="number">-125</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="operator">|</span>       <span class="number">125</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#BIN(x)	返回 x 的二进制编码	</span><br><span class="line"><span class="comment">-- 15 的 2 进制编码:</span></span><br><span class="line"><span class="keyword">SELECT</span> BIN(<span class="number">15</span>); <span class="comment">-- 1111</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> bin(<span class="number">56</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> bin(<span class="number">56</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">111000</span>  <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#CONV(x,f1,f2)	返回 f1 进制数变成 f2 进制数	</span><br><span class="line"><span class="keyword">SELECT</span> CONV(<span class="number">15</span>, <span class="number">10</span>, <span class="number">2</span>);</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> <span class="number">1111</span></span><br><span class="line"></span><br><span class="line">#<span class="built_in">CEILING</span>(x)	返回大于或等于 x 的最小整数　</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">1.5</span>); <span class="comment">-- 返回2</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">ceiling</span>(<span class="number">1.1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ceiling</span>(<span class="number">1.1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">ceiling</span>(<span class="number">-2.9</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">ceiling</span>(<span class="number">-2.9</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span>            <span class="number">-2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="built_in">FLOOR</span>(x)	返回小于或等于 x 的最大整数　　</span><br><span class="line"><span class="comment">-- 小于或等于 1.5 的整数：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">1.5</span>) <span class="comment">-- 返回1</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">1.9</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">floor</span>(<span class="number">1.9</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">1</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">-1.1</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="built_in">floor</span>(<span class="number">-1.1</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="operator">|</span>          <span class="number">-2</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">TRUNCATE</span>(x,y)	返回数值 x 保留到小数点后 y 位的值（最后一位不会进行四舍五入）</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">TRUNCATE</span>(<span class="number">1.23456</span>,<span class="number">3</span>) <span class="comment">-- 1.234</span></span><br><span class="line"></span><br><span class="line">#FORMAT(x,n)	函数可以将数字 x 进行格式化 &quot;#,###.##&quot;, 将 x 保留到小数点后 n 位，最后一位四舍五入。	</span><br><span class="line"><span class="comment">-- 格式化数字 &quot;#,###.##&quot; 形式：</span></span><br><span class="line"><span class="keyword">SELECT</span> FORMAT(<span class="number">250500.5634</span>, <span class="number">2</span>);     <span class="comment">-- 输出 250,500.56</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> sal <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span> sal     <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">800.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1600.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2975.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1250.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2850.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2450.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1500.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">950.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3000.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1300.00</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> format(sal,<span class="number">5</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> format(sal,<span class="number">5</span>) <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">800.00000</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">600.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">250.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>,<span class="number">975.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">250.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>,<span class="number">850.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">2</span>,<span class="number">450.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>,<span class="number">000.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">5</span>,<span class="number">000.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">500.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">950.00000</span>     <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">3</span>,<span class="number">000.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1</span>,<span class="number">300.00000</span>   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#LEAST(expr1, expr2, expr3, ...)	返回列表中的最小值	</span><br><span class="line"><span class="comment">-- 返回以下数字列表中的最小值：</span></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(<span class="number">3</span>, <span class="number">12</span>, <span class="number">34</span>, <span class="number">8</span>, <span class="number">25</span>); <span class="comment">-- 3</span></span><br><span class="line"><span class="comment">-- 返回以下字符串列表中的最小值：</span></span><br><span class="line"><span class="keyword">SELECT</span> LEAST(&quot;Google&quot;, &quot;Runoob&quot;, &quot;Apple&quot;);   <span class="comment">-- Apple</span></span><br><span class="line"></span><br><span class="line">#<span class="built_in">MOD</span>(x,y)	返回 x 除以 y 以后的余数　	</span><br><span class="line"><span class="comment">-- 5 除于 2 的余数：</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MOD</span>(<span class="number">5</span>,<span class="number">2</span>) <span class="comment">-- 1</span></span><br><span class="line"></span><br><span class="line">#RAND()	返回 <span class="number">0</span> 到 <span class="number">1</span> 的随机数　　	</span><br><span class="line"><span class="keyword">SELECT</span> RAND() <span class="comment">--0.93099315644334</span></span><br><span class="line"><span class="comment">-- RAND(seed) 在开发中指定了seed则会固定得到一个0-1的随机数</span></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> rand();</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> rand()             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.9477880121653788</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> rand();</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> rand()             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.7799059001541752</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> rand(<span class="number">5</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> rand(<span class="number">5</span>)             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.40613597483014313</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- RAND(seed) 在开发中指定了seed则会固定得到一个0-1的随机数</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> rand(<span class="number">5</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> rand(<span class="number">5</span>)             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.40613597483014313</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> rand(<span class="number">5</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> rand(<span class="number">5</span>)             <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">0.40613597483014313</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#ROUND(x)	返回离 x 最近的整数	</span><br><span class="line"><span class="keyword">SELECT</span> ROUND(<span class="number">1.23456</span>) <span class="comment">--1</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="系统函数-amp-加密函数"><a href="#系统函数-amp-加密函数" class="headerlink" title="系统函数&amp;加密函数"></a>系统函数&amp;加密函数</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">USER</span>()	返回当前用户	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>();</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> guest@<span class="operator">%</span></span><br><span class="line"></span><br><span class="line">#DATABASE()	返回当前数据库名	</span><br><span class="line"><span class="keyword">SELECT</span> DATABASE();   </span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span> runoob</span><br><span class="line"></span><br><span class="line"># MD5（str） 为字符串算出一个MD5 <span class="type">char</span>(<span class="number">32</span>) 的字符串<span class="comment">--用户密码加密</span></span><br><span class="line"><span class="comment">-- root 密码存入的是加密后的</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> MD5(<span class="string">&#x27;zjhzjhzjh&#x27;</span>);</span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> MD5(<span class="string">&#x27;zjhzjhzjh&#x27;</span>)                 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">4192290</span>b1061348ea435f0595e65e933 <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">----------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student4 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;张锦豪&#x27;</span>,MD5(<span class="string">&#x27;zjh20001207&#x27;</span>),<span class="built_in">current_date</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student4;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+----------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name      <span class="operator">|</span> password                         <span class="operator">|</span> birthday   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+----------------------------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span> 张锦豪    <span class="operator">|</span> dd60ed8124010280d53bda4cfd3bb6a5 <span class="operator">|</span> <span class="number">2022</span><span class="number">-09</span><span class="number">-02</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+-----------+----------------------------------+------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#IF(expr,v1,v2)	如果表达式 expr 成立，返回结果 v1；否则，返回结果 v2。	</span><br><span class="line"><span class="keyword">SELECT</span> IF(<span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span>,<span class="string">&#x27;正确&#x27;</span>,<span class="string">&#x27;错误&#x27;</span>)    </span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span>正确</span><br><span class="line"></span><br><span class="line">#IFNULL(v1,v2)	如果 v1 的值不为 <span class="keyword">NULL</span>，则返回 v1，否则返回 v2。	</span><br><span class="line"><span class="keyword">SELECT</span> IFNULL(<span class="keyword">null</span>,<span class="string">&#x27;Hello Word&#x27;</span>)</span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span>Hello Word</span><br><span class="line"></span><br><span class="line">#<span class="keyword">CASE</span> expression</span><br><span class="line">    <span class="keyword">WHEN</span> condition1 <span class="keyword">THEN</span> result1</span><br><span class="line">    <span class="keyword">WHEN</span> condition2 <span class="keyword">THEN</span> result2</span><br><span class="line">   ...</span><br><span class="line">    <span class="keyword">WHEN</span> conditionN <span class="keyword">THEN</span> resultN</span><br><span class="line">    <span class="keyword">ELSE</span> <span class="keyword">result</span></span><br><span class="line">	<span class="keyword">END</span>	</span><br><span class="line"><span class="keyword">CASE</span> 表示函数开始，<span class="keyword">END</span> 表示函数结束。如果 condition1 成立，则返回 result1, 如果 condition2 成立，则返回 result2，当全部不成立则返回 <span class="keyword">result</span>，而当有一个成立之后，后面的就不执行了。	</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CASE</span> </span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">　　<span class="keyword">THEN</span> <span class="string">&#x27;1 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">WHEN</span> <span class="number">2</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line">　　<span class="keyword">THEN</span> <span class="string">&#x27;2 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">ELSE</span> <span class="string">&#x27;3 &gt; 0&#x27;</span></span><br><span class="line">　　<span class="keyword">END</span></span><br><span class="line"><span class="operator">-</span><span class="operator">&gt;</span><span class="number">1</span> <span class="operator">&gt;</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">case</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;clerk&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">then</span> <span class="string">&#x27;职员&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;manager&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">then</span> <span class="string">&#x27;经理&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span>     <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span><span class="operator">^</span>C</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="keyword">case</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;clerk&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;职员&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;manager&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;经理&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;销售&#x27;</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">else</span> job</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">end</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">case</span></span><br><span class="line"><span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;clerk&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;职员&#x27;</span></span><br><span class="line"><span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;manager&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;经理&#x27;</span></span><br><span class="line"><span class="keyword">when</span> job<span class="operator">=</span><span class="string">&#x27;salesman&#x27;</span> <span class="keyword">then</span> <span class="string">&#x27;销售&#x27;</span></span><br><span class="line"><span class="keyword">else</span> job</span><br><span class="line"><span class="keyword">end</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> 职员                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 销售                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 销售                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 经理                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 销售                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 经理                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 经理                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> analyst                                                                                                             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> president                                                                                                           <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 销售                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 职员                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> analyst                                                                                                             <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> 职员                                                                                                                <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">13</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h4 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">#自连接<span class="comment">-- 把同一张表当作两张表来使用 需要给表命别名来区分 （表名 别名 表名 别名）列名不明确时要给列 AS 别名</span></span><br><span class="line">#开发中常用</span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line"><span class="comment">-- 把一张表当作两张表来使用 from后给同一张表命两个别名来作为两张表进行区分 列的输入使用 表别名.列的形式 条件限制找到关联处</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> worker.ename <span class="keyword">as</span> <span class="string">&#x27;woker&#x27;</span>,leader.ename <span class="keyword">as</span> <span class="string">&#x27;leader&#x27;</span> <span class="keyword">from</span> emp worker,emp leader <span class="keyword">where</span> worker.mgr<span class="operator">=</span>leader.empno;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> woker  <span class="operator">|</span> leader <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="operator">|</span> FORD   <span class="operator">|</span> JONES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SCOTT  <span class="operator">|</span> JONES  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JAMES  <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> TURNER <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MARTIN <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> WARD   <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> ALLEN  <span class="operator">|</span> BLAKE  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> MILLER <span class="operator">|</span> CLARK  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> CLARK  <span class="operator">|</span> KING   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> BLAKE  <span class="operator">|</span> KING   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> JONES  <span class="operator">|</span> KING   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> SMITH  <span class="operator">|</span> FORD   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------+--------+</span></span><br><span class="line"><span class="number">12</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h4 id="外连接★"><a href="#外连接★" class="headerlink" title="外连接★"></a>外连接★</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">JOIN</span> 按照功能大致分为如下三类：</span><br><span class="line"></span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span>（内连接,或等值连接）：获取两个表中字段匹配关系的记录。</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span>（左连接）：获取左表所有记录，即使右表没有对应匹配的记录。</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span>（右连接）： 与 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</span><br><span class="line"></span><br><span class="line"><span class="comment">-- </span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> title         <span class="operator">|</span> author       <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> 学习 PHP      <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> 学习 MySQL    <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> 学习 Java     <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> 学习 Python   <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> 学习 C        <span class="operator">|</span> FK           <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb2;</span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> author       <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> Google       <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">--------------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">INNER</span> <span class="keyword">JOIN</span>（内连接,或等值连接）：获取两个表中字段匹配关系的记录。</span><br><span class="line"><span class="comment">-- For instance -- (inner) join on</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1 <span class="keyword">join</span> tb2 <span class="keyword">on</span> tb1.author <span class="operator">=</span> tb2.author;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> title         <span class="operator">|</span> author       <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span> author       <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> 学习 PHP      <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> 学习 MySQL    <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> 学习 Java     <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> 学习 Python   <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"><span class="comment">-- 相当于使用where子句</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1 ,tb2 <span class="keyword">where</span> tb1.author <span class="operator">=</span> tb2.author;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> title         <span class="operator">|</span> author       <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span> author       <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> 学习 PHP      <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> 学习 MySQL    <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> 学习 Java     <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> 学习 Python   <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="number">4</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">LEFT</span> <span class="keyword">JOIN</span>（左连接）：获取左表所有记录，即使右表没有对应匹配的记录。</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1 <span class="keyword">left</span> <span class="keyword">join</span> tb2 <span class="keyword">on</span> tb1.author <span class="operator">=</span> tb2.author;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> title         <span class="operator">|</span> author       <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span> author       <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> 学习 PHP      <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> 学习 MySQL    <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> 学习 Java     <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> 学习 Python   <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">5</span> <span class="operator">|</span> 学习 C        <span class="operator">|</span> FK           <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span> <span class="keyword">NULL</span>         <span class="operator">|</span>  <span class="keyword">NULL</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">RIGHT</span> <span class="keyword">JOIN</span>（右连接）： 与 <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> tb1 <span class="keyword">right</span> <span class="keyword">join</span> tb2 <span class="keyword">on</span> tb1.author <span class="operator">=</span> tb2.author;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> title         <span class="operator">|</span> author       <span class="operator">|</span> <span class="type">date</span>       <span class="operator">|</span> author       <span class="operator">|</span> count <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">2</span> <span class="operator">|</span> 学习 MySQL    <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">1</span> <span class="operator">|</span> 学习 PHP      <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span> <span class="number">2017</span><span class="number">-04</span><span class="number">-12</span> <span class="operator">|</span> 菜鸟教程     <span class="operator">|</span>    <span class="number">10</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">4</span> <span class="operator">|</span> 学习 Python   <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2016</span><span class="number">-03</span><span class="number">-06</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>    <span class="number">3</span> <span class="operator">|</span> 学习 Java     <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span> <span class="number">2015</span><span class="number">-05</span><span class="number">-01</span> <span class="operator">|</span> RUNOOB.COM   <span class="operator">|</span>    <span class="number">20</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">NULL</span> <span class="operator">|</span> <span class="keyword">NULL</span>          <span class="operator">|</span> <span class="keyword">NULL</span>         <span class="operator">|</span> <span class="keyword">NULL</span>       <span class="operator">|</span> Google       <span class="operator">|</span>    <span class="number">22</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+---------------+--------------+------------+--------------+-------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">#约束</span><br><span class="line"><span class="comment">-- SQL 约束（Constraints）</span></span><br><span class="line"><span class="comment">-- SQL 约束用于规定表中的数据规则。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 如果存在违反约束的数据行为，行为会被约束终止。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 约束可以在创建表时规定（通过 CREATE TABLE 语句），或者在表创建之后规定（通过 ALTER TABLE 语句）。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">+</span> <span class="keyword">CONSTRAINT</span> 语法</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name</span><br><span class="line">(</span><br><span class="line">column_name1 data_type(size) constraint_name,</span><br><span class="line">column_name2 data_type(size) constraint_name,</span><br><span class="line">column_name3 data_type(size) constraint_name,</span><br><span class="line">....</span><br><span class="line">);</span><br><span class="line">在 <span class="keyword">SQL</span> 中，我们有如下约束：</span><br><span class="line"></span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="operator">-</span> 指示某列不能存储 <span class="keyword">NULL</span> 值。</span><br><span class="line"><span class="keyword">UNIQUE</span> <span class="operator">-</span> 保证某列的每行必须有唯一的值。</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY <span class="operator">-</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> 和 <span class="keyword">UNIQUE</span> 的结合。确保某列（或两个列多个列的结合）有唯一标识，有助于更容易更快速地找到表中的一个特定的记录。</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY <span class="operator">-</span> 保证一个表中的数据匹配另一个表中的值的参照完整性。</span><br><span class="line"><span class="keyword">CHECK</span> <span class="operator">-</span> 保证列中的值符合指定的条件。</span><br><span class="line"><span class="keyword">DEFAULT</span> <span class="operator">-</span> 规定没有给列赋值时的默认值</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过 show create table 表名 可以查看所有constraint -- 尤其是可以查看到忘记命名的constraint 系统自动生成的constraint命名</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student_test2;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span>         <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                                                                                                                                                                                                                                                                                               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> student_test2 <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student_test2` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">COLLATE</span> utf8mb3_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;CHINA&#x27;</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2000-01-01&#x27;</span>,</span><br><span class="line">  KEY `fk_id` (`id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fk_id` <span class="keyword">FOREIGN</span> KEY (`id`) <span class="keyword">REFERENCES</span> `student_test1` (`id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `chk_birthday` <span class="keyword">CHECK</span> ((`birthday` <span class="keyword">between</span> _utf8mb3<span class="string">&#x27;1983-01-01&#x27;</span> <span class="keyword">and</span> _utf8mb3<span class="string">&#x27;2002-01-01&#x27;</span>)),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `student_test2_chk_1` <span class="keyword">CHECK</span> ((`id` <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>))</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb3_bin <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="not-null"><a href="#not-null" class="headerlink" title="not null"></a>not null</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束</span><br><span class="line">#在默认的情况下，表的列接受 <span class="keyword">NULL</span> 值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束</span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束强制列不接受 <span class="keyword">NULL</span> 值。</span><br><span class="line"></span><br><span class="line"><span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束强制字段始终包含值。这意味着，如果不向字段添加值，就无法插入新记录或者更新记录。</span><br><span class="line"></span><br><span class="line">下面的 <span class="keyword">SQL</span> 强制 &quot;ID&quot; 列、 &quot;LastName&quot; 列以及 &quot;FirstName&quot; 列不接受 <span class="keyword">NULL</span> 值：</span><br><span class="line"></span><br><span class="line">实例</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons (</span><br><span class="line">    ID <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    LastName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    FirstName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    Age <span class="type">int</span></span><br><span class="line">);</span><br><span class="line">#添加 <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束</span><br><span class="line">在一个已创建的表的 &quot;Age&quot; 字段中添加 <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束如下所示：</span><br><span class="line"></span><br><span class="line">实例</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">MODIFY Age <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 modify id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">#删除 <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束</span><br><span class="line">在一个已创建的表的 &quot;Age&quot; 字段中删除 <span class="keyword">NOT</span> <span class="keyword">NULL</span> 约束如下所示：</span><br><span class="line"></span><br><span class="line">实例</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">MODIFY Age <span class="type">int</span> <span class="keyword">NULL</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 modify id <span class="type">int</span> <span class="keyword">null</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.06</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> YES  <span class="operator">|</span>     <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h5 id="unique"><a href="#unique" class="headerlink" title="unique"></a>unique</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">UNIQUE</span> 约束<span class="comment">-- 如果没有指定not null 则unique字段可以有多个null；</span></span><br><span class="line"><span class="comment">-- 如果制定了not null 同时指定了unique 等同于primary key</span></span><br><span class="line"><span class="keyword">UNIQUE</span> 约束唯一标识数据库表中的每条记录。</span><br><span class="line"></span><br><span class="line"><span class="keyword">UNIQUE</span> 和 <span class="keyword">PRIMARY</span> KEY 约束均为列或列集合提供了唯一性的保证。</span><br><span class="line"></span><br><span class="line"><span class="keyword">PRIMARY</span> KEY 约束拥有自动定义的 <span class="keyword">UNIQUE</span> 约束。</span><br><span class="line"></span><br><span class="line">请注意，每个表可以有多个 <span class="keyword">UNIQUE</span> 约束，但是每个表只能有一个 <span class="keyword">PRIMARY</span> KEY 约束。</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 时的 <span class="keyword">SQL</span> <span class="keyword">UNIQUE</span> 约束</span><br><span class="line">下面的 <span class="keyword">SQL</span> 在 &quot;Persons&quot; 表创建时在 &quot;P_Id&quot; 列上创建 <span class="keyword">UNIQUE</span> 约束：</span><br><span class="line"></span><br><span class="line">MySQL：</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">(</span><br><span class="line">P_Id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">LastName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">FirstName <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">Address <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">City <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">UNIQUE</span> (P_Id)</span><br><span class="line">)</span><br><span class="line">#<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 时的 <span class="keyword">SQL</span> <span class="keyword">UNIQUE</span> 约束</span><br><span class="line">当表已被创建时，如需在 &quot;P_Id&quot; 列创建 <span class="keyword">UNIQUE</span> 约束，请使用下面的 <span class="keyword">SQL</span>：</span><br><span class="line"></span><br><span class="line">MySQL <span class="operator">/</span> <span class="keyword">SQL</span> Server <span class="operator">/</span> Oracle <span class="operator">/</span> MS Access：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> (P_Id)</span><br><span class="line">如需命名 <span class="keyword">UNIQUE</span> 约束，并定义多个列的 <span class="keyword">UNIQUE</span> 约束，请使用下面的 <span class="keyword">SQL</span> 语法：</span><br><span class="line"></span><br><span class="line">MySQL <span class="operator">/</span> <span class="keyword">SQL</span> Server <span class="operator">/</span> Oracle <span class="operator">/</span> MS Access：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uc_PersonID <span class="keyword">UNIQUE</span> (P_Id,LastName)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 <span class="keyword">add</span> <span class="keyword">constraint</span> <span class="keyword">unique</span> (id);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.07</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="keyword">NULL</span>    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#撤销 <span class="keyword">UNIQUE</span> 约束</span><br><span class="line">如需撤销 <span class="keyword">UNIQUE</span> 约束，请使用下面的 <span class="keyword">SQL</span>：</span><br><span class="line"></span><br><span class="line">MySQL：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">DROP</span> INDEX uc_PersonID</span><br></pre></td></tr></table></figure>



<h5 id="primary-key"><a href="#primary-key" class="headerlink" title="primary key"></a>primary key</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br></pre></td><td class="code"><pre><span class="line">#主键</span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">PRIMARY</span> KEY 约束</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY 约束唯一标识数据库表中的每条记录。</span><br><span class="line"></span><br><span class="line">主键必须包含唯一的值。</span><br><span class="line"></span><br><span class="line">主键列不能包含 <span class="keyword">NULL</span> 值。</span><br><span class="line"></span><br><span class="line">每个表都应该有一个主键，并且每个表只能有一个主键</span><br><span class="line"></span><br><span class="line">#单列主键</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> sutdennt_test1 </span><br><span class="line">(`id` <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,`name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> &quot;学生&quot;,`major` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> &quot;IT&quot;,</span><br><span class="line"> <span class="keyword">primary</span> key(id))</span><br><span class="line"> <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">2</span> warnings (<span class="number">0.15</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1002</span>,<span class="string">&#x27;James&#x27;</span>,<span class="string">&#x27;Basketball&#x27;</span>),(<span class="number">1003</span>,<span class="string">&#x27;Ivring&#x27;</span>,<span class="string">&#x27;Basketball&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">2</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line">Records: <span class="number">2</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name       <span class="operator">|</span> major      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span> EddieZhang <span class="operator">|</span> Java       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span> James      <span class="operator">|</span> Basketball <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1003</span> <span class="operator">|</span> Ivring     <span class="operator">|</span> Basketball <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;Durant&#x27;</span>,<span class="string">&#x27;Basketball&#x27;</span>);<span class="comment">-- 主键的数据必须非空且唯一</span></span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1001&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;student_test1.PRIMARY&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1004</span>,<span class="string">&#x27;Durant&#x27;</span>,<span class="string">&#x27;Basketball&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line">#（复合主键）多列主键<span class="comment">-- 将多个列作为主键 </span></span><br><span class="line">#只有同时满足主键的多个列都相等时才会ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1001-EddieZhang&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;student_test1.PRIMARY&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 <span class="keyword">add</span> <span class="keyword">primary</span> key(id,name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;EddieZ&#x27;</span>,<span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.14</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> id   <span class="operator">|</span> name       <span class="operator">|</span> major      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span> EddieZ     <span class="operator">|</span> Java       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1001</span> <span class="operator">|</span> EddieZhang <span class="operator">|</span> Java       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1002</span> <span class="operator">|</span> James      <span class="operator">|</span> Basketball <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1003</span> <span class="operator">|</span> Ivring     <span class="operator">|</span> Basketball <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">1004</span> <span class="operator">|</span> Durant     <span class="operator">|</span> Basketball <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------+------------+------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;EddieZhang&#x27;</span>,<span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1001-EddieZhang&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;student_test1.PRIMARY&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span></span><br><span class="line">#<span class="keyword">alter</span> <span class="keyword">table</span> <span class="keyword">add</span>主键</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 <span class="keyword">add</span> <span class="keyword">primary</span> key(id,name);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.05</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">#<span class="keyword">drop</span> 删除主键</span><br><span class="line">删除<span class="keyword">PRIMARY</span> KEY约束时，不论约束条件为一列还是多列，对于MySQL，撤销都是</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY</span><br><span class="line">由于<span class="keyword">PRIMARY</span> KEY唯一性，MYSQL处理办法简单</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test1 <span class="keyword">values</span>(<span class="number">1001</span>,<span class="string">&#x27;EddieZhang&#x27;</span>,<span class="string">&#x27;Java&#x27;</span>);</span><br><span class="line">ERROR <span class="number">1062</span> (<span class="number">23000</span>): Duplicate entry <span class="string">&#x27;1001-EddieZhang&#x27;</span> <span class="keyword">for</span> key <span class="string">&#x27;student_test1.PRIMARY&#x27;</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span> PRI <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test1 <span class="keyword">drop</span> <span class="keyword">primary</span> key;</span><br><span class="line">Query OK, <span class="number">5</span> <span class="keyword">rows</span> affected (<span class="number">0.02</span> sec)</span><br><span class="line">Records: <span class="number">5</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">describe</span> student_test1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> Field <span class="operator">|</span> Type        <span class="operator">|</span> <span class="keyword">Null</span> <span class="operator">|</span> Key <span class="operator">|</span> <span class="keyword">Default</span> <span class="operator">|</span> Extra <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="operator">|</span> id    <span class="operator">|</span> <span class="type">int</span>         <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> <span class="number">0</span>       <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> name  <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> 学生    <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> major <span class="operator">|</span> <span class="type">varchar</span>(<span class="number">25</span>) <span class="operator">|</span> <span class="keyword">NO</span>   <span class="operator">|</span>     <span class="operator">|</span> IT      <span class="operator">|</span>       <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+-------------+------+-----+---------+-------+</span></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="foreign-key"><a href="#foreign-key" class="headerlink" title="foreign key"></a>foreign key</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> <span class="keyword">FOREIGN</span> KEY 约束<span class="comment">-- 用于定义主表和从表之间的关系</span></span><br><span class="line"><span class="comment">-- 外键约束要定义在从表上，主表则必须具有主键约束或者unique约束。</span></span><br><span class="line"><span class="comment">-- 当定义外键后，要求外键列数据必须在在主表的主键列存在或者为null;</span></span><br><span class="line"><span class="comment">-- FOREIGN KEY 约束用于预防破坏表之间连接的行为。</span></span><br><span class="line"><span class="comment">-- FOREIGN KEY 约束也能防止非法数据插入外键列，因为它必须是它指向的那个表中的值之一</span></span><br><span class="line"><span class="comment">-- 表的engine必须是innodb 这样的表才支持外键;</span></span><br><span class="line"><span class="comment">-- 外键字段类型要与主键字段类型一致（长度可以不同）</span></span><br><span class="line">一个表中的 <span class="keyword">FOREIGN</span> KEY 指向另一个表中的 <span class="keyword">UNIQUE</span> KEY(唯一约束的键)</span><br><span class="line"><span class="comment">-- 在创建外键约束时，必须先创建外键约束所依赖的表（先创建主表），并且该列为该表的主键</span></span><br><span class="line"><span class="comment">-- 子表：谁创建外键谁就是子表 父表：这个外键所依赖的表</span></span><br><span class="line">一、删除时，未指定cascade时</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span>）删除父表<span class="operator">/</span>数据</span><br><span class="line"></span><br><span class="line">      a.因为子表与父表一一对应，删除父表数据时，需要先把子表对应数据删除否则无法删除</span><br><span class="line"></span><br><span class="line">     b. 同理，删除表的时候，也需要先删除子表再删除父表</span><br><span class="line"></span><br><span class="line">解决方案：</span><br><span class="line"></span><br><span class="line">     a.指定cascade，删除父表、数据</span><br><span class="line"></span><br><span class="line">        CASCADE指当删除主表中被引用列的数据时，级联删除子表中相应的数据行。</span><br><span class="line"></span><br><span class="line">     b.禁用约束（子表的外键约束）</span><br><span class="line"></span><br><span class="line">         <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 disable <span class="keyword">constraint</span> 约束名;</span><br><span class="line"></span><br><span class="line"> <span class="number">2</span>）删除子表：可以删除子表或者数据不报错</span><br><span class="line"></span><br><span class="line">二、更新时</span><br><span class="line"></span><br><span class="line">        a.更新父表会违反约束</span><br><span class="line"></span><br><span class="line">        b.可以更新子表</span><br><span class="line"></span><br><span class="line">        c.没有针对约束的级联更新</span><br><span class="line"></span><br><span class="line">三、插入时</span><br><span class="line"></span><br><span class="line">         a.父表可以插入</span><br><span class="line"></span><br><span class="line">         b.子表插入会违反约束</span><br><span class="line">         </span><br><span class="line">#在创建表的时候指定外键约束</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名</span><br><span class="line">    (</span><br><span class="line">        column1 datatype <span class="keyword">null</span><span class="operator">/</span><span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">        column2 datatype <span class="keyword">null</span><span class="operator">/</span><span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">        ...</span><br><span class="line">        <span class="keyword">CONSTRAINT</span> 外键约束名 <span class="keyword">FOREIGN</span> KEY  (column1,column2,... column_n) </span><br><span class="line">        <span class="keyword">REFERENCES</span> 外键依赖的表 (column1,column2,...column_n)</span><br><span class="line">        <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE<span class="comment">--级联删除</span></span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line">    mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> student_test2 (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `id` <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `address` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;CHINA&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `birthday` <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;2000-01-01&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">constraint</span> fk_id <span class="keyword">foreign</span> key (id) <span class="keyword">references</span> student_test1 (id))</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">2</span> warnings (<span class="number">0.03</span> sec)</span><br><span class="line"></span><br><span class="line">#在创建表后增加外键约束</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名</span><br><span class="line">    <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> 外键约束名</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (column1, column2,...column_n) </span><br><span class="line">    <span class="keyword">REFERENCES</span> 外键所依赖的表 (column1,column2,...column_n)</span><br><span class="line">    <span class="keyword">ON</span> <span class="keyword">DELETE</span> CASCADE;<span class="comment">--级联删除</span></span><br><span class="line">    </span><br><span class="line">    mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test2 <span class="keyword">add</span> <span class="keyword">constraint</span> fk_id <span class="keyword">foreign</span> key (id) <span class="keyword">references</span> student_test1 (id);</span><br><span class="line">Query OK, <span class="number">4</span> <span class="keyword">rows</span> affected (<span class="number">0.15</span> sec)</span><br><span class="line">Records: <span class="number">4</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">#撤销 <span class="keyword">FOREIGN</span> KEY 约束</span><br><span class="line">如需撤销 <span class="keyword">FOREIGN</span> KEY 约束，请使用下面的 <span class="keyword">SQL</span>：</span><br><span class="line"></span><br><span class="line">MySQL：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Orders</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY fk_PerOrders</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test2 <span class="keyword">drop</span> <span class="keyword">constraint</span> fk_id;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="check"><a href="#check" class="headerlink" title="check"></a>check</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">check</span></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">CHECK</span> 约束</span><br><span class="line"><span class="keyword">CHECK</span> 约束用于限制列中的值的范围。</span><br><span class="line"></span><br><span class="line">如果对单个列定义 <span class="keyword">CHECK</span> 约束，那么该列只允许特定的值。</span><br><span class="line"></span><br><span class="line">如果对一个表定义 <span class="keyword">CHECK</span> 约束，那么此约束会基于行中其他列的值在特定的列中对值进行限制</span><br><span class="line"></span><br><span class="line">#<span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 时的 <span class="keyword">SQL</span> <span class="keyword">CHECK</span> 约束</span><br><span class="line">MySQL：</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">(</span><br><span class="line">P_Id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">LastName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">FirstName <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">Address <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">City <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">CHECK</span> (P_Id<span class="operator">&gt;</span><span class="number">0</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">table</span> student_test3 (</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `id` <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `address` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;CHINA&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> `birthday` <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;2000-01-01&#x27;</span>,</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">constraint</span> fk_student_test3_id <span class="keyword">foreign</span> key (id) <span class="keyword">references</span> student_test1 (id),</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">constraint</span> chk_id <span class="keyword">check</span> (id <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>))</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected, <span class="number">2</span> warnings (<span class="number">0.02</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 时的 <span class="keyword">SQL</span> <span class="keyword">CHECK</span> 约束</span><br><span class="line">MySQL <span class="operator">/</span> <span class="keyword">SQL</span> Server <span class="operator">/</span> Oracle <span class="operator">/</span> MS Access:</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CHECK</span> (P_Id<span class="operator">&gt;</span><span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">add</span> <span class="keyword">constraint</span> chk_birth <span class="keyword">check</span> (birthday <span class="keyword">between</span> <span class="string">&#x27;1985-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2002-01-01&#x27;</span>)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br><span class="line">#如需命名 <span class="keyword">CHECK</span> 约束，并定义多个列的 <span class="keyword">CHECK</span> 约束，请使用下面的 <span class="keyword">SQL</span> 语法</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">(</span><br><span class="line">P_Id <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">LastName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">FirstName <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">Address <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">City <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> chk_Person <span class="keyword">CHECK</span> (P_Id<span class="operator">&gt;</span><span class="number">0</span> <span class="keyword">AND</span> City<span class="operator">=</span><span class="string">&#x27;Sandnes&#x27;</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test3 <span class="keyword">add</span> <span class="keyword">constraint</span> chk_student_test3 <span class="keyword">check</span> (id <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span></span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">and</span> birthday <span class="keyword">between</span> <span class="string">&#x27;1985-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2002-01-01&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line">Records: <span class="number">0</span>  Duplicates: <span class="number">0</span>  Warnings: <span class="number">0</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">show</span> <span class="keyword">create</span> <span class="keyword">table</span> student_test3;</span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">Table</span>         <span class="operator">|</span> <span class="keyword">Create</span> <span class="keyword">Table</span>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="operator">|</span> student_test3 <span class="operator">|</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student_test3` (</span><br><span class="line">  `id` <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">  `address` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">COLLATE</span> utf8mb3_bin <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;CHINA&#x27;</span>,</span><br><span class="line">  `birthday` <span class="type">date</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;2000-01-01&#x27;</span>,</span><br><span class="line">  KEY `fk_student_test3_id` (`id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `fk_student_test3_id` <span class="keyword">FOREIGN</span> KEY (`id`) <span class="keyword">REFERENCES</span> `student_test1` (`id`),</span><br><span class="line">  <span class="keyword">CONSTRAINT</span> `chk_student_test3` <span class="keyword">CHECK</span> (((`id` <span class="keyword">between</span> <span class="number">0</span> <span class="keyword">and</span> <span class="number">100</span>) <span class="keyword">and</span> (`birthday` <span class="keyword">between</span> _utf8mb3<span class="string">&#x27;1985-01-01&#x27;</span> <span class="keyword">and</span> _utf8mb3<span class="string">&#x27;2002-01-01&#x27;</span>)))</span><br><span class="line">) ENGINE<span class="operator">=</span>InnoDB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8mb3 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8mb3_bin <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">---------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span></span><br><span class="line"><span class="number">1</span> <span class="type">row</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line">#撤销 <span class="keyword">CHECK</span> 约束</span><br><span class="line"><span class="keyword">SQL</span> Server <span class="operator">/</span> Oracle <span class="operator">/</span> MS Access：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> chk_Person</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">alter</span> <span class="keyword">table</span> student_test3</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> <span class="keyword">add</span> <span class="keyword">constraint</span> chk_birth <span class="keyword">check</span> (birthday <span class="keyword">between</span> <span class="string">&#x27;1985-01-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;2002-01-01&#x27;</span>)</span><br><span class="line">    <span class="operator">-</span><span class="operator">&gt;</span> ;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.04</span> sec)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220904211021997.png" alt="image-20220904211021997"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#例题训练</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> goods (</span><br><span class="line">goods_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">PRIMARY</span> key,</span><br><span class="line">goods_name <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">unitprice <span class="keyword">double</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">category <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">provider <span class="type">varchar</span>(<span class="number">35</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> goods modify unitprice <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">constraint</span> chk_price <span class="keyword">check</span> (unitprice <span class="operator">&gt;=</span> <span class="number">1.0</span> <span class="keyword">and</span> unitprice <span class="operator">&lt;=</span> <span class="number">9999.99</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> customer (</span><br><span class="line">customer_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">primary</span> key,</span><br><span class="line">`name` <span class="type">varchar</span>(<span class="number">25</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`address` <span class="type">varchar</span>(<span class="number">55</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">`email` <span class="type">varchar</span>(<span class="number">55</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span> <span class="keyword">unique</span>,</span><br><span class="line">`sex` enum (<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">card_id <span class="type">varchar</span>(<span class="number">35</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> purchase (</span><br><span class="line">order_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">primary</span> key,</span><br><span class="line">customer_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">goods_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line"><span class="keyword">constraint</span> fk_customer <span class="keyword">foreign</span> key (customer_id) <span class="keyword">references</span> customer (customer_id),</span><br><span class="line"><span class="keyword">constraint</span> fk_goods <span class="keyword">foreign</span> key (goods_id) <span class="keyword">references</span> goods (goods_id)</span><br><span class="line">)<span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="auto-increment"><a href="#auto-increment" class="headerlink" title="auto_increment"></a>auto_increment</h5><p><strong>清空数据表并且自增从头开始的sql命令</strong></p>
<p><strong>truncate</strong> table table_name; <em>&#x2F;&#x2F;table_name 该数据表名称</em> </p>
<p>删除完还没有新增数据，即还没有出现不连贯的数据ID时，执行以下语句：</p>
<p>ALTER TABLE 表名 AUTO_INCREMENT &#x3D; 1;<br>1<br><strong>如果已知下一条数据自增的ID（假设是10），可以直接写成ALTER TABLE 表名 AUTO_INCREMENT &#x3D; 10;这样再插入数据时，自增ID会从10开始</strong>，也可以用这个语法来跳过一些编号。此外，如果AUTO_INCREMENT 的值小于ID的最大值，那么ID是从MAX(ID)+1开始自增，所以当AUTO_INCREMENT &#x3D; 1时，一般默认ID是从最大值加一开始自增的。</p>
<p>表中已经出现不连贯的数据ID时，执行以下语句进行修改</p>
<p>SET @auto_id &#x3D; 0;<br>UPDATE 表名 SET 自增字段名 &#x3D; (@auto_id :&#x3D; @auto_id + 1);<br>ALTER TABLE 表名 AUTO_INCREMENT &#x3D; 1;</p>
<p>如果需要清空表的数据的话，最好使用TRUNCATE TABLE 表名来删除，这样新增的数据自增ID会从1开始，如果使用DELETE来删除，新增的数据会沿着之前的ID</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">#自增长 auto increment</span><br><span class="line">#AUTO INCREMENT 字段</span><br><span class="line">我们通常希望在每次插入新记录时，自动地创建主键字段的值。</span><br><span class="line"></span><br><span class="line">我们可以在表中创建一个 auto<span class="operator">-</span>increment 字段。</span><br><span class="line"></span><br><span class="line">用于 MySQL 的语法</span><br><span class="line">下面的 <span class="keyword">SQL</span> 语句把 &quot;Persons&quot; 表中的 &quot;ID&quot; 列定义为 auto<span class="operator">-</span>increment 主键字段：</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Persons</span><br><span class="line">(</span><br><span class="line">ID <span class="type">int</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">LastName <span class="type">varchar</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">FirstName <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">Address <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line">City <span class="type">varchar</span>(<span class="number">255</span>),</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (ID)</span><br><span class="line">)</span><br><span class="line">MySQL 使用 AUTO_INCREMENT 关键字来执行 auto<span class="operator">-</span>increment 任务。</span><br><span class="line"></span><br><span class="line">默认地，AUTO_INCREMENT 的开始值是 <span class="number">1</span>，每条新记录递增 <span class="number">1</span>。</span><br><span class="line"></span><br><span class="line">要让 AUTO_INCREMENT 序列以其他的值起始，请使用下面的 <span class="keyword">SQL</span> 语法：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> Persons AUTO_INCREMENT<span class="operator">=</span><span class="number">100</span></span><br><span class="line">要在 &quot;Persons&quot; 表中插入新记录，我们不必为 &quot;ID&quot; 列规定值（会自动添加一个唯一的值）：</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Persons (FirstName,LastName)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;Lars&#x27;</span>,<span class="string">&#x27;Monsen&#x27;</span>)</span><br><span class="line">上面的 <span class="keyword">SQL</span> 语句会在 &quot;Persons&quot; 表中插入一条新记录。&quot;ID&quot; 列会被赋予一个唯一的值。&quot;FirstName&quot; 列会被设置为 &quot;Lars&quot;，&quot;LastName&quot; 列会被设置为 &quot;Monsen&quot;</span><br><span class="line"></span><br><span class="line">#给已经存在的colume添加自增语法：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name CHANGE column_name column_name data_type(size) constraint_name AUTO_INCREMENT;</span><br><span class="line">比如：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student CHANGE id id <span class="type">INT</span>( <span class="number">11</span> ) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT;</span><br><span class="line"></span><br><span class="line">#在添加数据时给自增长字段列指定值；则以指定的值为准且后续的值按照指定值开始自增长</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_test4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> 张锦豪    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">101</span> <span class="operator">|</span> 欧文      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">102</span> <span class="operator">|</span> 詹姆斯    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">103</span> <span class="operator">|</span> 杜兰特    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">104</span> <span class="operator">|</span> 库里      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test4 <span class="keyword">values</span>(<span class="number">660</span>,<span class="string">&#x27;东七七&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">insert</span> <span class="keyword">into</span> student_test4 (`name`) <span class="keyword">values</span>(<span class="string">&#x27;塔图姆&#x27;</span>);</span><br><span class="line">Query OK, <span class="number">1</span> <span class="type">row</span> affected (<span class="number">0.12</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_test4;</span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="operator">|</span> id  <span class="operator">|</span> name      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="number">100</span> <span class="operator">|</span> 张锦豪    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">101</span> <span class="operator">|</span> 欧文      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">102</span> <span class="operator">|</span> 詹姆斯    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">103</span> <span class="operator">|</span> 杜兰特    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">104</span> <span class="operator">|</span> 库里      <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">660</span> <span class="operator">|</span> 东七七    <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> <span class="number">661</span> <span class="operator">|</span> 塔图姆    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-----+-----------+</span></span><br><span class="line"><span class="number">7</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br></pre></td></tr></table></figure>



<h4 id="索引★"><a href="#索引★" class="headerlink" title="索引★"></a>索引★</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">MySQL索引的建立对于MySQL的高效运行是很重要的，索引可以大大提高MySQL的检索速度。只对创建了索引的列有效</span><br><span class="line"></span><br><span class="line">打个比方，如果合理的设计且使用索引的MySQL是一辆兰博基尼的话，那么没有设计和使用索引的MySQL就是一个人力三轮车。</span><br><span class="line"></span><br><span class="line">拿汉语字典的目录页（索引）打比方，我们可以按拼音、笔画、偏旁部首等排序的目录（索引）快速查找到需要的字。</span><br><span class="line"></span><br><span class="line">索引分单列索引和组合索引。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索引包含多个列。</span><br><span class="line"></span><br><span class="line">创建索引时，你需要确保该索引是应用在 <span class="keyword">SQL</span> 查询语句的条件(一般作为 <span class="keyword">WHERE</span> 子句的条件)。</span><br><span class="line"></span><br><span class="line">实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</span><br><span class="line"></span><br><span class="line">上面都在说使用索引的好处，但过多的使用索引将会造成滥用。因此索引也会有它的缺点：虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行<span class="keyword">INSERT</span>、<span class="keyword">UPDATE</span>和<span class="keyword">DELETE</span>。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。</span><br><span class="line"></span><br><span class="line">建立索引会占用磁盘空间的索引文件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905074911013.png" alt="image-20220905074911013"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905075120329.png" alt="image-20220905075120329"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905102533069.png" alt="image-20220905102533069"></p>
<h5 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a>主键索引</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#主键索引</span><br><span class="line">主键自动为主索引（类型<span class="keyword">primary</span> key）</span><br></pre></td></tr></table></figure>

<h5 id="唯一索引（UNIQUE）"><a href="#唯一索引（UNIQUE）" class="headerlink" title="唯一索引（UNIQUE）"></a>唯一索引（UNIQUE）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#唯一索引</span><br><span class="line">它与前面的普通索引类似，不同的就是：索引列的值必须唯一，但允许有空值。如果是组合索引，则列值的组合必须唯一。它有以下几种创建方式：</span><br><span class="line"></span><br><span class="line">创建索引</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX indexName <span class="keyword">ON</span> mytable(username(length)) </span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">unique</span> index index_emp <span class="keyword">on</span> emp(empno);</span><br><span class="line"></span><br><span class="line">修改表结构</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> mytable <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> [indexName] (username(length))</span><br><span class="line">创建表的时候直接指定</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line"> </span><br><span class="line">ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line"> </span><br><span class="line">username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line"> </span><br><span class="line"><span class="keyword">UNIQUE</span> [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);  </span><br><span class="line">使用<span class="keyword">ALTER</span> 命令添加和删除索引</span><br><span class="line">有四种方式来添加数据表的索引：</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (column_list): 该语句添加一个主键，这意味着索引值必须是唯一的，且不能为<span class="keyword">NULL</span>。</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> index_name (column_list): 这条语句创建索引的值必须是唯一的（除了<span class="keyword">NULL</span>外，<span class="keyword">NULL</span>可能会出现多次）。</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> INDEX index_name (column_list): 添加普通索引，索引值可出现多次。</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">ADD</span> FULLTEXT index_name (column_list):该语句指定了索引为 FULLTEXT ，用于全文索引。</span><br><span class="line">以下实例为在表中添加索引。</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> INDEX (c);</span><br><span class="line">你还可以在 <span class="keyword">ALTER</span> 命令中使用 <span class="keyword">DROP</span> 子句来删除索引。尝试以下实例删除索引:</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> INDEX c;</span><br><span class="line">使用 <span class="keyword">ALTER</span> 命令添加和删除主键</span><br><span class="line">主键作用于列上（可以一个列或多个列联合主键），添加主键索引时，你需要确保该主键默认不为空（<span class="keyword">NOT</span> <span class="keyword">NULL</span>）。实例如下：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl MODIFY i <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (i);</span><br><span class="line">你也可以使用 <span class="keyword">ALTER</span> 命令删除主键：</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> testalter_tbl <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line">删除主键时只需指定 <span class="keyword">PRIMARY</span> KEY，但在删除索引时，你必须知道索引名</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="普通索引（INDEX）"><a href="#普通索引（INDEX）" class="headerlink" title="普通索引（INDEX）"></a>普通索引（INDEX）</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#普通索引</span><br><span class="line">创建索引</span><br><span class="line">这是最基本的索引，它没有任何限制。它有以下几种创建方式：</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX indexName <span class="keyword">ON</span> table_name (column_name)</span><br><span class="line">如果是<span class="type">CHAR</span>，<span class="type">VARCHAR</span>类型，length可以小于字段实际长度；如果是<span class="type">BLOB</span>和TEXT类型，必须指定 length</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> index index_emp <span class="keyword">on</span> emp (empno);</span><br><span class="line"></span><br><span class="line">修改表结构(添加索引)</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">table</span> tableName <span class="keyword">ADD</span> INDEX indexName(columnName)</span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp.emp <span class="keyword">add</span> index index_emp (empno);</span><br><span class="line"></span><br><span class="line">创建表的时候直接指定</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(  </span><br><span class="line"> </span><br><span class="line">ID <span class="type">INT</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>,   </span><br><span class="line"> </span><br><span class="line">username <span class="type">VARCHAR</span>(<span class="number">16</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line"> </span><br><span class="line">INDEX [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);  </span><br><span class="line">删除索引的语法</span><br><span class="line"><span class="keyword">DROP</span> INDEX [indexName] <span class="keyword">ON</span> mytable;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="全文索引"><a href="#全文索引" class="headerlink" title="全文索引"></a>全文索引</h5><h4 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h4><p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905103719377.png" alt="image-20220905103719377"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905104030470.png" alt="image-20220905104030470"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905235904013.png" alt="image-20220905235904013"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905104709042.png" alt="image-20220905104709042"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905104832325.png" alt="image-20220905104832325"></p>
<h5 id="事务管理"><a href="#事务管理" class="headerlink" title="事务管理"></a>事务管理</h5><h5 id="save-point"><a href="#save-point" class="headerlink" title="save point"></a>save point</h5><h5 id="rollback"><a href="#rollback" class="headerlink" title="rollback"></a>rollback</h5><h5 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h5><h5 id="事务控制语句"><a href="#事务控制语句" class="headerlink" title="事务控制语句"></a>事务控制语句</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span> 或 <span class="keyword">START</span> TRANSACTION 显式地开启一个事务；</span><br><span class="line"></span><br><span class="line"><span class="keyword">COMMIT</span> 也可以使用 <span class="keyword">COMMIT</span> WORK，不过二者是等价的。<span class="keyword">COMMIT</span> 会提交事务，并使已对数据库进行的所有修改成为永久性的；</span><br><span class="line"></span><br><span class="line"><span class="keyword">ROLLBACK</span> 也可以使用 <span class="keyword">ROLLBACK</span> WORK，不过二者是等价的。回滚会结束用户的事务，并撤销正在进行的所有未提交的修改；</span><br><span class="line"></span><br><span class="line"><span class="keyword">SAVEPOINT</span> identifier，<span class="keyword">SAVEPOINT</span> 允许在事务中创建一个保存点，一个事务中可以有多个 <span class="keyword">SAVEPOINT</span>；</span><br><span class="line"></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> identifier 删除一个事务的保存点，当没有指定的保存点时，执行该语句会抛出一个异常；</span><br><span class="line"></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> identifier 把事务回滚到标记点；</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> TRANSACTION 用来设置事务的隔离级别。InnoDB 存储引擎提供事务的隔离级别有READ UNCOMMITTED、READ COMMITTED、REPEATABLE READ 和 SERIALIZABLE。</span><br><span class="line">MYSQL 事务处理主要有两种方法：</span><br><span class="line"><span class="number">1</span>、用 <span class="keyword">BEGIN</span>, <span class="keyword">ROLLBACK</span>, <span class="keyword">COMMIT</span>来实现</span><br><span class="line"></span><br><span class="line"><span class="keyword">BEGIN</span> 开始一个事务</span><br><span class="line"><span class="keyword">ROLLBACK</span> 事务回滚</span><br><span class="line"><span class="keyword">COMMIT</span> 事务确认</span><br><span class="line"><span class="number">2</span>、直接用 <span class="keyword">SET</span> 来改变 MySQL 的自动提交模式:</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT<span class="operator">=</span><span class="number">0</span> 禁止自动提交</span><br><span class="line"><span class="keyword">SET</span> AUTOCOMMIT<span class="operator">=</span><span class="number">1</span> 开启自动提交</span><br></pre></td></tr></table></figure>



<h5 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h5><p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905105530766.png" alt="image-20220905105530766"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905105812053.png" alt="image-20220905105812053"></p>
<h5 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">事务是必须满足<span class="number">4</span>个条件（ACID）：：原子性（Atomicity，或称不可分割性）、一致性（Consistency）、隔离性（Isolation，又称独立性）、持久性（Durability）。</span><br><span class="line"></span><br><span class="line">原子性：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（<span class="keyword">Rollback</span>）到事务开始前的状态，就像这个事务从来没有执行过一样。</span><br><span class="line"></span><br><span class="line">一致性：在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</span><br><span class="line"></span><br><span class="line">隔离性：数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</span><br><span class="line"></span><br><span class="line">持久性：事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</span><br></pre></td></tr></table></figure>



<h4 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h4><p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220905144613234.png" alt="image-20220905144613234"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">#<span class="keyword">SQL</span> 视图（Views）</span><br><span class="line">视图是可视化的表。</span><br><span class="line"></span><br><span class="line">本章讲解如何创建、更新和删除视图。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 语句</span><br><span class="line">在 <span class="keyword">SQL</span> 中，视图是基于 <span class="keyword">SQL</span> 语句的结果集的可视化的表。</span><br><span class="line"></span><br><span class="line">视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。</span><br><span class="line"></span><br><span class="line">您可以向视图添加 <span class="keyword">SQL</span> 函数、<span class="keyword">WHERE</span> 以及 <span class="keyword">JOIN</span> 语句，也可以呈现数据，就像这些数据来自于某个单一的表一样。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 语法</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> view_name <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line">注释：视图总是显示最新的数据！每当用户查询视图时，数据库引擎通过使用视图的 <span class="keyword">SQL</span> 语句重建数据</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">view</span> view_emp1 <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> view_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager  <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk    <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">SQL</span> 更新视图</span><br><span class="line">您可以使用下面的语法来更新视图：</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> 语法</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> view_name <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> column_name(s)</span><br><span class="line"><span class="keyword">FROM</span> table_name</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">condition</span></span><br><span class="line">现在，我们希望向 &quot;Current Product List&quot; 视图添加 &quot;Category&quot; 列。我们将通过下列 <span class="keyword">SQL</span> 更新视图：</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> [<span class="keyword">Current</span> Product List] <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> ProductID,ProductName,Category</span><br><span class="line"><span class="keyword">FROM</span> Products</span><br><span class="line"><span class="keyword">WHERE</span> Discontinued<span class="operator">=</span><span class="keyword">No</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">view</span> view_emp1 <span class="keyword">as</span> <span class="keyword">select</span> empno,ename,job,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.12</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> view_emp1;</span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span> empno <span class="operator">|</span> ename  <span class="operator">|</span> job      <span class="operator">|</span> deptno <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+--------+</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7499</span> <span class="operator">|</span> ALLEN  <span class="operator">|</span> salesman <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7521</span> <span class="operator">|</span> WARD   <span class="operator">|</span> salesman <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7654</span> <span class="operator">|</span> MARTIN <span class="operator">|</span> salesman <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7698</span> <span class="operator">|</span> BLAKE  <span class="operator">|</span> manager  <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7844</span> <span class="operator">|</span> TURNER <span class="operator">|</span> salesman <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span>  <span class="number">7900</span> <span class="operator">|</span> JAMES  <span class="operator">|</span> clerk    <span class="operator">|</span>     <span class="number">30</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">-------+--------+----------+--------+</span></span><br><span class="line"><span class="number">6</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">#<span class="keyword">SQL</span> 撤销视图</span><br><span class="line">您可以通过 <span class="keyword">DROP</span> <span class="keyword">VIEW</span> 命令来删除视图。</span><br><span class="line"></span><br><span class="line"><span class="keyword">SQL</span> <span class="keyword">DROP</span> <span class="keyword">VIEW</span> 语法</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> view_name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- For instance</span></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">view</span> view_emp1;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> view_emp1;</span><br><span class="line">#ERROR <span class="number">1146</span> (<span class="number">42</span>S02): <span class="keyword">Table</span> <span class="string">&#x27;db02.view_emp1&#x27;</span> doesn<span class="string">&#x27;t exist</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#视图的作用：</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1、视图隐藏了底层的表结构，简化了数据访问操作，客户端不再需要知道底层表的结构及其之间的关系。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">2、视图提供了一个统一访问数据的接口。（即可以允许用户通过视图访问数据的安全机制，而不授予用户直接访问底层表的权限）</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">3、从而加强了安全性，使用户只能看到视图所显示的数据。</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">4、视图还可以被嵌套，一个视图中可以嵌套另一个视图。</span></span><br></pre></td></tr></table></figure>

<h4 id="Mysql用户管理"><a href="#Mysql用户管理" class="headerlink" title="Mysql用户管理"></a>Mysql用户管理</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">#Mysql用户管理</span><br><span class="line"><span class="comment">-- 应用场景:当我们做项目开发时，可以根据不同的开发人员，赋给他们相应的Mysql操作权限	</span></span><br><span class="line"><span class="comment">-- Mysql数据库管理人员（root） 可以根据需要创建不同的用户，赋予相应的权限，供人员使用</span></span><br><span class="line"></span><br><span class="line">#创建新的用户</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> identified <span class="keyword">by</span> <span class="string">&#x27;eddiez&#x27;</span>;</span><br><span class="line"><span class="comment">-- &#x27;用户名&#x27;@&#x27;指定端口号&#x27; identified by &#x27;密码&#x27;; -- Tip:存入到Mysql.user表时的密码是加密过的</span></span><br><span class="line"></span><br><span class="line">#查看用户</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> mysql.user<span class="comment">-- 查看所有信息</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> `<span class="keyword">user</span>`,`host`,`authentication_string` <span class="keyword">from</span> mysql.user;<span class="comment">--查看指定信息</span></span><br><span class="line"></span><br><span class="line">#删除用户</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span></span><br><span class="line"></span><br><span class="line">#登录</span><br><span class="line"><span class="comment">-- 不同的用户登录到数据库管理系统（DBMS）后，根据自身的相应权限，可以操作的数据库和数据对象（表，试图，触发器）都不一样。</span></span><br><span class="line"></span><br><span class="line">#修改密码</span><br><span class="line"><span class="comment">-- 自己有权限修改自己的密码</span></span><br><span class="line"><span class="keyword">set</span> password <span class="operator">=</span> password(<span class="string">&#x27;newpassword&#x27;</span>);</span><br><span class="line"><span class="comment">-- 非root无权修改别的用户的密码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- root有权限修改别的用户的密码</span></span><br><span class="line"><span class="keyword">set</span> password <span class="keyword">for</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> password(<span class="string">&#x27;newpassword&#x27;</span>);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>不同的用户登录到数据库管理系统（DBMS）后，根据自身的相应权限，可以操作的数据库和数据对象（表，试图，触发器）都不一样。</p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220906135039895.png" alt="image-20220906135039895"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220906142425068.png" alt="image-20220906142425068"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">user</span> eddiez;<span class="comment">-- 创建用户的时候未指定host 则host为% 即表示所有的ip都有连接权限</span></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> `<span class="keyword">user</span>`,`host` <span class="keyword">from</span> mysql.user;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span>             <span class="operator">|</span> host      <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------+</span></span><br><span class="line"><span class="operator">|</span> eddiez           <span class="operator">|</span> <span class="operator">%</span>         <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.infoschema <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.session    <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.sys        <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> root             <span class="operator">|</span> localhost <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-----------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">user</span> eddiez;<span class="comment">-- 如果删除的用户为指明端口 则只需要输入用户名即可</span></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.01</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">create</span> <span class="keyword">user</span> <span class="string">&#x27;eddiez&#x27;</span>@<span class="string">&#x27;192.168.1.%&#x27;</span>;<span class="comment">-- 创建用户的时候指定&#x27;192.168.1.%&#x27;端口号表示用户可以在192.168.1.*的ip（这个ip范围中）都可以登录</span></span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.12</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">select</span> `<span class="keyword">user</span>`,`host` <span class="keyword">from</span> mysql.user;</span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> <span class="keyword">user</span>             <span class="operator">|</span> host        <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------------+</span></span><br><span class="line"><span class="operator">|</span> eddiez           <span class="operator">|</span> <span class="number">192.168</span><span class="number">.1</span>.<span class="operator">%</span> <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.infoschema <span class="operator">|</span> localhost   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.session    <span class="operator">|</span> localhost   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> mysql.sys        <span class="operator">|</span> localhost   <span class="operator">|</span></span><br><span class="line"><span class="operator">|</span> root             <span class="operator">|</span> localhost   <span class="operator">|</span></span><br><span class="line"><span class="operator">+</span><span class="comment">------------------+-------------+</span></span><br><span class="line"><span class="number">5</span> <span class="keyword">rows</span> <span class="keyword">in</span> <span class="keyword">set</span> (<span class="number">0.00</span> sec)</span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> <span class="keyword">drop</span> <span class="keyword">user</span> <span class="string">&#x27;eddiez&#x27;</span>@<span class="string">&#x27;192.168.1.%&#x27;</span>;</span><br><span class="line">Query OK, <span class="number">0</span> <span class="keyword">rows</span> affected (<span class="number">0.00</span> sec)<span class="comment">-- 删除的用户指明了端口的 要输入用户完整的格式信息才能删除</span></span><br></pre></td></tr></table></figure>



<h4 id="Mysql权限管理"><a href="#Mysql权限管理" class="headerlink" title="Mysql权限管理"></a>Mysql权限管理</h4><p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220906135412880.png" alt="image-20220906135412880"></p>
<p><img src="/2022/10/16/The-second-blog/Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220906135605307.png" alt="image-20220906135605307"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- root用户给其他用户赋予权限</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>,<span class="keyword">insert</span> <span class="keyword">on</span> db03.salgrade <span class="keyword">to</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="comment">-- grant 权限列表 on 库.对象名 to 用户名 </span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- root用户给其他用户增加权限</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">update</span> <span class="keyword">on</span> db03.salgrade <span class="keyword">to</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- root用户回收其他用户的权限</span></span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">update</span> <span class="keyword">on</span> db03.salgrade <span class="keyword">from</span> <span class="string">&#x27;Eddie&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="keyword">revoke</span> <span class="keyword">all</span> <span class="keyword">on</span> db03.salgrade <span class="keyword">from</span> <span class="string">&#x27;Eddie&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>;<span class="comment">-- 回收所有权限</span></span><br><span class="line"><span class="comment">-- root用户修改其他用户的密码</span></span><br><span class="line"><span class="keyword">set</span> password <span class="keyword">for</span> <span class="string">&#x27;EddieZ&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> <span class="operator">=</span> password(<span class="string">&#x27;newpassword&#x27;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line">#test</span><br><span class="line">#使用简单查询语句</span><br><span class="line"><span class="comment">-- 显示所有部门名称</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> dname <span class="keyword">from</span> dept;</span><br><span class="line"><span class="comment">-- 显示所有雇员名以及其全年的收入 13月（工资加补助）指明别名 年收入</span></span><br><span class="line"><span class="keyword">select</span> ename,(sal <span class="operator">+</span> if((comm <span class="keyword">is</span> <span class="keyword">null</span>),<span class="number">0.0</span>,comm))<span class="operator">*</span><span class="number">13</span> <span class="keyword">as</span> <span class="string">&#x27;年收入&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line">#限制查询语句</span><br><span class="line"><span class="comment">-- 显示工资超过2850的雇员的姓名和工资</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> <span class="number">2850</span>;</span><br><span class="line"><span class="comment">-- 显示工资不在1500到2850之间的所有雇员名及其工资</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">NOT</span> (sal <span class="keyword">between</span> <span class="number">1500</span> <span class="keyword">and</span> <span class="number">2850</span>);</span><br><span class="line"><span class="comment">-- 显示编号为7566的雇员姓名及其所在部门编号</span></span><br><span class="line"><span class="keyword">select</span> ename,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> <span class="number">7566</span>;</span><br><span class="line"><span class="comment">-- 显示部门10和30中工资超过1500的雇员名及工资</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> </span><br><span class="line">(deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">or</span> deptno <span class="operator">=</span> <span class="number">30</span>) <span class="keyword">and</span> sal <span class="operator">&gt;=</span> <span class="number">1500</span>;</span><br><span class="line"><span class="comment">-- 显示无管理者的雇员名及岗位</span></span><br><span class="line"><span class="keyword">select</span> ename,job <span class="keyword">from</span> emp <span class="keyword">where</span> mgr <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line">#排序数据</span><br><span class="line"><span class="comment">-- 显示在1991-02-01到1991-05-01之间雇佣的雇员名，岗位，及雇佣日期，并以雇佣日期进行排序</span></span><br><span class="line"><span class="keyword">select</span> ename,job,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> hiredate <span class="keyword">between</span> <span class="string">&#x27;1991-02-01&#x27;</span> <span class="keyword">and</span> <span class="string">&#x27;1991-05-01&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> hiredate <span class="keyword">desc</span> ;</span><br><span class="line"><span class="comment">-- 显示获得补助的所有员工名，工资及补助 并以工资降序排序</span></span><br><span class="line"><span class="keyword">select</span> ename,sal,comm <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>;</span><br><span class="line">#<span class="number">6.</span></span><br><span class="line"><span class="comment">-- 1.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 2.</span></span><br><span class="line"><span class="keyword">select</span> ename,empno,deptno <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;clerk&#x27;</span>;</span><br><span class="line"><span class="comment">-- 3.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="operator">&gt;</span> sal;</span><br><span class="line"><span class="comment">-- 4.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="operator">&gt;</span> (sal<span class="operator">*</span><span class="number">0.6</span>);</span><br><span class="line"><span class="comment">-- 5.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;manager&#x27;</span>) <span class="keyword">or</span> (deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;clerk&#x27;</span>);</span><br><span class="line"><span class="comment">-- 6.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> (deptno <span class="operator">=</span> <span class="number">10</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;manager&#x27;</span>) <span class="keyword">or</span> (deptno <span class="operator">=</span> <span class="number">20</span> <span class="keyword">and</span> job <span class="operator">=</span> <span class="string">&#x27;clerk&#x27;</span>) <span class="keyword">or</span> (job <span class="operator">&lt;&gt;</span> <span class="string">&#x27;manager&#x27;</span> <span class="keyword">and</span> job <span class="operator">&lt;&gt;</span> <span class="string">&#x27;clerk&#x27;</span> <span class="keyword">and</span> sal <span class="operator">&gt;=</span> <span class="number">2000</span>);</span><br><span class="line"><span class="comment">-- 7.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="comment">-- 8.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> comm <span class="keyword">is</span> <span class="keyword">null</span> <span class="keyword">or</span> comm <span class="operator">&lt;</span> <span class="number">100</span>;</span><br><span class="line"><span class="comment">-- 9.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> DATEDIFF(LAST_DAY(hiredate),hiredate) <span class="operator">&lt;=</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">-- 10.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> DATE_ADD(hiredate,<span class="type">interval</span> <span class="number">31</span> <span class="keyword">YEAR</span>) <span class="operator">&lt;</span> NOW();</span><br><span class="line"><span class="comment">-- 11.</span></span><br><span class="line"><span class="keyword">select</span> CONCAT(LCASE(MID(ename,<span class="number">1</span>,<span class="number">1</span>)),(MID(ename,<span class="number">2</span>))) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 12.</span></span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> LENGTH(ename) <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- 13.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">not</span> <span class="keyword">like</span> <span class="string">&#x27;%R%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 14.</span></span><br><span class="line"><span class="keyword">select</span> MID(ename,<span class="number">1</span>,<span class="number">3</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 15.</span></span><br><span class="line"><span class="keyword">select</span> REPLACE(ename,<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;a&#x27;</span>) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 16.</span></span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">where</span> DATE_ADD(hiredate,<span class="type">INTERVAL</span> <span class="number">12</span> <span class="keyword">year</span>) <span class="operator">&lt;=</span> NOW();</span><br><span class="line"><span class="comment">-- 17.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> ename <span class="keyword">DESC</span>;</span><br><span class="line"><span class="comment">-- 18.</span></span><br><span class="line"><span class="keyword">select</span> ename,hiredate <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> hiredate <span class="keyword">asc</span>;</span><br><span class="line"><span class="comment">-- 19.</span></span><br><span class="line"><span class="keyword">select</span> ename,job,sal <span class="keyword">from</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> job <span class="keyword">desc</span> , sal <span class="keyword">asc</span>;</span><br><span class="line"><span class="comment">-- 20.</span></span><br><span class="line"><span class="keyword">select</span> ename,<span class="keyword">YEAR</span>(hiredate),<span class="keyword">MONTH</span>(hiredate),hiredate <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> <span class="keyword">MONTH</span>(hiredate) , <span class="keyword">DAY</span>(hiredate);</span><br><span class="line"><span class="comment">-- 21.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">TRUNCATE</span>(sal<span class="operator">/</span><span class="number">30</span>,<span class="number">0</span>) <span class="keyword">as</span> <span class="string">&#x27;日薪资&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 22.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> <span class="keyword">MONTH</span>(hiredate) <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="comment">-- 23.</span></span><br><span class="line"><span class="keyword">select</span> DATEDIFF(now(),hiredate) <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 24.</span></span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="keyword">like</span> <span class="string">&#x27;%A%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 25.</span></span><br><span class="line"><span class="keyword">select</span> ename,CONCAT(<span class="string">&#x27;已入职:&#x27;</span>,<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">/</span><span class="number">365</span>),<span class="number">0</span>),<span class="string">&#x27;年&#x27;</span>,<span class="keyword">TRUNCATE</span>((<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">%</span><span class="number">365</span>),<span class="number">0</span>))<span class="operator">/</span><span class="number">30</span>,<span class="number">0</span>),<span class="string">&#x27;月&#x27;</span>,</span><br><span class="line"><span class="keyword">TRUNCATE</span>((<span class="keyword">TRUNCATE</span>((DATEDIFF(now(),hiredate)<span class="operator">%</span><span class="number">365</span>),<span class="number">0</span>))<span class="operator">%</span><span class="number">30</span>,<span class="number">0</span>),<span class="string">&#x27;天&#x27;</span>) <span class="keyword">AS</span> <span class="string">&#x27;入职年限&#x27;</span> <span class="keyword">from</span> emp;</span><br><span class="line">#<span class="number">7</span></span><br><span class="line"><span class="comment">-- 1.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> emp.deptno <span class="keyword">from</span> emp,dept <span class="keyword">where</span> emp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="string">&#x27;num&#x27;</span>,deptno <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> deptno <span class="keyword">HAVING</span> num <span class="operator">&gt;=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 2.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> sal <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SMITH&#x27;</span>);</span><br><span class="line"><span class="comment">-- 3.-- 把一张表看作是两张表来处理</span></span><br><span class="line"><span class="keyword">select</span> worker.ename <span class="keyword">as</span> <span class="string">&#x27;员工名&#x27;</span>,worker.hiredate <span class="keyword">as</span> <span class="string">&#x27;员工入职时间&#x27;</span>,leader.ename <span class="keyword">as</span> <span class="string">&#x27;直接上级名&#x27;</span>,leader.hiredate <span class="keyword">as</span> <span class="string">&#x27;上级入职时间&#x27;</span></span><br><span class="line">			<span class="keyword">from</span> emp <span class="keyword">as</span> worker,emp <span class="keyword">as</span> leader</span><br><span class="line">			<span class="keyword">where</span> worker.hiredate <span class="operator">&gt;</span> leader.hiredate <span class="keyword">and</span> worker.mgr <span class="operator">=</span> leader.empno;</span><br><span class="line"><span class="comment">-- 4.-- 使用外连接</span></span><br><span class="line"><span class="keyword">select</span> dept.dname,emp.<span class="operator">*</span></span><br><span class="line">			<span class="keyword">from</span> dept <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> emp <span class="keyword">on</span> dept.deptno <span class="operator">=</span> emp.deptno;</span><br><span class="line"><span class="comment">-- 5.</span></span><br><span class="line"><span class="keyword">select</span> emp.ename,dept.dname</span><br><span class="line">			<span class="keyword">from</span> emp,dept <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;clerk&#x27;</span> <span class="keyword">and</span> emp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="comment">-- 6.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> job <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job <span class="keyword">HAVING</span> <span class="built_in">min</span>(sal) <span class="operator">&gt;</span> <span class="number">1500</span>;</span><br><span class="line"><span class="comment">-- 7.</span></span><br><span class="line"><span class="keyword">select</span> ename <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 8.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">avg</span>(sal) <span class="keyword">from</span> emp);</span><br><span class="line"></span><br><span class="line">#<span class="number">7</span></span><br><span class="line"><span class="comment">-- 9.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> (<span class="keyword">select</span> job <span class="keyword">from</span> emp <span class="keyword">where</span> ename <span class="operator">=</span> <span class="string">&#x27;SCOTT&#x27;</span>);</span><br><span class="line"><span class="comment">-- 10.</span></span><br><span class="line"><span class="keyword">select</span> ename,sal <span class="keyword">from</span> emp <span class="keyword">where</span> sal <span class="operator">&gt;</span> (<span class="keyword">select</span> <span class="built_in">max</span>(sal) <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="operator">=</span> <span class="number">30</span>);</span><br><span class="line"><span class="comment">-- 11.</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="string">&#x27;部门人数&#x27;</span>,<span class="built_in">avg</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;平均工资&#x27;</span>,FORMAT(<span class="built_in">avg</span>(DATEDIFF(NOW(),hiredate) <span class="operator">/</span> <span class="number">356</span>),<span class="number">1</span>) <span class="keyword">as</span> <span class="string">&#x27;平均服务期限（单位年）&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line"><span class="comment">-- 12.</span></span><br><span class="line"><span class="keyword">select</span> emp.ename,dept.dname,emp.sal</span><br><span class="line">      <span class="keyword">from</span> emp,dept</span><br><span class="line">			<span class="keyword">where</span> emp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="comment">-- 13.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> dept,(<span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> <span class="string">&#x27;部门人数&#x27;</span>,deptno <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno) <span class="keyword">AS</span> temp <span class="keyword">where</span> temp.deptno <span class="operator">=</span> dept.deptno;</span><br><span class="line"><span class="comment">-- 14.</span></span><br><span class="line"><span class="keyword">select</span> job,<span class="built_in">min</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;最低工资&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">GROUP</span> <span class="keyword">BY</span> job;</span><br><span class="line"><span class="comment">-- 15.</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(sal) <span class="keyword">as</span> <span class="string">&#x27;manager的最低工资&#x27;</span> <span class="keyword">from</span> emp <span class="keyword">where</span> job <span class="operator">=</span> <span class="string">&#x27;manager&#x27;</span>;</span><br><span class="line"><span class="comment">-- 16.</span></span><br><span class="line"><span class="keyword">select</span> ename,((sal <span class="operator">+</span> IFNULL(comm,<span class="number">0</span>)) <span class="operator">*</span> <span class="number">13</span>) <span class="keyword">as</span> yearsal <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> yearsal <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">8</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `class` (</span><br><span class="line">classid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">primary</span> key,`subject` <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,`deptname` <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">enrolltime <span class="type">date</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;2000-01-01&#x27;</span>)<span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line"><span class="keyword">desc</span> class;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class modify enrolltime <span class="keyword">YEAR</span>;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> class <span class="keyword">add</span> num tinyint <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">desc</span> class;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> class <span class="keyword">values</span> (<span class="number">101</span>,<span class="string">&#x27;软件&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;1995&#x27;</span>,<span class="number">20</span>),(<span class="number">102</span>,<span class="string">&#x27;微电子&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>,<span class="string">&#x27;1996&#x27;</span>,<span class="number">30</span>),(<span class="number">111</span>,<span class="string">&#x27;无机化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="string">&#x27;1995&#x27;</span>,<span class="number">29</span>),(<span class="number">112</span>,<span class="string">&#x27;高分子化学&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>,<span class="string">&#x27;1996&#x27;</span>,<span class="number">25</span>),(<span class="number">121</span>,<span class="string">&#x27;统计数学&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="string">&#x27;1995&#x27;</span>,<span class="number">20</span>),(<span class="number">131</span>,<span class="string">&#x27;现代语言&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>,<span class="string">&#x27;1996&#x27;</span>,<span class="number">20</span>),(<span class="number">141</span>,<span class="string">&#x27;国际贸易&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="string">&#x27;1997&#x27;</span>,<span class="number">30</span>),(<span class="number">142</span>,<span class="string">&#x27;国际金融&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>,<span class="string">&#x27;1996&#x27;</span>,<span class="number">14</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `student_table` (</span><br><span class="line">`studentid` <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">primary</span> key,`name` <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,`age` tinyint <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line">classid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span>,</span><br><span class="line"><span class="keyword">constraint</span> fk_classid <span class="keyword">foreign</span> key (classid) <span class="keyword">references</span> class (classid))<span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line"><span class="keyword">desc</span> student_table;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> student_table <span class="keyword">values</span> (<span class="number">8101</span>,<span class="string">&#x27;张三&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>),(<span class="number">8102</span>,<span class="string">&#x27;钱四&#x27;</span>,<span class="number">16</span>,<span class="number">121</span>),(<span class="number">8103</span>,<span class="string">&#x27;玉玲&#x27;</span>,<span class="number">17</span>,<span class="number">131</span>),(<span class="number">8105</span>,<span class="string">&#x27;李飞&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>),(<span class="number">8109</span>,<span class="string">&#x27;赵四&#x27;</span>,<span class="number">18</span>,<span class="number">141</span>),(<span class="number">8110</span>,<span class="string">&#x27;李可&#x27;</span>,<span class="number">20</span>,<span class="number">142</span>),(<span class="number">8201</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="number">18</span>,<span class="number">111</span>),(<span class="number">8302</span>,<span class="string">&#x27;周瑜&#x27;</span>,<span class="number">16</span>,<span class="number">112</span>),(<span class="number">8303</span>,<span class="string">&#x27;王亮&#x27;</span>,<span class="number">17</span>,<span class="number">111</span>),(<span class="number">8305</span>,<span class="string">&#x27;董庆&#x27;</span>,<span class="number">19</span>,<span class="number">102</span>),(<span class="number">8409</span>,<span class="string">&#x27;赵龙&#x27;</span>,<span class="number">18</span>,<span class="number">101</span>),(<span class="number">8510</span>,<span class="string">&#x27;李丽&#x27;</span>,<span class="number">20</span>,<span class="number">142</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_table;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> `department` (</span><br><span class="line">departmentid <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="number">0</span> <span class="keyword">primary</span> key,deptname <span class="type">varchar</span>(<span class="number">15</span>) <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">default</span> <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="keyword">constraint</span> <span class="keyword">unique</span> (deptname))<span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_bin engine innodb;</span><br><span class="line"><span class="keyword">desc</span> department;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="number">001</span>,<span class="string">&#x27;数学&#x27;</span>),(<span class="number">002</span>,<span class="string">&#x27;计算机&#x27;</span>),(<span class="number">003</span>,<span class="string">&#x27;化学&#x27;</span>),(<span class="number">004</span>,<span class="string">&#x27;中文&#x27;</span>),(<span class="number">005</span>,<span class="string">&#x27;经济&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> department;</span><br><span class="line"></span><br><span class="line">#test</span><br><span class="line"><span class="comment">-- 1.</span></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_table <span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;李%&#x27;</span>;</span><br><span class="line"><span class="comment">-- 2.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> class.deptname <span class="keyword">from</span> class,(<span class="keyword">select</span> deptname,<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">as</span> num <span class="keyword">from</span> class <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptname) <span class="keyword">as</span> temp_table <span class="keyword">where</span> temp_table.num <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">and</span> </span><br><span class="line">temp_table.deptname <span class="operator">=</span> class.deptname;</span><br><span class="line"><span class="comment">-- 3.</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department.departmentid,department.deptname,temp_table1.sum</span><br><span class="line">			<span class="keyword">from</span> department,(<span class="keyword">select</span> class.deptname,<span class="built_in">sum</span>(class.num) <span class="keyword">as</span> sum <span class="keyword">from</span> class <span class="keyword">GROUP</span> <span class="keyword">BY</span> deptname) <span class="keyword">as</span> temp_table1 <span class="keyword">where</span> department.deptname <span class="operator">=</span> temp_table1.deptname <span class="keyword">and</span> temp_table1.sum <span class="operator">&gt;=</span> <span class="number">30</span>;</span><br><span class="line"><span class="comment">-- 4.</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="number">006</span>,<span class="string">&#x27;物理&#x27;</span>);</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> department;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class;</span><br><span class="line"><span class="comment">-- 5.-- 使用事务</span></span><br><span class="line"><span class="comment">-- 开启事务</span></span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="comment">-- 进行操作</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> class <span class="keyword">set</span> num <span class="operator">=</span> (num <span class="operator">-</span> <span class="number">1</span>) <span class="keyword">where</span> classid <span class="operator">=</span> (<span class="keyword">select</span> student_table.classid <span class="keyword">from</span> student_table <span class="keyword">where</span> student_table.`name` <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>);<span class="comment">-- 将班表中的人数变更</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> student_table <span class="keyword">where</span> student_table.`name` <span class="operator">=</span> <span class="string">&#x27;张三&#x27;</span>;<span class="comment">-- 从学生表中删除</span></span><br><span class="line"><span class="comment">-- 确认无误 提交事务</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> class;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student_table;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 把系表中的id类型改为varchar(10)</span></span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> department;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> department MODIFY departmentid <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="string">&#x27;001&#x27;</span>,<span class="string">&#x27;数学&#x27;</span>),(<span class="string">&#x27;002&#x27;</span>,<span class="string">&#x27;计算机&#x27;</span>),(<span class="string">&#x27;003&#x27;</span>,<span class="string">&#x27;化学&#x27;</span>),(<span class="string">&#x27;004&#x27;</span>,<span class="string">&#x27;中文&#x27;</span>),(<span class="string">&#x27;005&#x27;</span>,<span class="string">&#x27;经济&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> department <span class="keyword">values</span> (<span class="string">&#x27;006&#x27;</span>,<span class="string">&#x27;物理&#x27;</span>);</span><br><span class="line"><span class="keyword">desc</span> department;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> department;</span><br><span class="line">			</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/10/16/The-first-blog/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="EddieZhang">
      <meta itemprop="description" content="当你开始认真的时候，全世界都会给你让路！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Perserverance">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/10/16/The-first-blog/" class="post-title-link" itemprop="url">The-first-blog</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2022-10-16 13:45:39 / 修改时间：13:48:32" itemprop="dateCreated datePublished" datetime="2022-10-16T13:45:39+08:00">2022-10-16</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="关于JVM（基于hotspot）"><a href="#关于JVM（基于hotspot）" class="headerlink" title="关于JVM（基于hotspot）"></a>关于JVM（基于hotspot）</h1><h2 id="JVM整体结构"><a href="#JVM整体结构" class="headerlink" title="JVM整体结构"></a>JVM整体结构</h2><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101506965.png" alt="image-20220927101506965"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920094922812.png" alt="image-20220920094922812"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920101026112.png" alt="image-20220920101026112"></p>
<h2 id="JVM的架构模型-基于栈式架构"><a href="#JVM的架构模型-基于栈式架构" class="headerlink" title="JVM的架构模型 基于栈式架构"></a><strong>JVM的架构模型 基于栈式架构</strong></h2><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920102914097.png" alt="image-20220920102914097"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920102933595.png" alt="image-20220920102933595"></p>
<h2 id="JVM生命周期"><a href="#JVM生命周期" class="headerlink" title="JVM生命周期"></a>JVM生命周期</h2><p><strong>启动——执行——退出</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920103222871.png" alt="image-20220920103222871"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920103234998.png" alt="image-20220920103234998"></p>
<h1 id="JVM内存区域"><a href="#JVM内存区域" class="headerlink" title="JVM内存区域"></a>JVM内存区域</h1><h2 id="类加载子系统"><a href="#类加载子系统" class="headerlink" title="类加载子系统"></a>类加载子系统</h2><h3 id="类加载器和类的加载过程"><a href="#类加载器和类的加载过程" class="headerlink" title="类加载器和类的加载过程"></a>类加载器和类的加载过程</h3><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920104243326.png" alt="image-20220920104243326"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920104757585.png" alt="image-20220920104757585"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920104740671.png" alt="image-20220920104740671"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920110604499.png" alt="image-20220920110604499"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920110910892.png" alt="image-20220920110910892"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920110924167.png" alt="image-20220920110924167"></p>
<h3 id="类的加载过程"><a href="#类的加载过程" class="headerlink" title="类的加载过程"></a>类的加载过程</h3><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920111431881.png" alt="image-20220920111431881"></p>
<p>一个Java文件从编码完成到最终运行，一般会经历两个阶段：编译期、运行期。编译，即通过javac命令，将Java文件转化为二进制字节码文件，即.class文件；运行，则是将.class文件交给JVM执行。而本文所说的类加载过程就是将.class文件中类的元信息加载进内存，创建Class对象并进行解析、初始化类变量等的过程<br>        JVM并不是一开始就会将所有的类加载到内存，而是用到某个类，才会去加载，只加载一次，后续会说到类的加载时机</p>
<ol start="2">
<li>类加载详解<br>类加载分为三个部分：加载、连接、初始化</li>
<li><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920112538821.png" alt="image-20220920112538821"></li>
</ol>
<h4 id="加载"><a href="#加载" class="headerlink" title="加载"></a>加载</h4><p>加载<br>        <strong>类的加载主要的职责为将.class文件的二进制字节流读入内存</strong>(JDK1.7及之前为JVM内存(方法区)，JDK1.8及之后为本地内存(元空间))，并<strong>在堆内存中为之创建Class对象</strong>，<strong>作为.class进入内存后的数据的访问入口</strong>。</p>
<p><strong>在这里只是读入二进制字节流，后续的验证阶段就是要拿二进制字节流来验证.class文件，验证通过，才会将.class文件转为运行时数据结构</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920160057893.png" alt="image-20220920160057893"></p>
<p>​        <strong>++拓展</strong>： 在<strong>JDK1.7及以前</strong>，Hot Spot JVM(普遍在用的JVM)存在一块叫做<strong>方法区</strong>的内存，也称之为<strong>永久代</strong>，这块区域用于存放类的元数据信息，包括类的字段，版本，方法等，这块区域，可以理解为.class文件进入内存后的位置。在<strong>JDK1.8</strong>，取消了方法区，取而代之的是<strong>元数据区</strong>，该元数据区并非JVM内存，而是<strong>本地内存</strong>。此外在JDK1.7时，将常量池从方法区移除，在堆内存开辟了一块空间作为常量池，有人说这是为取消方法区做的准备。更多请点我看思维导图总结<br>​        <strong>++加分项： 为何取消方法区</strong>？<br>​        官方说法为：<strong>移除永久代是为融合HotSpot JVM与 JRockit VM而做出的努力</strong>，<strong>因为JRockit没有永久代</strong>，不需要配置永久代<br>​        现实使用中存在问题：方法区存储类的元数据信息，我们不清楚一个程序到底有多少类需要被加载，且方法区位于JVM内存，我们不清楚需要给方法区分配多大内存，太小容易PermGen OOM，太大，在触发Full GC时又极其影响性能，同时还存在一些内存泄露的问题</p>
<h4 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h4><h5 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h5><p>该阶段主要是为了<strong>保证加载进来的字节流符合JVM的规范</strong>，<strong>不会对JVM有安全性问题</strong>。其中有对元数据的验证，例如检查类是否继承了被final修饰的类；还有对符号引用的验证，例如校验符号引用是否可以通过全限定名找到，或者是检查符号引用的权限(private、public)是否符合语法规定等。</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920160256311.png" alt="image-20220920160256311"></p>
<p>主要包括四种验证：<strong>文件格式验证</strong> <strong>元数据验证</strong> <strong>字节码验证</strong> <strong>符号引用验证</strong></p>
<h5 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h5><p>准备阶段的主要任务是<strong>为类的类变量（static）开辟空间并赋默认值</strong>。</p>
<p>1、静态变量是基本类型（int、long、short、char、byte、boolean、float、double）的默认值为0<br>2、静态变量是引用类型的，默认值为null<br>3、静态常量默认值为声明时设定的值</p>
<p><strong>例如：public static final int i &#x3D; 3; 在准备阶段，i的值即为3</strong></p>
<p><strong>static final 在编译的时候就分配 准备阶段会显示初始化</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadingTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">num1</span> <span class="operator">=</span> <span class="number">3</span>;<span class="comment">//prepare:num = 3;//static final在准备阶段就显示初始化</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//prepare:num = 0;initial:num = 1;准备阶段的主要任务是**为类的类变量（static）开辟空间并赋默认值**</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test1</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(num);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>这里不会为实例变量分配初始化，</strong> <strong>类变量会分配在方法区中，而实例变量会随着对象一起分配到Java堆中</strong></p>
<h5 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h5><p><strong>该阶段的主要职责为将Class在常量池中的符号引用转变为直接引用</strong>，</p>
<p>此处针对的是<strong>静态方法及属性和私有方法与属性</strong>，<strong>因为这类方法与私有方法不能被重写</strong>，静态属性在运行期也没有多态这一说，即<strong>在编译器可知，运行期不可变，所以适合在该阶段解析</strong>，譬如类方法main替换为直接引用，为静态连接，区别于运行时的动态连接(后续我会写关于JVM内存结构的文章，在讲解栈帧时会介绍动态链接)。<br><strong>符号引用即字符串，说白了可以是一个字段名，或者一个方法名</strong>；<strong>直接引用即偏移量</strong>，<strong>说白了就是类的元信息位于内存的地址串</strong>，例如，一个类的方法为test()，则符号引用即为test，这个方法存在于内存中的地址假设为0x123456，则这个地址则为直接引用</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927090611262.png" alt="image-20220927090611262"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927090624171.png" alt="image-20220927090624171"></p>
<h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>类的<strong>初始化顺序</strong>：先执行父类静态变量赋值、父类静态初始化块，再执行子类静态属性赋值、静态初始化块</p>
<p><strong>执行类的构造器方法（clinit（））的过程</strong></p>
<p><strong>此方法不需要定义 是javac编译器自动收集类中的所有 类变量（static）的赋值动作和静态代码块中的语句合并而来</strong></p>
<p><strong>clinit（）构造器方法中的指令语句是按照源文件中出现的顺序</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920130631247.png" alt="image-20220920130631247"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920130824249.png" alt="image-20220920130824249"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadingTest1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;<span class="comment">//类变量</span></span><br><span class="line">    <span class="keyword">static</span> &#123;<span class="comment">//静态代码块</span></span><br><span class="line">        num = <span class="number">2</span>;</span><br><span class="line">        number = <span class="number">20</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        System.out.println(num);<span class="comment">//2</span></span><br><span class="line">        System.out.println(number);<span class="comment">//10</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>clinit()方法是javac编译器自动收集类中的所有 类变量（static）的赋值动作和静态代码块中的语句合并而来</strong></p>
<p><strong>如果没有类变量（static）的赋值动作和静态代码块</strong> <strong>就不会有clinit()方法</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920131249704.png" alt="image-20220920131249704"></p>
<p><strong>任何一个类生声明后，内部至少存在一个类的构造器</strong></p>
<p>若该类有父类：<strong>JVM保证子类的clinit()方法执行前 父类的clinit()方法已经执行完毕</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920132635850.png" alt="image-20220920132635850"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//父类先加载 其次加载子类 静态先行</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadingTest2</span> &#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Father</span>&#123;<span class="comment">//父类先加载</span></span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> <span class="variable">num</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            num = <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Son</span> <span class="keyword">extends</span> <span class="title class_">Father</span>&#123;<span class="comment">//其次加载子类</span></span><br><span class="line">        <span class="keyword">static</span> <span class="type">int</span> <span class="variable">number</span> <span class="operator">=</span> num;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//父类先加载 其次加载子类 静态先行</span></span><br><span class="line">        System.out.println(Son.number);<span class="comment">//2</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>JVM必须保证一个类的clinit()方法在多线程下被同步加锁</strong></p>
<p><strong>保证clinit()方法只加载一次</strong></p>
<p><strong>clinit()方法</strong> <strong>clinit()方法是javac编译器自动收集类中的所有 类变量（static）的赋值动作和静态代码块中的语句合并而来</strong></p>
<p><strong>如果没有类变量（static）的赋值动作和静态代码块</strong> <strong>就不会有clinit()方法</strong></p>
<h3 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h3><p><strong>引导类加载器（Bootstrap ClassLoader）</strong></p>
<p><strong>自定义类加载器（User-Defined ClassLoader）</strong></p>
<p><strong>所有派生于抽象类ClassLoader的类加载器划分为自定义类加载器</strong></p>
<p>了解自定义类加载器：</p>
<p>通过前面的分析可知，<strong>实现自定义类加载器需要继承ClassLoader或者URLClassLoader</strong>，<strong>继承ClassLoader则需要自己重写findClass()方法并编写加载逻辑</strong>，<strong>继承URLClassLoader则可以省去编写findClass()方法以及class文件加载转换成字节码流的代码</strong>。那么<strong>编写自定义类加载器的意义</strong>何在呢？</p>
<p>简单来讲:<strong>隔离加载类</strong>，<strong>修改类加载方式</strong>，<strong>扩展加载源</strong>，<strong>防止源码泄露</strong></p>
<p>1.当class文件不在ClassPath路径下，默认系统类加载器无法找到该class文件，在这种情况下我们需要实现一个自定义的ClassLoader来加载特定路径下的class文件生成class对象。</p>
<p>2.当一个class文件是通过网络传输并且可能会进行相应的加密操作时，需要先对class文件进行相应的解密后再加载到JVM内存中，这种情况下也需要编写自定义的ClassLoader并实现相应的逻辑。</p>
<p>3.当需要实现热部署功能时(一个class文件通过不同的类加载器产生不同class对象从而实现热部署功能)，需要实现自定义ClassLoader的逻辑。</p>
<h4 id="引导类加载器（Bootstrap-ClassLoader）"><a href="#引导类加载器（Bootstrap-ClassLoader）" class="headerlink" title="引导类加载器（Bootstrap ClassLoader）"></a>引导类加载器（Bootstrap ClassLoader）</h4><p>启动类加载器<strong>主要加载的是JVM自身需要的类</strong>，这个类加载<strong>使用C++语言实现</strong>的，是<strong>虚拟机自身的一部分</strong>，它<strong>负责将 <JAVA_HOME>&#x2F;lib路径下的核心类库或-Xbootclasspath参数指定的路径下的jar包加载到内存中</strong>，注意由于<strong>虚拟机是按照文件名识别加载jar包的，如rt.jar，如果文件名不被虚拟机识别，即使把jar包丢到lib目录下也是没有作用的</strong>(出于<strong>安全考虑，Bootstrap启动类加载器只加载包名为java、javax、sun等开头的类</strong>)。</p>
<h4 id="扩展类加载器（Extension-ClassLoader）"><a href="#扩展类加载器（Extension-ClassLoader）" class="headerlink" title="扩展类加载器（Extension ClassLoader）"></a>扩展类加载器（Extension ClassLoader）</h4><p>扩展类加载器是指Sun公司(已被Oracle收购)实现的sun.misc.Launcher$ExtClassLoader类，由<strong>Java语言实现</strong>的，是<strong>Launcher的静态内部类</strong>，它<strong>负责加载<JAVA_HOME>&#x2F;lib&#x2F;ext目录下或者由系统变量-Djava.ext.dir指定位路径中的类库</strong>，开发者可以直接使用标准扩展类加载器。</p>
<h4 id="系统类加载器（System-ClassLoader）"><a href="#系统类加载器（System-ClassLoader）" class="headerlink" title="系统类加载器（System ClassLoader）"></a>系统类加载器（System ClassLoader）</h4><p>也称应用程序加载器是指 Sun公司实现的sun.misc.Launcher$AppClassLoader。它<strong>负责加载系统类路径java -classpath或-D java.class.path 指定路径下的类库</strong>，也就是我们经常用到的<strong>classpath路径</strong>，开发者可以直接使用系统类加载器，<strong>一般情况下该类加载器是程序中默认的类加载器，通过ClassLoader#getSystemClassLoader()方法可以获取到该类加载器</strong>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadingTest3</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//系统类加载器获取</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">systemClassLoader</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader();</span><br><span class="line">        System.out.println(systemClassLoader);</span><br><span class="line">        <span class="comment">//jdk.internal.loader.ClassLoaders$AppClassLoader@27c170f0</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//系统类加载器获取其上层 扩展类加载器</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">systemClassLoaderParent</span> <span class="operator">=</span> systemClassLoader.getParent();</span><br><span class="line">        System.out.println(systemClassLoaderParent);</span><br><span class="line">        <span class="comment">//jdk.internal.loader.ClassLoaders$PlatformClassLoader@4f3f5b24</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//扩展类加载器获取其上层 引导类加载器 --获取不到</span></span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">systemClassLoaderParentParent</span> <span class="operator">=</span> systemClassLoaderParent.getParent();</span><br><span class="line">        System.out.println(systemClassLoaderParentParent);<span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//对于自定义类加载器 默认使用系统类加载器进行加载</span></span><br><span class="line">        System.out.println(ClassLoadingTest3.class.getClassLoader());</span><br><span class="line">        <span class="comment">//jdk.internal.loader.ClassLoaders$AppClassLoader@27c170f0同系统类加载器</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//String类的类加载器查看 引导类加载器加载 系统的核心类库都是使用引导类加载器进行加载的</span></span><br><span class="line">        System.out.println(String.class.getClassLoader());</span><br><span class="line">        <span class="comment">//null</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920134602495.png" alt="image-20220920134602495"></p>
<p><strong>获取ClassLoader的方式</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920144548977.png" alt="image-20220920144548977"></p>
<h4 id="类加载器间的关系"><a href="#类加载器间的关系" class="headerlink" title="类加载器间的关系"></a>类加载器间的关系</h4><p>我们进一步了解类加载器间的关系(并非指继承关系)，主要可以分为以下4点</p>
<p><strong>启动类加载器</strong>，由C++实现，嵌套在JVM内部 加载Java核心类库 没有父类。</p>
<p>**拓展类加载器(ExtClassLoader)**，派生于ClassLoader 由Java语言实现，父类加载器为启动类加载器（null 获取不到）</p>
<p> (Java程序默认加载器）**系统类加载器(AppClassLoader)**，派生于ClassLoader 由Java语言实现，父类加载器为扩展类加载器ExtClassLoader </p>
<p><strong>自定义类加载器</strong>，父类加载器肯定为AppClassLoader。</p>
<h4 id="双亲委派模式"><a href="#双亲委派模式" class="headerlink" title="双亲委派模式"></a>双亲委派模式</h4><p> 在Java的<strong>日常应用程序开发中</strong>，<strong>类的加载几乎是由引导（Bootstrap）类加载器、扩展（Extension）类加载器、系统（System）类加载器（也称应用类加载器）3种类加载器相互配合执行的</strong>，在必要时，我们还可以自定义类加载器，需要注意的是，Java虚拟机对class文件采用的是按需加载的方式，也就是说当需要使用该类时才会将它的class文件加载到内存生成class对象，而且加载某个类的class文件时，<strong>Java虚拟机采用的是双亲委派模式即把请求交由父类处理</strong>，它<strong>一种任务委派模式–双亲委派模式</strong></p>
<p><strong>非继承关系</strong></p>
<p>双亲委派模式要求<strong>除了顶层的启动类加载器外</strong>，<strong>其余的类加载器都应当有自己的父类加载器</strong>，请注意双亲委派模式中的父子关系<strong>并非通常所说的类继承关系</strong>，而是<strong>采用组合关系来复用父类加载器的相关代码</strong>，类加载器间的关系如下：</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920134602495.png" alt="image-20220920134602495"></p>
<p><strong>双亲委派模式是在Java 1.2后引入的</strong>，<strong>其工作原理的是，如果一个类加载器收到了类加载请求，它并不会自己先去加载，而是把这个请求委托给父类的加载器去执行，如果父类加载器还存在其父类加载器，则进一步向上委托，依次递归，请求最终将到达顶层的启动类加载器，如果父类加载器可以完成类加载任务，就成功返回，倘若父类加载器无法完成此加载任务，子加载器才会尝试自己去加载，这就是双亲委派模式，即每个儿子都很懒，每次有活就丢给父亲去干，直到父亲说这件事我也干不了时，儿子自己想办法去完成.</strong></p>
<h5 id="双亲委派模式优势"><a href="#双亲委派模式优势" class="headerlink" title="双亲委派模式优势"></a>双亲委派模式优势</h5><h6 id="避免重复加载"><a href="#避免重复加载" class="headerlink" title="避免重复加载"></a>避免重复加载</h6><p><strong>采用双亲委派模式的是好处是Java类随着它的类加载器一起具备了一种带有优先级的层次关系，通过这种层级关可以避免类的重复加载，当父亲已经加载了该类时，就没有必要子ClassLoader再加载一次。</strong></p>
<h6 id="安全因素-沙箱安全机制"><a href="#安全因素-沙箱安全机制" class="headerlink" title="安全因素-沙箱安全机制"></a>安全因素-沙箱安全机制</h6><p><strong>防止核心API被随意篡改</strong>（对核心源码的保护）</p>
<p><strong>其次是考虑到安全因素，java核心api中定义类型不会被随意替换，假设通过网络传递一个名为java.lang.Integer的类，通过双亲委托模式传递到启动类加载器，而启动类加载器在核心Java API发现这个名字的类，发现该类已被加载，并不会重新加载网络传递的过来的java.lang.Integer，而直接返回已加载过的Integer.class，这样便可以防止核心API库被随意篡改。</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920154750258.png" alt="image-20220920154750258"></p>
<p><strong>可能你会想，如果我们在classpath路径下自定义一个名为java.lang.SingleInterge类(该类是胡编的)呢？该类并不存在java.lang中，经过双亲委托模式，传递到启动类加载器中，由于父类加载器路径下并没有该类，所以不会加载，将反向委托给子类加载器加载，最终会通过系统类加载器加载该类。但是这样做是不允许，因为java.lang是核心API包，需要访问权限，强制加载将会报出如下异常</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920152230945.png" alt="image-20220920152230945"></p>
<p>java.lang.SecurityException: Prohibited package name: java.lang</p>
<p><strong>所以无论如何都无法加载成功的</strong></p>
<h5 id="从代码层面了解几个Java中定义的类加载器及其双亲委派模式的实现"><a href="#从代码层面了解几个Java中定义的类加载器及其双亲委派模式的实现" class="headerlink" title="从代码层面了解几个Java中定义的类加载器及其双亲委派模式的实现"></a>从代码层面了解几个Java中定义的类加载器及其双亲委派模式的实现</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920151406561.png" alt="image-20220920151406561"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920140502286.png" alt="image-20220920140502286"></p>
<p><strong>从图可以看出顶层的类加载器是ClassLoader类，它是一个抽象类，其后所有的类加载器都继承自ClassLoader（不包括启动类加载器）</strong></p>
<h5 id="线程上下文类加载器"><a href="#线程上下文类加载器" class="headerlink" title="线程上下文类加载器"></a>线程上下文类加载器</h5><p>在Java应用中存在着很多服务提供者接口（Service Provider Interface，SPI），这些接口允许第三方为它们提供实现，如常见的 SPI 有 JDBC、JNDI等，这些 SPI 的接口属于 Java 核心库，一般存在rt.jar包中，由Bootstrap类加载器加载，而 SPI 的第三方实现代码则是作为Java应用所依赖的 jar 包被存放在classpath路径下，由于SPI接口中的代码经常需要加载具体的第三方实现类并调用其相关方法，但SPI的核心接口类是由引导类加载器来加载的，而Bootstrap类加载器无法直接加载SPI的实现类，同时由于双亲委派模式的存在，Bootstrap类加载器也无法反向委托AppClassLoader加载器SPI的实现类。在这种情况下，我们就需要一种特殊的类加载器来加载第三方的类库，而线程上下文类加载器就是很好的选择。<br>    线程上下文类加载器（contextClassLoader）是从 JDK 1.2 开始引入的，我们可以通过java.lang.Thread类中的getContextClassLoader()和 setContextClassLoader(ClassLoader cl)方法来获取和设置线程的上下文类加载器。如果没有手动设置上下文类加载器，线程将继承其父线程的上下文类加载器，初始线程的上下文类加载器是系统类加载器（AppClassLoader）,在线程中运行的代码可以通过此类加载器来加载类和资源，如下图所示，以jdbc.jar加载为例</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920152641999.png" alt="image-20220920152641999"></p>
<p>从图可知<strong>rt.jar核心包是有Bootstrap类加载器加载的</strong>，<strong>其内包含SPI核心接口类，由于SPI中的类经常需要调用外部实现类的方法，而jdbc.jar包含外部实现类(jdbc.jar存在于classpath路径)无法通过Bootstrap类加载器加载</strong>，因此只能<strong>委派线程上下文类加载器把jdbc.jar中的实现类加载到内存以便SPI相关类使用</strong>。显然这种线程上下文类加载器的加载方式破坏了“双亲委派模型”，<strong>它在执行过程中抛弃双亲委派加载链模式，使程序可以逆向使用类加载器，当然这也使得Java类加载器变得更加灵活</strong>。为了进一步证实这种场景，不妨看看DriverManager类的源码，DriverManager是Java核心rt.jar包中的类，该类用来管理不同数据库的实现驱动即Driver，它们都实现了Java核心包中的java.sql.Driver接口，如mysql驱动包中的com.mysql.jdbc.Driver，这里主要看看如何加载外部实现类，在DriverManager初始化时会执行如下代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//DriverManager是Java核心包rt.jar的类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DriverManager</span> &#123;</span><br><span class="line">	<span class="comment">//省略不必要的代码</span></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        loadInitialDrivers();<span class="comment">//执行该方法</span></span><br><span class="line">        println(<span class="string">&quot;JDBC DriverManager initialized&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//loadInitialDrivers方法</span></span><br><span class="line"> <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">loadInitialDrivers</span><span class="params">()</span> &#123;</span><br><span class="line">     sun.misc.Providers()</span><br><span class="line">     AccessController.doPrivileged(<span class="keyword">new</span> <span class="title class_">PrivilegedAction</span>&lt;Void&gt;() &#123;</span><br><span class="line">            <span class="keyword">public</span> Void <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">				<span class="comment">//加载外部的Driver的实现类</span></span><br><span class="line">                ServiceLoader&lt;Driver&gt; loadedDrivers = ServiceLoader.load(Driver.class);</span><br><span class="line">              <span class="comment">//省略不必要的代码......</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>在DriverManager类初始化时执行了loadInitialDrivers()方法,在该方法中通过ServiceLoader.load(Driver.class);去加载外部实现的驱动类，ServiceLoader类会去读取mysql的jdbc.jar下META-INF文件的内容，如下所示<br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220920153320008.png" alt="image-20220920153320008"></p>
<p>很明显了确实通过线程上下文类加载器加载的，实际上<strong>核心包的SPI类对外部实现类的加载都是基于线程上下文类加载器执行的</strong>，通过这种方式实现了<strong>Java核心代码内部去调用外部实现类</strong>。我们知道<strong>线程上下文类加载器默认情况下就是AppClassLoader</strong>，</p>
<p>那<strong>为什么不直接通过getSystemClassLoader()获取类加载器来加载classpath路径下的类</strong>的呢？其实是可行的，但这种直接使用getSystemClassLoader()方法获取AppClassLoader加载类有一个缺点，那就是代码<strong>部署到不同服务时会出现问题</strong>，如把代码部署到Java Web应用服务或者EJB之类的服务将会出问题，因为<strong>这些服务使用的线程上下文类加载器并非AppClassLoader，而是Java Web应用服自家的类加载器，类加载器不同</strong>。，所以我们应用该少用getSystemClassLoader()。总之不同的服务使用的可能默认ClassLoader是不同的，但<strong>使用线程上下文类加载器总能获取到与当前程序执行相同的ClassLoader，从而避免不必要的问题</strong></p>
<h4 id="ClassLoader卸载Class"><a href="#ClassLoader卸载Class" class="headerlink" title="ClassLoader卸载Class"></a><strong>ClassLoader卸载Class</strong></h4><p>JVM中的Class只有满足以下三个条件，才能被GC回收，也就是该Class被卸载（unload）：</p>
<ul>
<li>该类所有的实例都已经被GC。</li>
<li>加载该类的ClassLoader实例已经被GC。</li>
<li>该类的java.lang.Class对象没有在任何地方被引用。</li>
</ul>
<p><strong>GC的时机我们是不可控的，那么同样的我们对于Class的卸载也是不可控的</strong></p>
<h3 id="JVM中判断class对象相同的标准"><a href="#JVM中判断class对象相同的标准" class="headerlink" title="JVM中判断class对象相同的标准"></a>JVM中判断class对象相同的标准</h3><p><strong>1.类的完整类名必须一致 包括包名</strong></p>
<p><strong>2.加载这个类的ClassLoader（指类加载器的实例对象）必须相同</strong></p>
<p>换言之 在JVM中 即使两个类对象（class对象）来源于同一个class文件，被同一个虚拟机所加载，但只要加载他们的ClassLoader实例对象不同，那么这两个类对象也是不同。</p>
<h3 id="类加载器的引用"><a href="#类加载器的引用" class="headerlink" title="类加载器的引用"></a>类加载器的引用</h3><p>JVM必须知道一个类的类型是由启动类加载器加载还是由用户类加载器加载。</p>
<p><strong>若由用户类加载器加载</strong>：<strong>JVM会将这个类加载器的一个引用作为类信息的一部分保存在方法区（jdk8元空间）中</strong>；当解析一个类型到另一个类型的引用的时候，JVM需要保证两个类型的类加载器是相同的。</p>
<h3 id="Java程序对类的使用方式"><a href="#Java程序对类的使用方式" class="headerlink" title="Java程序对类的使用方式"></a>Java程序对类的使用方式</h3><p>会不会<strong>导致类的初始化</strong> 决定是主动使用还是被动使用</p>
<h4 id="主动使用"><a href="#主动使用" class="headerlink" title="主动使用"></a>主动使用</h4><p>1.创建类的实例</p>
<p>2.访问某个类或接口的静态变量，或者对该静态变量赋值</p>
<p>3.调用类的静态方法</p>
<p>4.反射（Class.forName(“全类名”)）</p>
<p>5.初始化一个类的子类</p>
<p>6.Java虚拟机启动时被表明为启动类的类</p>
<p>7.JDK7开始提供的动态语言支持：</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922102407895.png" alt="image-20220922102407895"></p>
<h4 id="被动使用"><a href="#被动使用" class="headerlink" title="被动使用"></a>被动使用</h4><p>除了主动使用的7种情况 其他使用Java类的方式都被看作是对类的<strong>被动使用</strong>，<strong>都不会导致类的初始化</strong>。</p>
<h2 id="运行时数据区"><a href="#运行时数据区" class="headerlink" title="运行时数据区"></a>运行时数据区</h2><p><strong>内存</strong> 是<strong>硬盘</strong>和<strong>CPU</strong>的<strong>中间仓库及桥梁</strong> <strong>承载着操作系统和应用程序的实时运行</strong>。</p>
<p><strong>JVM</strong>内存布局规定了Java在运行过程中<strong>内存申请，分配，管理的策略</strong>。<strong>保证JVM的高效稳定运行</strong></p>
<p><strong>不同的JVM对于内存的划分方式和管理机制存在着部分差异。</strong></p>
<p><strong>根据《Java 虚拟机规范(Java SE 7 版)》规定</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922103004735.png" alt="image-20220922103004735"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922103042499.png" alt="image-20220922103042499"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922103933396.png" alt="image-20220922103933396"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922104555434.png" alt="image-20220922104555434">红色的为多个线程共享，灰色的为单个线程私有的，即</p>
<p><strong>线程间共享：堆，对外内存。</strong></p>
<p><strong>每个线程：独立包括程序计数器，栈，本地方法栈</strong><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922104700100.png" alt="image-20220922104700100"></p>
<h3 id="程序计数器（PC-Regisster）"><a href="#程序计数器（PC-Regisster）" class="headerlink" title="程序计数器（PC Regisster）"></a>程序计数器（PC Regisster）</h3><p><strong>Program Counter Register</strong>	程序计数寄存器</p>
<p><strong>作用：PC 寄存器 用来储存指向下一条指令的地址，也即将要执行的指令代码。由执行引擎读取下一条指令。</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922114918122.png" alt="image-20220922114918122"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922112757011.png" alt="image-20220922112757011"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922114457556.png" alt="image-20220922114457556"></p>
<p><strong>内存空间小，线程私有</strong>。<strong>字节码解释器工作</strong>是就是<strong>通过改变这个计数器的值来选取下一条需要执行指令的字节码指令</strong>，<strong>分支、循环、跳转、异常处理、线程恢复等基础功能都需要依赖计数器完成</strong></p>
<p><strong>如果线程正在执行一个 Java 方法</strong>，这个计数器记录的是<strong>正在执行的虚拟机字节码指令的地址</strong>；</p>
<p><strong>如果正在执行的是 Native 方法</strong>，这个计数器的值则为 **(Undefined)**。</p>
<p><strong>此内存区域是唯一一个在 Java 虚拟机规范中没有规定任何 OutOfMemoryError 情况的区域</strong>程序计数器的特点</p>
<p>　　1.线程隔离性，每个线程工作时都有属于自己的独立计数器。<br>　　2.执行java方法时，程序计数器是有值的，且记录的是正在执行的字节码指令的地址（参考上一小节的描述）。<br>　　3.执行native本地方法时，程序计数器的值为空（Undefined）。因为native方法是java通过JNI直接调用本地C&#x2F;C++库，可以近似的认为native方法相当于C&#x2F;C++暴露给java的一个接口，java通过调用这个接口从而调用到C&#x2F;C++方法。由于该方法是通过C&#x2F;C++而不是java进行实现。那么自然无法产生相应的字节码，并且C&#x2F;C++执行时的内存分配是由自己语言决定的，而不是由JVM决定的</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922103004735.png" alt="image-20220922103004735"></p>
<h4 id="程序计算器常见问题"><a href="#程序计算器常见问题" class="headerlink" title="程序计算器常见问题"></a>程序计算器常见问题</h4><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922115103658.png" alt="image-20220922115103658"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922115138514.png" alt="image-20220922115138514"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922115320841.png" alt="image-20220922115320841"></p>
<h4 id="CPU时间片"><a href="#CPU时间片" class="headerlink" title="CPU时间片 "></a>CPU时间片 <img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922115459403.png" alt="image-20220922115459403"></h4><h4 id="CPU-并行-并发"><a href="#CPU-并行-并发" class="headerlink" title="CPU 并行 并发"></a><strong>CPU 并行 并发</strong></h4><p><strong>并发：CPU单个核心同时处理多个线程</strong>（各个线程争夺CPU时间片，在各个线程间来回高频的切换）</p>
<p><strong>并行：CPU多个核心处理多个线程</strong></p>
<h3 id="虚拟机栈（JVM-Stack）"><a href="#虚拟机栈（JVM-Stack）" class="headerlink" title="虚拟机栈（JVM Stack）"></a>虚拟机栈（JVM Stack）</h3><p><strong>线程私有，生命周期和线程一致。</strong>描述的是 Java 方法执行的内存模型：<strong>每个方法在执行时都会床创建一个栈帧(Stack Frame)<strong>用于</strong>存储局部变量表、操作数栈、动态链接、方法出口等信息</strong>。<strong>每一个方法从调用直至执行结束，就对应着一个栈帧从虚拟机栈中入栈到出栈的过程</strong>。<strong>负责管理Java程序的运行</strong></p>
<p><strong>局部变量表</strong>：存放了编译期可知的各种基本类型(boolean、byte、char、short、int、float、long、double)、对象引用(reference 类型)和 returnAddress 类型(指向了一条字节码指令的地址)</p>
<p><strong>StackOverflowError：线程请求的栈深度大于虚拟机所允许的深度。</strong><br><strong>OutOfMemoryError：如果虚拟机栈可以动态扩展，而扩展时无法申请到足够的内存</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922121032602.png" alt="image-20220922121032602"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922121325647.png" alt="image-20220922121325647"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922121415970.png" alt="image-20220922121415970"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922120356973.png" alt="image-20220922120356973"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922120446022.png" alt="image-20220922120446022"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922120737732.png" alt="image-20220922120737732"></p>
<h4 id="栈可能会出现的异常"><a href="#栈可能会出现的异常" class="headerlink" title="栈可能会出现的异常"></a>栈可能会出现的异常</h4><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922121753369.png" alt="image-20220922121753369"></p>
<h4 id="设置栈固定的内存大小"><a href="#设置栈固定的内存大小" class="headerlink" title="设置栈固定的内存大小"></a>设置栈固定的内存大小</h4><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922121856779.png" alt="image-20220922121856779"></p>
<h4 id="栈的储存单位-栈帧"><a href="#栈的储存单位-栈帧" class="headerlink" title="栈的储存单位-栈帧"></a>栈的储存单位-栈帧</h4><p><strong>基本单位:栈帧</strong> <strong>线程上正在执行的每个方法对应一个栈帧</strong><br><strong>栈 遵循先进后出的原则 只有push压栈 pop弹出栈</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922122019231.png" alt="image-20220922122019231"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922122228725.png" alt="image-20220922122228725"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922122243126.png" alt="image-20220922122243126"></p>
<h4 id="栈帧的内部结构"><a href="#栈帧的内部结构" class="headerlink" title="栈帧的内部结构"></a>栈帧的内部结构</h4><p><strong>每一个栈帧</strong>都包括了<strong>局部变量表</strong>、<strong>操作数栈</strong>、动态连接、方法返回地址和一些额外的附加信息。 <strong>在编译Java程序源码的时候</strong>，<strong>栈帧中需要多大的局部变量表，需要多深的操作数栈就已经被分析计算 出来</strong>，并且<strong>写入到方法表的Code属性之中</strong>[2]。换言之，一个栈帧需要分配多少内存，并不会受到程序 运行期变量数据的影响，而仅仅取决于程序源码和具体的虚拟机实现的栈内存布局形式<br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922153214796.png" alt="image-20220922153214796"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922133628454.png" alt="image-20220922133628454"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922140150860.png" alt="image-20220922140150860"></p>
<h5 id="局部变量表"><a href="#局部变量表" class="headerlink" title="局部变量表"></a>局部变量表</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922140309136.png" alt="image-20220922140309136"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144053348.png" alt="image-20220922144053348"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922141344440.png" alt="image-20220922141344440"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922141157285.png" alt="image-20220922141157285"></p>
<h6 id="slot槽-重复利用"><a href="#slot槽-重复利用" class="headerlink" title="slot槽 重复利用"></a>slot槽 重复利用</h6><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144036851.png" alt="image-20220922144036851"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144108124.png" alt="image-20220922144108124"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144120973.png" alt="image-20220922144120973"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144135710.png" alt="image-20220922144135710"></p>
<h6 id="静态变量和局部变量的对比"><a href="#静态变量和局部变量的对比" class="headerlink" title="静态变量和局部变量的对比"></a>静态变量和局部变量的对比</h6><p><strong>局部变量必须显性初始化</strong> </p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144310733.png" alt="image-20220922144310733"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144332069.png" alt="image-20220922144332069"></p>
<h6 id="静态方法-amp-非静态方法的局部变量表"><a href="#静态方法-amp-非静态方法的局部变量表" class="headerlink" title="静态方法&amp;非静态方法的局部变量表"></a>静态方法&amp;非静态方法的局部变量表</h6><p><strong>静态方法的局部变量表中无this变量 因此静态方法中无法使用this.</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922145200405.png" alt="image-20220922145200405"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144804451.png" alt="image-20220922144804451"></p>
<p><strong>非静态方法中默认都存在this变量</strong><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922145236412.png" alt="image-20220922145236412"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922144828044.png" alt="image-20220922144828044"></p>
<h5 id="操作数栈"><a href="#操作数栈" class="headerlink" title="操作数栈"></a>操作数栈</h5><p>操作数栈（Operand Stack）也常被称为操作栈，它是一个后入先出（Last In First Out，LIFO） 栈。同局部变量表一样，<strong>操作数栈的最大深度也在编译的时候被写入到Code属性的max_stacks数据项 之中</strong>。</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922153608081.png" alt="image-20220922153608081"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922150755930.png" alt="image-20220922150755930"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922150447171.png" alt="image-20220922150447171"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922150457435.png" alt="image-20220922150457435"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922150557178.png" alt="image-20220922150557178"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922150921447.png" alt="image-20220922150921447"></p>
<p><strong>代码演示</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922151651694.png" alt="image-20220922151651694"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922151601001.png" alt="image-20220922151601001"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922151610177.png" alt="image-20220922151610177"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922151618655.png" alt="image-20220922151618655"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922151630355.png" alt="image-20220922151630355"></p>
<h5 id="栈顶缓存技术"><a href="#栈顶缓存技术" class="headerlink" title="栈顶缓存技术"></a>栈顶缓存技术</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220922152641277.png" alt="image-20220922152641277"></p>
<h5 id="动态链接"><a href="#动态链接" class="headerlink" title="动态链接"></a>动态链接</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924115541013.png" alt="image-20220924115541013"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924115552912.png" alt="image-20220924115552912"></p>
<h5 id="方法的调用"><a href="#方法的调用" class="headerlink" title="方法的调用"></a>方法的调用</h5><h6 id="非虚方法"><a href="#非虚方法" class="headerlink" title="非虚方法"></a>非虚方法</h6><p><strong>早在编译期就确定了 在运行时是不可变的</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130607798.png" alt="image-20220924130607798"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130732990.png" alt="image-20220924130718490"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130747487.png" alt="image-20220924130747487"></p>
<h6 id="虚方法"><a href="#虚方法" class="headerlink" title="虚方法"></a>虚方法</h6><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927090842602.png" alt="image-20220927090842602"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130821628.png" alt="image-20220924130821628"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130804702.png" alt="image-20220924130804702"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924130858208.png" alt="image-20220924130858208"></p>
<h6 id="普通调用指令"><a href="#普通调用指令" class="headerlink" title="普通调用指令"></a>普通调用指令</h6><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924131136904.png" alt="image-20220924131136904"></p>
<h6 id="动态调用指令"><a href="#动态调用指令" class="headerlink" title="动态调用指令"></a>动态调用指令</h6><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924131144565.png" alt="image-20220924131144565"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924131227943.png" alt="image-20220924131227943"><br><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924131239943.png" alt="image-20220924131239943"></p>
<h5 id="方法返回地址"><a href="#方法返回地址" class="headerlink" title="方法返回地址"></a>方法返回地址</h5><p><strong>方法返回</strong></p>
<p>　　　　当一个方法开始执行的时候，可能有<strong>正常退出</strong>和<strong>异常退出</strong>两种情况。</p>
<p>　　　　<strong>正常退出</strong>是指方法正常完成操作并退出，没有抛出任何异常，如果当前方法正常完成，则根据当前方法返回的字节码指令进行处理。该方法返回的字节码指令中有可能存在返回值，也可能不存在返回值。</p>
<p>　　　　<strong>异常退出</strong>是指方法执行过程中遇到异常，并且这个异常在方法体内部没有得到处理，导致方法退出。也就是说无论是Java虚拟机抛出的异常还是代码中使用throw产生的异常，只要在本方法的异常表中没有找到对应的异常处理器，就会导致方法退出。</p>
<p>　　　　无论方法采用何种方式退出，<strong>在方法退出后都需要返回到方法被调用的位置，程序才能继续执行</strong>，方法返回时可能需要在当前栈帧中保存一些信息，用来帮它恢复其上层方法的执行状态。<strong>方法退出过程实际上等同于把当前栈帧出栈</strong>，因此退出可以执行的操作有：<strong>恢复上层方法的局部变量表和操作数栈，如果有返回值，需要将返回值压入调用者的操作数栈中</strong>，同时<strong>调整PC计数器的值以指向方法调用指令后的下一条指令</strong>。</p>
<p>　　　　一般来说，<strong>方法正常退出时，调用者的PC计数器值可以作为返回地址</strong>，栈帧中可能保存此计数值，<strong>而方法异常退出时，返回地址是通过异常处理器表确定的</strong>，栈帧中一般不会保存此部分信息</p>
<h5 id="附加信息"><a href="#附加信息" class="headerlink" title="附加信息"></a>附加信息</h5><h4 id="方法的结束-栈的pop"><a href="#方法的结束-栈的pop" class="headerlink" title="方法的结束-栈的pop"></a>方法的结束-栈的pop</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 虚拟机栈的查看</span></span><br><span class="line"><span class="comment"> * 方法的结束分为两种 一种是正常的函数返回(return) 一种是抛出异常的结束 都会导致栈帧pop</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ClassLoadingTest6</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ClassLoadingTest6</span> <span class="variable">classLoadingTest6</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassLoadingTest6</span>();</span><br><span class="line">            System.out.println(classLoadingTest6.method1());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Eddie&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">method1</span><span class="params">()</span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(10/0);</span></span><br><span class="line">        <span class="keyword">return</span> method2();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">method2</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> method3();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">method3</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="虚拟机栈相关面试题"><a href="#虚拟机栈相关面试题" class="headerlink" title="虚拟机栈相关面试题"></a>虚拟机栈相关面试题</h4><p><strong>①：举例栈溢出的情况？（溢出异常：StackOverFlowError）</strong></p>
<p>​	通过-Xss设置栈的大小</p>
<p><strong>②：调整栈的大小，就能保证不出现栈溢出吗？</strong></p>
<p>​	无法保证；比如递归调用无归情况时；</p>
<p><strong>③：分配的栈内存越大越好吗？</strong></p>
<p>​	只是避免过早的出现溢出异常：StackOverFlowError </p>
<p>​	栈内存大了 会影响线程数的数量 会挤占别的内存空间</p>
<p><strong>④：垃圾回收会涉及到虚拟机栈吗？</strong></p>
<p>​	不会的；进栈出栈</p>
<p><strong>⑤：方法中定义的局部变量是否线程安全？</strong></p>
<p>​	具体问题具体分析</p>
<p>​	比如StringBuilder 线程不安全 </p>
<p>​	StringBuffer线程安全 </p>
<h3 id="本地方法栈（Native-Method-Stack）"><a href="#本地方法栈（Native-Method-Stack）" class="headerlink" title="本地方法栈（Native Method Stack）"></a>本地方法栈（Native Method Stack）</h3><p><strong>本地方法栈是用于管理本地方法的调用</strong></p>
<p><strong>当一个线程调用了一个本地方法时，它就进入了一个全新的并且不再受虚拟机限制的世界。它和虚拟机有同样的权限。</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924141814214.png" alt="image-20220924141814214"></p>
<h4 id="本地方法"><a href="#本地方法" class="headerlink" title="本地方法"></a>本地方法</h4><p>Native标识 本地方法</p>
<p>一个Native Method就是一个Java调用非Java代码的接口。</p>
<p><strong>为了和Java环境外交互</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924141918126.png" alt="image-20220924141918126"></p>
<p>例如线程在调用Start（）方法来启动线程时 实际是系统调用本地方法start0（）来启动线程</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220924142141419.png" alt="image-20220924142141419"></p>
<h3 id="堆（heep）"><a href="#堆（heep）" class="headerlink" title="堆（heep）"></a>堆（heep）</h3><h5 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101930526.png" alt="image-20220927101930526"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101843595.png" alt="image-20220927101843595"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927102014262.png" alt="image-20220927102014262"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101916109.png" alt="image-20220927101916109"></p>
<h5 id="分区思想"><a href="#分区思想" class="headerlink" title="分区思想"></a>分区思想</h5><p>研究表明：不同的对象 生命周期不同 百分之70-百分之90的对象都是临时对象（朝生夕死）</p>
<p>新生代：有Eden区和两个幸存者区Survivor0以及Survivor1（from以及to）构成；to总为空。</p>
<p>老年代：存放在新生代中经历多次GC（阈值默认15）仍然存活的对象</p>
<p><strong>分区的唯一理由就是优化GC的性能</strong></p>
<h5 id="新生代"><a href="#新生代" class="headerlink" title="新生代"></a>新生代</h5><p>新对象和没达到一定年龄的对象都在新生代</p>
<p>**Survivor0和Survivor1永远只有一个在被使用 两个不会同时使用 ** 	即有一个幸存者空间总是空的</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101941987.png" alt="image-20220927101941987"></p>
<h5 id="老年代"><a href="#老年代" class="headerlink" title="老年代"></a>老年代</h5><p>被长时间使用的对象，老年代的内存空间应该要比年轻代更大</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927101954168.png" alt="image-20220927101954168"></p>
<h5 id="元空间（非堆）"><a href="#元空间（非堆）" class="headerlink" title="元空间（非堆）"></a>元空间（非堆）</h5><p>（JDK1.8 之前叫永久代）：像一些方法中的操作临时对象等，JDK1.8 之前是占用 JVM 内存，JDK1.8 之后直接使用物理内存</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927102003408.png" alt="image-20220927102003408"></p>
<h5 id="设置堆内存大小和-OOM"><a href="#设置堆内存大小和-OOM" class="headerlink" title="设置堆内存大小和 OOM"></a>设置堆内存大小和 OOM</h5><h5 id="手动设置"><a href="#手动设置" class="headerlink" title="手动设置"></a>手动设置</h5><p>开发中建议将初始堆内存 和 最大堆内存设置为一样的值</p>
<p>-Xms6000m -Xmx6000m</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927103311050.png" alt="image-20220927103311050"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927102743735.png" alt="image-20220927102743735"></p>
<h5 id="默认情况"><a href="#默认情况" class="headerlink" title="默认情况"></a>默认情况</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回 JVM 堆大小</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">initalMemory</span> <span class="operator">=</span> Runtime.getRuntime().totalMemory() / <span class="number">1024</span> /<span class="number">1024</span>;</span><br><span class="line">    <span class="comment">//返回 JVM 堆的最大内存</span></span><br><span class="line">    <span class="type">long</span> <span class="variable">maxMemory</span> <span class="operator">=</span> Runtime.getRuntime().maxMemory() / <span class="number">1024</span> /<span class="number">1024</span>;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;-Xms : &quot;</span>+initalMemory + <span class="string">&quot;M&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;-Xmx : &quot;</span>+maxMemory + <span class="string">&quot;M&quot;</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;系统内存大小：&quot;</span> + initalMemory * <span class="number">64</span> / <span class="number">1024</span> + <span class="string">&quot;G&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;系统内存大小：&quot;</span> + maxMemory * <span class="number">4</span> / <span class="number">1024</span> + <span class="string">&quot;G&quot;</span>);</span><br><span class="line">    <span class="comment">//-Xms : 254M</span></span><br><span class="line">    <span class="comment">//-Xmx : 4064M</span></span><br><span class="line">    <span class="comment">//系统内存大小：15G</span></span><br><span class="line">    <span class="comment">//系统内存大小：15G</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查看-设置的参数"><a href="#查看-设置的参数" class="headerlink" title="查看 设置的参数"></a>查看 设置的参数</h5><p>两种方式</p>
<p>①:cmd–jps–jstat -gc 进程id</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927105415037.png" alt="image-20220927105415037"></p>
<p>②:-XX:+PrintGCDetails</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927105528630.png" alt="image-20220927105528630"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927105607060.png" alt="image-20220927105607060"></p>
<h5 id="查看-JVM-堆内存分配"><a href="#查看-JVM-堆内存分配" class="headerlink" title="查看 JVM 堆内存分配"></a>查看 JVM 堆内存分配</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927110813485.png" alt="image-20220927110813485"></p>
<h5 id="对象在堆中的生命周期"><a href="#对象在堆中的生命周期" class="headerlink" title="对象在堆中的生命周期"></a>对象在堆中的生命周期</h5><p>我们的很多对象都是朝生夕死的</p>
<p>一般情况下，新创建的对象都会被分配到Eden区(一些大对象特殊处理)</p>
<p>这些对象经过第一次Minor GC后，如果仍然存活，将会被移到Survivor区。对象在Survivor区中每熬过一次Minor GC，年龄就会增加1岁，当它的年龄增加到一定程度时，就会被移动到年老代中</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927111435033.png" alt="image-20220927111435033"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927113802658.png" alt="image-20220927113802658"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927114247641.png" alt="image-20220927114247641"></p>
<h5 id="对象的分配过程"><a href="#对象的分配过程" class="headerlink" title="对象的分配过程"></a>对象的分配过程</h5><p>其中 幸存者区的from区和to区复制（复制算法）之后进行交换 谁空谁为to</p>
<p>一GC一交换 谁空谁是to</p>
<p>关于GC：频繁在新生代中收集 很少在老年代中收集，几乎不在永久代&#x2F;元空间中收集</p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927114457272.png" alt="image-20220927114457272"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927134856686.png" alt="image-20220927134856686"></p>
<h5 id="对象的分配过程的特殊情况"><a href="#对象的分配过程的特殊情况" class="headerlink" title="对象的分配过程的特殊情况"></a>对象的分配过程的特殊情况</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927121647339.png" alt="image-20220927121647339"></p>
<h5 id="GC-垃圾回收简介"><a href="#GC-垃圾回收简介" class="headerlink" title="GC 垃圾回收简介"></a>GC 垃圾回收简介</h5><p><strong>我们的很多对象都是朝生夕死的</strong>	<strong>因此Minor GC会频繁的触发</strong></p>
<p> <strong>Minor GC是Eden区满时触发（Survivor区满不会触发Minor GC）</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927124003012.png" alt="image-20220927124003012"></p>
<p>Major GC的速度 比 Minor GC通常 要慢10倍以上 从而STW的时间更长 </p>
<p><strong>调优时要减少Major GC的触发次数 Full GC的触发次数</strong></p>
<h5 id="内存分配策略（对象Promotion策略）"><a href="#内存分配策略（对象Promotion策略）" class="headerlink" title="内存分配策略（对象Promotion策略）"></a>内存分配策略（对象Promotion策略）</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927141828861.png" alt="image-20220927141828861"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927141855732.png" alt="image-20220927141855732"></p>
<p><strong>大对象直接分配到老年代（新生代无法承载的大对象 直接分配到老年代）</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927142308928.png" alt="image-20220927142308928"></p>
<h5 id="堆空间的参数设置"><a href="#堆空间的参数设置" class="headerlink" title="堆空间的参数设置"></a>堆空间的参数设置</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927154321104.png" alt="image-20220927154321104"></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927153736307.png" alt="image-20220927153736307"></p>
<h5 id="空间分配担保"><a href="#空间分配担保" class="headerlink" title="空间分配担保"></a>空间分配担保</h5><p><strong>目前来讲jdk7以来 空间分配担保 默认为true</strong> </p>
<p><strong>即：检测到老年代的最大可用的连续空间大于新生代所有对象的总空间（最坏情况下新生代的所有对象都存活下来要晋升到老年代）</strong></p>
<p>​			<strong>检测到老年代的最大可用连续空间是否大于历次晋升到老年代的对象的平均大小（按照往次的晋升统计）</strong></p>
<p>​		<strong>都会进行Minor GC 否则进行Full GC</strong></p>
<p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927153800393.png" alt="image-20220927153800393"></p>
<h5 id="TLAB"><a href="#TLAB" class="headerlink" title="TLAB"></a>TLAB</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927151535365.png" alt="image-20220927151535365"></p>
<h5 id="堆是分配对象存储的唯一选择吗"><a href="#堆是分配对象存储的唯一选择吗" class="headerlink" title="堆是分配对象存储的唯一选择吗"></a>堆是分配对象存储的唯一选择吗</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927155518020.png" alt="image-20220927155518020"></p>
<h5 id="逃逸分析"><a href="#逃逸分析" class="headerlink" title="逃逸分析"></a>逃逸分析</h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927164118327.png" alt="image-20220927164118327"></p>
<p>逃逸分析在JIT编译器使用</p>
<p>执行引擎是解释器和JIT编译器混合使用的</p>
<p><strong>Hotspot虚拟机没有栈上分配 因此是通过标量替换实现的；</strong> <strong>标量替换将聚合量（对象）打散成标量（基本数据类型以及对象的引用）</strong></p>
<p>换言之：在Hotspot虚拟机中 通过逃逸分析 发现了未发生逃逸的对象 可以进行标量替换 将其存储于栈帧中的局部变量表里。减轻堆空间的压力（GC的频率）</p>
<p>**逃逸分析(Escape Analysis)**是目前 Java 虚拟机中比较前沿的优化技术**。这是一种可以有效减少 Java 程序中同步负载和内存堆分配压力的跨函数全局数据流分析算法**。通过逃逸分析，Java Hotspot 编译器能够分析出一个新的对象的引用的使用范围从而决定是否要将这个对象分配到堆上。</p>
<p><strong>JDK7以来默认开启逃逸分析；</strong></p>
<p><strong>开发中  能使用局部变量的就尽量不在方法外定义；</strong></p>
<p>逃逸分析的基本行为就是分析对象动态作用域：</p>
<ul>
<li><strong>当一个对象在方法中被定义后，对象只在方法内部使用，则认为没有发生逃逸。</strong></li>
<li><strong>当一个对象在方法中被定义后，它被外部方法所引用，则认为发生逃逸。例如作为调用参数传递到其他地方中，称为方法逃逸。</strong></li>
</ul>
<p>例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> StringBuffer <span class="title function_">craeteStringBuffer</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   sb.append(s1);</span><br><span class="line">   sb.append(s2);</span><br><span class="line">   <span class="keyword">return</span> sb;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p><code>StringBuffer sb</code>是一个方法内部变量，上述代码中直接将sb返回，这样这个 StringBuffer 有可能被其他方法所改变，这样它的作用域就不只是在方法内部，虽然它是一个局部变量，但是其逃逸到了方法外部。甚至还有可能被外部线程访问到，譬如赋值给类变量或可以在其他线程中访问的实例变量，称为线程逃逸。</p>
<p>上述代码如果想要 <code>StringBuffer sb</code>不逃出方法，可以这样写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">createStringBuffer</span><span class="params">(String s1, String s2)</span> &#123;</span><br><span class="line">   <span class="type">StringBuffer</span> <span class="variable">sb</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuffer</span>();</span><br><span class="line">   sb.append(s1);</span><br><span class="line">   sb.append(s2);</span><br><span class="line">   <span class="keyword">return</span> sb.toString();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>不直接返回 StringBuffer，那么 StringBuffer 将不会逃逸出方法。</p>
<p><strong>参数设置：</strong></p>
<ul>
<li>在 JDK 6u23 版本之后，HotSpot 中默认就已经开启了逃逸分析</li>
<li>如果使用较早版本，可以通过<code>-XX&quot;+DoEscapeAnalysis</code>显式开启</li>
</ul>
<p>开发中使用局部变量，就不要在方法外定义。</p>
<h5 id="使用逃逸分析，编译器可以对代码做优化："><a href="#使用逃逸分析，编译器可以对代码做优化：" class="headerlink" title="使用逃逸分析，编译器可以对代码做优化："></a><strong>使用逃逸分析，编译器可以对代码做优化：</strong></h5><p><strong>基于逃逸分析：****逃逸分析是以下三个操作的大前提</strong></p>
<p><strong>对未发生逃逸的对象：</strong></p>
<p><strong>栈上分配</strong> 即分配到栈帧中的局部变量表中（局部变量表中只存储基本数据类型以及对象的引用）；</p>
<p>因此要对未发生逃逸的对象进行<strong>标量替换</strong>将<strong>聚合量（对象）打散成标量（基本数据类型以及对象的引用）</strong></p>
<ul>
<li><strong>栈上分配</strong>：将堆分配转化为栈分配。如果一个对象在子程序中被分配，要使指向该对象的指针永远不会逃逸，对象可能是栈分配的候选，而不是堆分配</li>
<li><strong>同步省略</strong>：如果一个对象被发现只能从一个线程被访问到，那么对于这个对象的操作可以不考虑同步</li>
<li><strong>分离对象或标量替换</strong>：有的对象可能不需要作为一个连续的内存结构存在也可以被访问到，那么对象的部分（或全部）可以不存储在内存，而存储在 CPU 寄存器（Java的Hotspot中的栈）–<strong>标量替换可以视为栈上分配的一种特例</strong>；</li>
</ul>
<p>JIT 编译器在编译期间根据逃逸分析的结果，发现如果一个对象并没有逃逸出方法的话，就可能被优化成栈上分配。分配完成后，继续在调用栈内执行，最后线程结束，栈空间被回收，局部变量对象也被回收。这样就无需进行垃圾回收了。</p>
<p>常见栈上分配的场景：成员变量赋值、方法返回值、实例引用传递</p>
<p><strong>代码优化之同步省略（锁消除）</strong></p>
<ul>
<li>线程同步的代价是相当高的，同步的后果是降低并发性和性能</li>
<li>在动态编译同步块的时候，JIT 编译器可以借助逃逸分析来判断同步块所使用的锁对象是否能够被一个线程访问而没有被发布到其他线程。如果没有，那么 JIT 编译器在编译这个同步块的时候就会取消对这个代码的同步。这样就能大大提高并发性和性能。这个取消同步的过程就叫做<strong>同步省略，也叫锁消除</strong>。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keep</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">Object</span> <span class="variable">keeper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  <span class="keyword">synchronized</span>(keeper) &#123;</span><br><span class="line">    System.out.println(keeper);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<p>如上代码，代码中对 keeper 这个对象进行加锁，但是 keeper 对象的生命周期只在 <code>keep()</code>方法中，并不会被其他线程所访问到，所以在 JIT编译阶段就会被优化掉。优化成：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">keep</span><span class="params">()</span> &#123;</span><br><span class="line">  <span class="type">Object</span> <span class="variable">keeper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br><span class="line">  System.out.println(keeper);</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>

<p><strong>代码优化之标量替换</strong></p>
<p><strong>标量</strong>（Scalar）是指一个无法再分解成更小的数据的数据。Java 中的原始数据类型就是标量。</p>
<p>相对的，那些的还可以分解的数据叫做<strong>聚合量</strong>（Aggregate），Java 中的对象就是聚合量，因为其还可以分解成其他聚合量和标量。</p>
<p>在 JIT 阶段，通过逃逸分析确定该对象不会被外部访问，并且对象可以被进一步分解时，JVM 不会创建该对象，而会将该对象成员变量分解若干个被这个方法使用的成员变量所代替。这些代替的成员变量在栈帧或寄存器（Java的Hotspot中的栈）上分配空间。这个过程就是<strong>标量替换</strong>。</p>
<p>通过 <code>-XX:+EliminateAllocations</code> 可以开启标量替换，<code>-XX:+PrintEliminateAllocations</code> 查看标量替换情况。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">   alloc();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">alloc</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">Point</span> <span class="variable">point</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Point</span>（<span class="number">1</span>,<span class="number">2</span>）;</span><br><span class="line">   System.out.println(<span class="string">&quot;point.x=&quot;</span>+point.x+<span class="string">&quot;; point.y=&quot;</span>+point.y);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Point</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> x;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> y;</span><br><span class="line">&#125;     </span><br></pre></td></tr></table></figure>

<p>以上代码中，point 对象并没有逃逸出 <code>alloc()</code> 方法，并且 point 对象是可以拆解成标量的。那么，JIT 就不会直接创建 Point 对象，而是直接使用两个标量 int x ，int y 来替代 Point 对象。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">alloc</span><span class="params">()</span> &#123;</span><br><span class="line">   <span class="type">int</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">   <span class="type">int</span> <span class="variable">y</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">   System.out.println(<span class="string">&quot;point.x=&quot;</span>+x+<span class="string">&quot;; point.y=&quot;</span>+y);</span><br><span class="line">&#125;      </span><br></pre></td></tr></table></figure>

<p><strong>代码优化之栈上分配</strong></p>
<p>我们通过 JVM 内存分配可以知道 JAVA 中的对象都是在堆上进行分配，当对象没有被引用的时候，需要依靠 GC 进行回收内存，如果对象数量较多的时候，会给 GC 带来较大压力，也间接影响了应用的性能。为了减少临时对象在堆内分配的数量，JVM 通过逃逸分析确定该对象不会被外部访问。那就通过标量替换将该对象分解在栈上分配内存，这样该对象所占用的内存空间就可以随栈帧出栈而销毁，就减轻了垃圾回收的压力。</p>
<h5 id="逃逸分析总结："><a href="#逃逸分析总结：" class="headerlink" title="逃逸分析总结："></a><strong>逃逸分析总结：</strong></h5><p><img src="C:\Users\ZJH20\AppData\Roaming\Typora\typora-user-images\image-20220927164103083.png" alt="image-20220927164103083"></p>
<p>关于逃逸分析的论文在1999年就已经发表了，但直到JDK 1.6才有实现，而且这项技术到如今也并不是十分成熟的。</p>
<p><strong>其根本原因就是无法保证逃逸分析的性能消耗一定能高于他的消耗。虽然经过逃逸分析可以做标量替换、栈上分配、和锁消除。但是逃逸分析自身也是需要进行一系列复杂的分析的，这其实也是一个相对耗时的过程。</strong></p>
<p>一个极端的例子，就是经过逃逸分析之后，发现没有一个对象是不逃逸的。那这个逃逸分析的过程就白白浪费掉了。</p>
<p>虽然这项技术并不十分成熟，但是他也是即时编译器优化技术中一个十分重要的手段。</p>
<h3 id="方法区（Method-Area）"><a href="#方法区（Method-Area）" class="headerlink" title="方法区（Method Area）"></a>方法区（Method Area）</h3>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/08/22/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="EddieZhang">
      <meta itemprop="description" content="当你开始认真的时候，全世界都会给你让路！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Perserverance">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/08/22/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-08-22 14:17:13" itemprop="dateCreated datePublished" datetime="2022-08-22T14:17:13+08:00">2022-08-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">EddieZhang</p>
  <div class="site-description" itemprop="description">当你开始认真的时候，全世界都会给你让路！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">3</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">EddieZhang</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
